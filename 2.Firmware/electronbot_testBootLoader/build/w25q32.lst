ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"w25q32.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.SPI2_Write,"ax",%progbits
  20              		.align	1
  21              		.global	SPI2_Write
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	SPI2_Write:
  27              	.LVL0:
  28              	.LFB133:
  29              		.file 1 "user/w25q32.c"
   1:user/w25q32.c **** /* ---------------------------------- File Description --------------------------------------------
   2:user/w25q32.c **** „ÄêÊñá‰ª∂ÂäüËÉΩ„ÄëÔºöÊú¨Êñá‰ª∂‰∏∫ W25Q128  SpiFLASHËäØÁâáÈ©±Âä®Êñá‰ª∂
   3:user/w25q32.c ****               W25Q128  Â≠òÂÇ®Èáè‰∏∫128M bit  ÂàÜ‰∏∫4096‰∏™ÊâáÂå∫ÔºåÊØè‰∏™ÊâáÂå∫Êúâ4K byte  16‰∏™Êâá
   4:user/w25q32.c ****               ÊØèpage ‰∏∫256‰∏™Â≠óËäÇ  ÊÄªÂÖ±65536È°µ   ÊØè‰∏™ÊâáÂå∫16È°µ
   5:user/w25q32.c ****               ÊúÄÂø´ËÆøÈóÆÈÄüÂ∫¶È´òËææ104MHz
   6:user/w25q32.c **** „ÄêÂàõÂª∫Êó∂Èó¥„ÄëÔºö2012Âπ¥10Êúà22Êó•ÊòüÊúü‰∏Ä13:20:40
   7:user/w25q32.c **** „ÄêÊñá‰ª∂ÁâàÊú¨„ÄëÔºöV1.0
   8:user/w25q32.c **** „Äê‰ΩúËÄÖÂ£∞Êòé„ÄëÔºöÊú¨Êñá‰ª∂‰ΩúËÄÖ‰∏∫Ê∏©‰∏ö‰∏≠,ÂèØÈÄöËøáemail‰∏é‰ΩúËÄÖËÅîÁ≥ª: eric540@163.com
   9:user/w25q32.c **** ------------------------------------------------------------------------------------------ */
  10:user/w25q32.c **** 
  11:user/w25q32.c **** #include "w25q32.h"
  12:user/w25q32.c **** #include <stdio.h>
  13:user/w25q32.c **** 
  14:user/w25q32.c **** void SPI2_Write(uint8_t dat)
  15:user/w25q32.c **** {
  30              		.loc 1 15 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 8
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 15 1 is_stmt 0 view .LVU1
  35 0000 00B5     		push	{lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 4
  38              		.cfi_offset 14, -4
  39 0002 83B0     		sub	sp, sp, #12
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 16
  42 0004 8DF80700 		strb	r0, [sp, #7]
  16:user/w25q32.c ****     HAL_SPI_Transmit(&hspi1, &dat, 1, 0xff);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 2


  43              		.loc 1 16 5 is_stmt 1 view .LVU2
  44 0008 FF23     		movs	r3, #255
  45 000a 0122     		movs	r2, #1
  46 000c 0DF10701 		add	r1, sp, #7
  47 0010 0248     		ldr	r0, .L3
  48              	.LVL1:
  49              		.loc 1 16 5 is_stmt 0 view .LVU3
  50 0012 FFF7FEFF 		bl	HAL_SPI_Transmit
  51              	.LVL2:
  17:user/w25q32.c **** }
  52              		.loc 1 17 1 view .LVU4
  53 0016 03B0     		add	sp, sp, #12
  54              	.LCFI2:
  55              		.cfi_def_cfa_offset 4
  56              		@ sp needed
  57 0018 5DF804FB 		ldr	pc, [sp], #4
  58              	.L4:
  59              		.align	2
  60              	.L3:
  61 001c 00000000 		.word	hspi1
  62              		.cfi_endproc
  63              	.LFE133:
  65              		.section	.text.SPI2_Read,"ax",%progbits
  66              		.align	1
  67              		.global	SPI2_Read
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	SPI2_Read:
  73              	.LFB134:
  18:user/w25q32.c **** uint8_t SPI2_Read(void)
  19:user/w25q32.c **** {
  74              		.loc 1 19 1 is_stmt 1 view -0
  75              		.cfi_startproc
  76              		@ args = 0, pretend = 0, frame = 8
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78 0000 00B5     		push	{lr}
  79              	.LCFI3:
  80              		.cfi_def_cfa_offset 4
  81              		.cfi_offset 14, -4
  82 0002 85B0     		sub	sp, sp, #20
  83              	.LCFI4:
  84              		.cfi_def_cfa_offset 24
  20:user/w25q32.c ****     uint8_t rx_dat;
  85              		.loc 1 20 5 view .LVU6
  21:user/w25q32.c ****     uint8_t tx_dat=0xff;
  86              		.loc 1 21 5 view .LVU7
  87              		.loc 1 21 13 is_stmt 0 view .LVU8
  88 0004 FF23     		movs	r3, #255
  89 0006 8DF80E30 		strb	r3, [sp, #14]
  22:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, &tx_dat, &rx_dat, 1, 0xff);
  90              		.loc 1 22 5 is_stmt 1 view .LVU9
  91 000a 0093     		str	r3, [sp]
  92 000c 0123     		movs	r3, #1
  93 000e 0DF10F02 		add	r2, sp, #15
  94 0012 0DF10E01 		add	r1, sp, #14
  95 0016 0448     		ldr	r0, .L7
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 3


  96 0018 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
  97              	.LVL3:
  23:user/w25q32.c ****     // HAL_SPI_Receive(&hspi1, &rx_dat, 1, 20);
  24:user/w25q32.c ****     return rx_dat;
  98              		.loc 1 24 5 view .LVU10
  25:user/w25q32.c **** }
  99              		.loc 1 25 1 is_stmt 0 view .LVU11
 100 001c 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 101 0020 05B0     		add	sp, sp, #20
 102              	.LCFI5:
 103              		.cfi_def_cfa_offset 4
 104              		@ sp needed
 105 0022 5DF804FB 		ldr	pc, [sp], #4
 106              	.L8:
 107 0026 00BF     		.align	2
 108              	.L7:
 109 0028 00000000 		.word	hspi1
 110              		.cfi_endproc
 111              	.LFE134:
 113              		.section	.text.FlashWait_Busy,"ax",%progbits
 114              		.align	1
 115              		.global	FlashWait_Busy
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 120              	FlashWait_Busy:
 121              	.LFB136:
  26:user/w25q32.c **** 
  27:user/w25q32.c **** void SpiFlash_Init(void)
  28:user/w25q32.c **** {
  29:user/w25q32.c ****     flashInfoTypedef flashInfo;   
  30:user/w25q32.c ****     //WP
  31:user/w25q32.c ****     /*GPIO_InitTypeDef GPIO_InitStructure;
  32:user/w25q32.c ****     GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  33:user/w25q32.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;
  34:user/w25q32.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  35:user/w25q32.c ****     GPIO_Init(GPIOC, &GPIO_InitStructure);
  36:user/w25q32.c ****     FLASH_WP_High();*/
  37:user/w25q32.c ****     // SPI2_Configuration();
  38:user/w25q32.c ****     
  39:user/w25q32.c ****     FlashGet_ElectronicInfo(&flashInfo);
  40:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
  41:user/w25q32.c ****     printf("DeviceID=%02X\r\n",flashInfo.DeviceID[0]);
  42:user/w25q32.c ****     if(flashInfo.ManufacturerID==0xEF)
  43:user/w25q32.c ****     {
  44:user/w25q32.c ****         printf("\tFlash Info: WINBOND SPI FLASH\r\n");
  45:user/w25q32.c ****     } */
  46:user/w25q32.c ****     FlashGet_Info(&flashInfo);
  47:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
  48:user/w25q32.c ****     printf("DeviceID=%02X%02X\r\n",flashInfo.DeviceID[0],flashInfo.DeviceID[1]);
  49:user/w25q32.c ****     if((flashInfo.DeviceID[0]==0x40)&&(flashInfo.DeviceID[1]==0x18))
  50:user/w25q32.c ****     {
  51:user/w25q32.c ****         printf("\tFlashType:W25Q128  FlashSize:128Mbit\r\n\tTotal 256 Blocks  16 Sectors/Block  4KB
  52:user/w25q32.c ****     }
  53:user/w25q32.c ****     else if((flashInfo.DeviceID[0]==0x40)&&(flashInfo.DeviceID[1]==0x16))
  54:user/w25q32.c ****     {
  55:user/w25q32.c ****         printf("\tFlashType:W25Q32  FlashSize:32Mbit\r\n\tTotal 64 Blocks  16 Sectors/Block  4KB/Se
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 4


  56:user/w25q32.c ****     }
  57:user/w25q32.c ****     else
  58:user/w25q32.c ****     {
  59:user/w25q32.c **** 
  60:user/w25q32.c ****     } */
  61:user/w25q32.c ****     FlashChip_Erase();
  62:user/w25q32.c **** 
  63:user/w25q32.c **** #if 0    
  64:user/w25q32.c ****     FlashEnter_DeepPowerDown();
  65:user/w25q32.c ****     tmp=FlashReleaseFrom_DeepPowerDownE();
  66:user/w25q32.c ****     printf("ElectronicSignature=%02x\r\n",tmp);  //ÔøΩÔøΩ”°ÔøΩÔøΩÔøΩŒ™: 0x14
  67:user/w25q32.c **** #endif    
  68:user/w25q32.c **** }
  69:user/w25q32.c **** 
  70:user/w25q32.c **** void FlashWait_Busy(void)
  71:user/w25q32.c **** {
 122              		.loc 1 71 1 is_stmt 1 view -0
 123              		.cfi_startproc
 124              		@ args = 0, pretend = 0, frame = 0
 125              		@ frame_needed = 0, uses_anonymous_args = 0
 126 0000 10B5     		push	{r4, lr}
 127              	.LCFI6:
 128              		.cfi_def_cfa_offset 8
 129              		.cfi_offset 4, -8
 130              		.cfi_offset 14, -4
  72:user/w25q32.c ****     uint8_t flashSta;
 131              		.loc 1 72 5 view .LVU13
  73:user/w25q32.c ****     uint32_t retry=0;
 132              		.loc 1 73 5 view .LVU14
 133              	.LVL4:
  74:user/w25q32.c ****     FLASH_CS_Low();
 134              		.loc 1 74 5 view .LVU15
 135 0002 0022     		movs	r2, #0
 136 0004 1021     		movs	r1, #16
 137 0006 0C48     		ldr	r0, .L13
 138 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 139              	.LVL5:
 140              		.loc 1 74 19 view .LVU16
  75:user/w25q32.c ****     SPI2_Write(RDSD_CMD);
 141              		.loc 1 75 5 view .LVU17
 142 000c 0520     		movs	r0, #5
 143 000e FFF7FEFF 		bl	SPI2_Write
 144              	.LVL6:
  73:user/w25q32.c ****     uint32_t retry=0;
 145              		.loc 1 73 14 is_stmt 0 view .LVU18
 146 0012 0024     		movs	r4, #0
 147              	.LVL7:
 148              	.L11:
  76:user/w25q32.c ****     do{
 149              		.loc 1 76 5 is_stmt 1 view .LVU19
  77:user/w25q32.c ****         
  78:user/w25q32.c ****         flashSta=SPI2_Read();
 150              		.loc 1 78 9 view .LVU20
 151              		.loc 1 78 18 is_stmt 0 view .LVU21
 152 0014 FFF7FEFF 		bl	SPI2_Read
 153              	.LVL8:
  79:user/w25q32.c ****         if(retry++>FLASH_BUSY_TIMEOUT)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 5


 154              		.loc 1 79 9 is_stmt 1 view .LVU22
 155 0018 2246     		mov	r2, r4
 156              		.loc 1 79 17 is_stmt 0 view .LVU23
 157 001a 0134     		adds	r4, r4, #1
 158              	.LVL9:
 159              		.loc 1 79 11 view .LVU24
 160 001c 44F62063 		movw	r3, #20000
 161 0020 9A42     		cmp	r2, r3
 162 0022 02D8     		bhi	.L10
  80:user/w25q32.c ****             break;
  81:user/w25q32.c ****         //printf("flashSta=%02x----%d\r\n",flashSta,retry);
  82:user/w25q32.c ****     }while(flashSta&0x01);
 163              		.loc 1 82 11 is_stmt 1 view .LVU25
 164              		.loc 1 82 5 is_stmt 0 view .LVU26
 165 0024 10F0010F 		tst	r0, #1
 166 0028 F4D1     		bne	.L11
 167              	.L10:
  83:user/w25q32.c ****     //printf("%d\r\n",retry);
  84:user/w25q32.c ****     FLASH_CS_High();    
 168              		.loc 1 84 5 is_stmt 1 view .LVU27
 169 002a 0122     		movs	r2, #1
 170 002c 1021     		movs	r1, #16
 171 002e 0248     		ldr	r0, .L13
 172              	.LVL10:
 173              		.loc 1 84 5 is_stmt 0 view .LVU28
 174 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 175              	.LVL11:
  85:user/w25q32.c **** }
 176              		.loc 1 85 1 view .LVU29
 177 0034 10BD     		pop	{r4, pc}
 178              	.LVL12:
 179              	.L14:
 180              		.loc 1 85 1 view .LVU30
 181 0036 00BF     		.align	2
 182              	.L13:
 183 0038 00000240 		.word	1073872896
 184              		.cfi_endproc
 185              	.LFE136:
 187              		.section	.text.FlashGet_Info,"ax",%progbits
 188              		.align	1
 189              		.global	FlashGet_Info
 190              		.syntax unified
 191              		.thumb
 192              		.thumb_func
 194              	FlashGet_Info:
 195              	.LVL13:
 196              	.LFB137:
  86:user/w25q32.c **** void FlashGet_Info(flashInfoTypedef * pFlashInfo)
  87:user/w25q32.c **** {
 197              		.loc 1 87 1 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 16
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 201              		.loc 1 87 1 is_stmt 0 view .LVU32
 202 0000 30B5     		push	{r4, r5, lr}
 203              	.LCFI7:
 204              		.cfi_def_cfa_offset 12
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 6


 205              		.cfi_offset 4, -12
 206              		.cfi_offset 5, -8
 207              		.cfi_offset 14, -4
 208 0002 87B0     		sub	sp, sp, #28
 209              	.LCFI8:
 210              		.cfi_def_cfa_offset 40
 211 0004 0446     		mov	r4, r0
  88:user/w25q32.c ****     uint8_t tx_data[7];
 212              		.loc 1 88 5 is_stmt 1 view .LVU33
  89:user/w25q32.c ****     uint8_t rx_data[7];
 213              		.loc 1 89 5 view .LVU34
  90:user/w25q32.c **** //	    FlashWait_Busy();
  91:user/w25q32.c ****     FLASH_CS_Low();    
 214              		.loc 1 91 5 view .LVU35
 215 0006 144D     		ldr	r5, .L17
 216 0008 0022     		movs	r2, #0
 217 000a 1021     		movs	r1, #16
 218 000c 2846     		mov	r0, r5
 219              	.LVL14:
 220              		.loc 1 91 5 is_stmt 0 view .LVU36
 221 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 222              	.LVL15:
 223              		.loc 1 91 19 is_stmt 1 view .LVU37
  92:user/w25q32.c ****     /* SPI2_Write(RDID_CMD);
  93:user/w25q32.c ****     pFlashInfo->ManufacturerID=SPI2_Read();
  94:user/w25q32.c ****     pFlashInfo->DeviceID[0]=SPI2_Read();
  95:user/w25q32.c ****     pFlashInfo->DeviceID[1]=SPI2_Read(); */
  96:user/w25q32.c **** 
  97:user/w25q32.c ****     
  98:user/w25q32.c ****     tx_data[0] = RDID_CMD;
 224              		.loc 1 98 5 view .LVU38
 225              		.loc 1 98 16 is_stmt 0 view .LVU39
 226 0012 9F23     		movs	r3, #159
 227 0014 8DF81030 		strb	r3, [sp, #16]
  99:user/w25q32.c ****     tx_data[1] = DUMMY_BYTE;
 228              		.loc 1 99 5 is_stmt 1 view .LVU40
 229              		.loc 1 99 16 is_stmt 0 view .LVU41
 230 0018 FF23     		movs	r3, #255
 231 001a 8DF81130 		strb	r3, [sp, #17]
 100:user/w25q32.c ****     tx_data[2] = DUMMY_BYTE;
 232              		.loc 1 100 5 is_stmt 1 view .LVU42
 233              		.loc 1 100 16 is_stmt 0 view .LVU43
 234 001e 8DF81230 		strb	r3, [sp, #18]
 101:user/w25q32.c ****     tx_data[3] = DUMMY_BYTE;
 235              		.loc 1 101 5 is_stmt 1 view .LVU44
 236              		.loc 1 101 16 is_stmt 0 view .LVU45
 237 0022 8DF81330 		strb	r3, [sp, #19]
 102:user/w25q32.c ****   
 103:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_data, rx_data, 4, 500);
 238              		.loc 1 103 5 is_stmt 1 view .LVU46
 239 0026 4FF4FA73 		mov	r3, #500
 240 002a 0093     		str	r3, [sp]
 241 002c 0423     		movs	r3, #4
 242 002e 02AA     		add	r2, sp, #8
 243 0030 04A9     		add	r1, sp, #16
 244 0032 0A48     		ldr	r0, .L17+4
 245 0034 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 7


 246              	.LVL16:
 104:user/w25q32.c ****     pFlashInfo->ManufacturerID = rx_data[1];
 247              		.loc 1 104 5 view .LVU47
 248              		.loc 1 104 41 is_stmt 0 view .LVU48
 249 0038 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 250              		.loc 1 104 32 view .LVU49
 251 003c 2370     		strb	r3, [r4]
 105:user/w25q32.c ****     pFlashInfo->DeviceID[0] = rx_data[2];
 252              		.loc 1 105 5 is_stmt 1 view .LVU50
 253              		.loc 1 105 38 is_stmt 0 view .LVU51
 254 003e 9DF80A30 		ldrb	r3, [sp, #10]	@ zero_extendqisi2
 255              		.loc 1 105 29 view .LVU52
 256 0042 6370     		strb	r3, [r4, #1]
 106:user/w25q32.c ****     pFlashInfo->DeviceID[1] = rx_data[3];
 257              		.loc 1 106 5 is_stmt 1 view .LVU53
 258              		.loc 1 106 38 is_stmt 0 view .LVU54
 259 0044 9DF80B30 		ldrb	r3, [sp, #11]	@ zero_extendqisi2
 260              		.loc 1 106 29 view .LVU55
 261 0048 A370     		strb	r3, [r4, #2]
 107:user/w25q32.c **** 
 108:user/w25q32.c ****     FLASH_CS_High();    
 262              		.loc 1 108 5 is_stmt 1 view .LVU56
 263 004a 0122     		movs	r2, #1
 264 004c 1021     		movs	r1, #16
 265 004e 2846     		mov	r0, r5
 266 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 267              	.LVL17:
 109:user/w25q32.c **** }
 268              		.loc 1 109 1 is_stmt 0 view .LVU57
 269 0054 07B0     		add	sp, sp, #28
 270              	.LCFI9:
 271              		.cfi_def_cfa_offset 12
 272              		@ sp needed
 273 0056 30BD     		pop	{r4, r5, pc}
 274              	.LVL18:
 275              	.L18:
 276              		.loc 1 109 1 view .LVU58
 277              		.align	2
 278              	.L17:
 279 0058 00000240 		.word	1073872896
 280 005c 00000000 		.word	hspi1
 281              		.cfi_endproc
 282              	.LFE137:
 284              		.section	.text.FlashGet_ElectronicInfo,"ax",%progbits
 285              		.align	1
 286              		.global	FlashGet_ElectronicInfo
 287              		.syntax unified
 288              		.thumb
 289              		.thumb_func
 291              	FlashGet_ElectronicInfo:
 292              	.LVL19:
 293              	.LFB138:
 110:user/w25q32.c **** void FlashGet_ElectronicInfo(flashInfoTypedef * pFlashInfo)
 111:user/w25q32.c **** {
 294              		.loc 1 111 1 is_stmt 1 view -0
 295              		.cfi_startproc
 296              		@ args = 0, pretend = 0, frame = 16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 8


 297              		@ frame_needed = 0, uses_anonymous_args = 0
 298              		.loc 1 111 1 is_stmt 0 view .LVU60
 299 0000 30B5     		push	{r4, r5, lr}
 300              	.LCFI10:
 301              		.cfi_def_cfa_offset 12
 302              		.cfi_offset 4, -12
 303              		.cfi_offset 5, -8
 304              		.cfi_offset 14, -4
 305 0002 87B0     		sub	sp, sp, #28
 306              	.LCFI11:
 307              		.cfi_def_cfa_offset 40
 308 0004 0446     		mov	r4, r0
 112:user/w25q32.c ****     // int i;
 113:user/w25q32.c ****     uint8_t tx_data[7];
 309              		.loc 1 113 5 is_stmt 1 view .LVU61
 114:user/w25q32.c ****     uint8_t rx_data[7];
 310              		.loc 1 114 5 view .LVU62
 115:user/w25q32.c **** 	// FlashWait_Busy();
 116:user/w25q32.c ****     FLASH_CS_Low();
 311              		.loc 1 116 5 view .LVU63
 312 0006 154D     		ldr	r5, .L21
 313 0008 0022     		movs	r2, #0
 314 000a 1021     		movs	r1, #16
 315 000c 2846     		mov	r0, r5
 316              	.LVL20:
 317              		.loc 1 116 5 is_stmt 0 view .LVU64
 318 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 319              	.LVL21:
 320              		.loc 1 116 19 is_stmt 1 view .LVU65
 117:user/w25q32.c ****    
 118:user/w25q32.c ****     /* SPI2_Write(REMS_CMD);
 119:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 120:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 121:user/w25q32.c ****     SPI2_Write(0x00);  //manufacturer's ID first
 122:user/w25q32.c ****     pFlashInfo->ManufacturerID=SPI2_Read();
 123:user/w25q32.c ****     pFlashInfo->DeviceID[0]=SPI2_Read(); */
 124:user/w25q32.c ****     
 125:user/w25q32.c ****     tx_data[0] = REMS_CMD;
 321              		.loc 1 125 5 view .LVU66
 322              		.loc 1 125 16 is_stmt 0 view .LVU67
 323 0012 9023     		movs	r3, #144
 324 0014 8DF81030 		strb	r3, [sp, #16]
 126:user/w25q32.c ****     tx_data[1] = DUMMY_BYTE;
 325              		.loc 1 126 5 is_stmt 1 view .LVU68
 326              		.loc 1 126 16 is_stmt 0 view .LVU69
 327 0018 FF23     		movs	r3, #255
 328 001a 8DF81130 		strb	r3, [sp, #17]
 127:user/w25q32.c ****     tx_data[2] = DUMMY_BYTE;
 329              		.loc 1 127 5 is_stmt 1 view .LVU70
 330              		.loc 1 127 16 is_stmt 0 view .LVU71
 331 001e 8DF81230 		strb	r3, [sp, #18]
 128:user/w25q32.c ****     tx_data[3] = 0x00;
 332              		.loc 1 128 5 is_stmt 1 view .LVU72
 333              		.loc 1 128 16 is_stmt 0 view .LVU73
 334 0022 0022     		movs	r2, #0
 335 0024 8DF81320 		strb	r2, [sp, #19]
 129:user/w25q32.c ****     tx_data[4] = DUMMY_BYTE;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 9


 336              		.loc 1 129 5 is_stmt 1 view .LVU74
 337              		.loc 1 129 16 is_stmt 0 view .LVU75
 338 0028 8DF81430 		strb	r3, [sp, #20]
 130:user/w25q32.c ****     tx_data[5] = DUMMY_BYTE;
 339              		.loc 1 130 5 is_stmt 1 view .LVU76
 340              		.loc 1 130 16 is_stmt 0 view .LVU77
 341 002c 8DF81530 		strb	r3, [sp, #21]
 131:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_data, rx_data, 6, 500);
 342              		.loc 1 131 5 is_stmt 1 view .LVU78
 343 0030 4FF4FA73 		mov	r3, #500
 344 0034 0093     		str	r3, [sp]
 345 0036 0623     		movs	r3, #6
 346 0038 02AA     		add	r2, sp, #8
 347 003a 04A9     		add	r1, sp, #16
 348 003c 0848     		ldr	r0, .L21+4
 349 003e FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 350              	.LVL22:
 132:user/w25q32.c ****     pFlashInfo->ManufacturerID=rx_data[4];
 351              		.loc 1 132 5 view .LVU79
 352              		.loc 1 132 39 is_stmt 0 view .LVU80
 353 0042 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 354              		.loc 1 132 31 view .LVU81
 355 0046 2370     		strb	r3, [r4]
 133:user/w25q32.c ****     pFlashInfo->DeviceID[0]=rx_data[5];
 356              		.loc 1 133 5 is_stmt 1 view .LVU82
 357              		.loc 1 133 36 is_stmt 0 view .LVU83
 358 0048 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 359              		.loc 1 133 28 view .LVU84
 360 004c 6370     		strb	r3, [r4, #1]
 134:user/w25q32.c ****     
 135:user/w25q32.c ****     FLASH_CS_High();
 361              		.loc 1 135 5 is_stmt 1 view .LVU85
 362 004e 0122     		movs	r2, #1
 363 0050 1021     		movs	r1, #16
 364 0052 2846     		mov	r0, r5
 365 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 366              	.LVL23:
 136:user/w25q32.c **** }
 367              		.loc 1 136 1 is_stmt 0 view .LVU86
 368 0058 07B0     		add	sp, sp, #28
 369              	.LCFI12:
 370              		.cfi_def_cfa_offset 12
 371              		@ sp needed
 372 005a 30BD     		pop	{r4, r5, pc}
 373              	.LVL24:
 374              	.L22:
 375              		.loc 1 136 1 view .LVU87
 376              		.align	2
 377              	.L21:
 378 005c 00000240 		.word	1073872896
 379 0060 00000000 		.word	hspi1
 380              		.cfi_endproc
 381              	.LFE138:
 383              		.section	.text.FlashEnter_DeepPowerDown,"ax",%progbits
 384              		.align	1
 385              		.global	FlashEnter_DeepPowerDown
 386              		.syntax unified
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 10


 387              		.thumb
 388              		.thumb_func
 390              	FlashEnter_DeepPowerDown:
 391              	.LFB139:
 137:user/w25q32.c **** void FlashEnter_DeepPowerDown(void)
 138:user/w25q32.c **** {
 392              		.loc 1 138 1 is_stmt 1 view -0
 393              		.cfi_startproc
 394              		@ args = 0, pretend = 0, frame = 0
 395              		@ frame_needed = 0, uses_anonymous_args = 0
 396 0000 10B5     		push	{r4, lr}
 397              	.LCFI13:
 398              		.cfi_def_cfa_offset 8
 399              		.cfi_offset 4, -8
 400              		.cfi_offset 14, -4
 139:user/w25q32.c ****     FLASH_CS_Low();
 401              		.loc 1 139 5 view .LVU89
 402 0002 074C     		ldr	r4, .L25
 403 0004 0022     		movs	r2, #0
 404 0006 1021     		movs	r1, #16
 405 0008 2046     		mov	r0, r4
 406 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 407              	.LVL25:
 408              		.loc 1 139 19 view .LVU90
 140:user/w25q32.c ****     SPI2_Write(DP_CMD);   
 409              		.loc 1 140 5 view .LVU91
 410 000e B920     		movs	r0, #185
 411 0010 FFF7FEFF 		bl	SPI2_Write
 412              	.LVL26:
 141:user/w25q32.c ****     FLASH_CS_High();    
 413              		.loc 1 141 5 view .LVU92
 414 0014 0122     		movs	r2, #1
 415 0016 1021     		movs	r1, #16
 416 0018 2046     		mov	r0, r4
 417 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 418              	.LVL27:
 142:user/w25q32.c **** }
 419              		.loc 1 142 1 is_stmt 0 view .LVU93
 420 001e 10BD     		pop	{r4, pc}
 421              	.L26:
 422              		.align	2
 423              	.L25:
 424 0020 00000240 		.word	1073872896
 425              		.cfi_endproc
 426              	.LFE139:
 428              		.section	.text.FlashReleaseFrom_DeepPowerDown,"ax",%progbits
 429              		.align	1
 430              		.global	FlashReleaseFrom_DeepPowerDown
 431              		.syntax unified
 432              		.thumb
 433              		.thumb_func
 435              	FlashReleaseFrom_DeepPowerDown:
 436              	.LFB140:
 143:user/w25q32.c **** void FlashReleaseFrom_DeepPowerDown(void)
 144:user/w25q32.c **** {
 437              		.loc 1 144 1 is_stmt 1 view -0
 438              		.cfi_startproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 11


 439              		@ args = 0, pretend = 0, frame = 0
 440              		@ frame_needed = 0, uses_anonymous_args = 0
 441 0000 10B5     		push	{r4, lr}
 442              	.LCFI14:
 443              		.cfi_def_cfa_offset 8
 444              		.cfi_offset 4, -8
 445              		.cfi_offset 14, -4
 145:user/w25q32.c ****     FLASH_CS_Low();
 446              		.loc 1 145 5 view .LVU95
 447 0002 074C     		ldr	r4, .L29
 448 0004 0022     		movs	r2, #0
 449 0006 1021     		movs	r1, #16
 450 0008 2046     		mov	r0, r4
 451 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 452              	.LVL28:
 453              		.loc 1 145 19 view .LVU96
 146:user/w25q32.c ****     SPI2_Write(RDP_CMD);   
 454              		.loc 1 146 5 view .LVU97
 455 000e AB20     		movs	r0, #171
 456 0010 FFF7FEFF 		bl	SPI2_Write
 457              	.LVL29:
 147:user/w25q32.c ****     FLASH_CS_High();    
 458              		.loc 1 147 5 view .LVU98
 459 0014 0122     		movs	r2, #1
 460 0016 1021     		movs	r1, #16
 461 0018 2046     		mov	r0, r4
 462 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 463              	.LVL30:
 148:user/w25q32.c **** }
 464              		.loc 1 148 1 is_stmt 0 view .LVU99
 465 001e 10BD     		pop	{r4, pc}
 466              	.L30:
 467              		.align	2
 468              	.L29:
 469 0020 00000240 		.word	1073872896
 470              		.cfi_endproc
 471              	.LFE140:
 473              		.section	.text.FlashReleaseFrom_DeepPowerDownE,"ax",%progbits
 474              		.align	1
 475              		.global	FlashReleaseFrom_DeepPowerDownE
 476              		.syntax unified
 477              		.thumb
 478              		.thumb_func
 480              	FlashReleaseFrom_DeepPowerDownE:
 481              	.LFB141:
 149:user/w25q32.c **** uint8_t FlashReleaseFrom_DeepPowerDownE(void)
 150:user/w25q32.c **** {   
 482              		.loc 1 150 1 is_stmt 1 view -0
 483              		.cfi_startproc
 484              		@ args = 0, pretend = 0, frame = 0
 485              		@ frame_needed = 0, uses_anonymous_args = 0
 486 0000 38B5     		push	{r3, r4, r5, lr}
 487              	.LCFI15:
 488              		.cfi_def_cfa_offset 16
 489              		.cfi_offset 3, -16
 490              		.cfi_offset 4, -12
 491              		.cfi_offset 5, -8
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 12


 492              		.cfi_offset 14, -4
 151:user/w25q32.c ****     uint8_t ElectronicSignature;
 493              		.loc 1 151 5 view .LVU101
 152:user/w25q32.c ****     FLASH_CS_Low();
 494              		.loc 1 152 5 view .LVU102
 495 0002 0E4D     		ldr	r5, .L33
 496 0004 0022     		movs	r2, #0
 497 0006 1021     		movs	r1, #16
 498 0008 2846     		mov	r0, r5
 499 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 500              	.LVL31:
 501              		.loc 1 152 19 view .LVU103
 153:user/w25q32.c ****     SPI2_Write(RES_CMD);
 502              		.loc 1 153 5 view .LVU104
 503 000e AB20     		movs	r0, #171
 504 0010 FFF7FEFF 		bl	SPI2_Write
 505              	.LVL32:
 154:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 506              		.loc 1 154 5 view .LVU105
 507 0014 FF20     		movs	r0, #255
 508 0016 FFF7FEFF 		bl	SPI2_Write
 509              	.LVL33:
 155:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 510              		.loc 1 155 5 view .LVU106
 511 001a FF20     		movs	r0, #255
 512 001c FFF7FEFF 		bl	SPI2_Write
 513              	.LVL34:
 156:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 514              		.loc 1 156 5 view .LVU107
 515 0020 FF20     		movs	r0, #255
 516 0022 FFF7FEFF 		bl	SPI2_Write
 517              	.LVL35:
 157:user/w25q32.c ****     ElectronicSignature=SPI2_Read();
 518              		.loc 1 157 5 view .LVU108
 519              		.loc 1 157 25 is_stmt 0 view .LVU109
 520 0026 FFF7FEFF 		bl	SPI2_Read
 521              	.LVL36:
 522 002a 0446     		mov	r4, r0
 523              	.LVL37:
 158:user/w25q32.c ****     FLASH_CS_High();    
 524              		.loc 1 158 5 is_stmt 1 view .LVU110
 525 002c 0122     		movs	r2, #1
 526 002e 1021     		movs	r1, #16
 527 0030 2846     		mov	r0, r5
 528 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 529              	.LVL38:
 159:user/w25q32.c ****     return ElectronicSignature;
 530              		.loc 1 159 5 view .LVU111
 160:user/w25q32.c **** }
 531              		.loc 1 160 1 is_stmt 0 view .LVU112
 532 0036 2046     		mov	r0, r4
 533 0038 38BD     		pop	{r3, r4, r5, pc}
 534              	.LVL39:
 535              	.L34:
 536              		.loc 1 160 1 view .LVU113
 537 003a 00BF     		.align	2
 538              	.L33:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 13


 539 003c 00000240 		.word	1073872896
 540              		.cfi_endproc
 541              	.LFE141:
 543              		.section	.text.FlashWriteEnable,"ax",%progbits
 544              		.align	1
 545              		.global	FlashWriteEnable
 546              		.syntax unified
 547              		.thumb
 548              		.thumb_func
 550              	FlashWriteEnable:
 551              	.LFB142:
 161:user/w25q32.c **** void FlashWriteEnable(void)
 162:user/w25q32.c **** {
 552              		.loc 1 162 1 is_stmt 1 view -0
 553              		.cfi_startproc
 554              		@ args = 0, pretend = 0, frame = 0
 555              		@ frame_needed = 0, uses_anonymous_args = 0
 556 0000 10B5     		push	{r4, lr}
 557              	.LCFI16:
 558              		.cfi_def_cfa_offset 8
 559              		.cfi_offset 4, -8
 560              		.cfi_offset 14, -4
 163:user/w25q32.c ****     FLASH_CS_Low();
 561              		.loc 1 163 5 view .LVU115
 562 0002 074C     		ldr	r4, .L37
 563 0004 0022     		movs	r2, #0
 564 0006 1021     		movs	r1, #16
 565 0008 2046     		mov	r0, r4
 566 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 567              	.LVL40:
 568              		.loc 1 163 19 view .LVU116
 164:user/w25q32.c ****     SPI2_Write(WREN_CMD);   
 569              		.loc 1 164 5 view .LVU117
 570 000e 0620     		movs	r0, #6
 571 0010 FFF7FEFF 		bl	SPI2_Write
 572              	.LVL41:
 165:user/w25q32.c ****     FLASH_CS_High();    
 573              		.loc 1 165 5 view .LVU118
 574 0014 0122     		movs	r2, #1
 575 0016 1021     		movs	r1, #16
 576 0018 2046     		mov	r0, r4
 577 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 578              	.LVL42:
 166:user/w25q32.c **** }
 579              		.loc 1 166 1 is_stmt 0 view .LVU119
 580 001e 10BD     		pop	{r4, pc}
 581              	.L38:
 582              		.align	2
 583              	.L37:
 584 0020 00000240 		.word	1073872896
 585              		.cfi_endproc
 586              	.LFE142:
 588              		.section	.text.FlashWriteDisable,"ax",%progbits
 589              		.align	1
 590              		.global	FlashWriteDisable
 591              		.syntax unified
 592              		.thumb
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 14


 593              		.thumb_func
 595              	FlashWriteDisable:
 596              	.LFB143:
 167:user/w25q32.c **** void FlashWriteDisable(void)
 168:user/w25q32.c **** {
 597              		.loc 1 168 1 is_stmt 1 view -0
 598              		.cfi_startproc
 599              		@ args = 0, pretend = 0, frame = 0
 600              		@ frame_needed = 0, uses_anonymous_args = 0
 601 0000 10B5     		push	{r4, lr}
 602              	.LCFI17:
 603              		.cfi_def_cfa_offset 8
 604              		.cfi_offset 4, -8
 605              		.cfi_offset 14, -4
 169:user/w25q32.c ****     FLASH_CS_Low();
 606              		.loc 1 169 5 view .LVU121
 607 0002 074C     		ldr	r4, .L41
 608 0004 0022     		movs	r2, #0
 609 0006 1021     		movs	r1, #16
 610 0008 2046     		mov	r0, r4
 611 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 612              	.LVL43:
 613              		.loc 1 169 19 view .LVU122
 170:user/w25q32.c ****     SPI2_Write(WRDI_CMD);   
 614              		.loc 1 170 5 view .LVU123
 615 000e 0420     		movs	r0, #4
 616 0010 FFF7FEFF 		bl	SPI2_Write
 617              	.LVL44:
 171:user/w25q32.c ****     FLASH_CS_High();    
 618              		.loc 1 171 5 view .LVU124
 619 0014 0122     		movs	r2, #1
 620 0016 1021     		movs	r1, #16
 621 0018 2046     		mov	r0, r4
 622 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 623              	.LVL45:
 172:user/w25q32.c **** }
 624              		.loc 1 172 1 is_stmt 0 view .LVU125
 625 001e 10BD     		pop	{r4, pc}
 626              	.L42:
 627              		.align	2
 628              	.L41:
 629 0020 00000240 		.word	1073872896
 630              		.cfi_endproc
 631              	.LFE143:
 633              		.section	.text.FlashWrite_StaRegister,"ax",%progbits
 634              		.align	1
 635              		.global	FlashWrite_StaRegister
 636              		.syntax unified
 637              		.thumb
 638              		.thumb_func
 640              	FlashWrite_StaRegister:
 641              	.LVL46:
 642              	.LFB144:
 173:user/w25q32.c **** void FlashWrite_StaRegister(uint8_t flashSta)
 174:user/w25q32.c **** {
 643              		.loc 1 174 1 is_stmt 1 view -0
 644              		.cfi_startproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 15


 645              		@ args = 0, pretend = 0, frame = 0
 646              		@ frame_needed = 0, uses_anonymous_args = 0
 647              		.loc 1 174 1 is_stmt 0 view .LVU127
 648 0000 38B5     		push	{r3, r4, r5, lr}
 649              	.LCFI18:
 650              		.cfi_def_cfa_offset 16
 651              		.cfi_offset 3, -16
 652              		.cfi_offset 4, -12
 653              		.cfi_offset 5, -8
 654              		.cfi_offset 14, -4
 655 0002 0446     		mov	r4, r0
 175:user/w25q32.c ****     FLASH_CS_Low();
 656              		.loc 1 175 5 is_stmt 1 view .LVU128
 657 0004 084D     		ldr	r5, .L45
 658 0006 0022     		movs	r2, #0
 659 0008 1021     		movs	r1, #16
 660 000a 2846     		mov	r0, r5
 661              	.LVL47:
 662              		.loc 1 175 5 is_stmt 0 view .LVU129
 663 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 664              	.LVL48:
 665              		.loc 1 175 19 is_stmt 1 view .LVU130
 176:user/w25q32.c ****     SPI2_Write(WRSR_CMD); 
 666              		.loc 1 176 5 view .LVU131
 667 0010 0120     		movs	r0, #1
 668 0012 FFF7FEFF 		bl	SPI2_Write
 669              	.LVL49:
 177:user/w25q32.c ****     SPI2_Write(flashSta); 
 670              		.loc 1 177 5 view .LVU132
 671 0016 2046     		mov	r0, r4
 672 0018 FFF7FEFF 		bl	SPI2_Write
 673              	.LVL50:
 178:user/w25q32.c ****     FLASH_CS_High();    
 674              		.loc 1 178 5 view .LVU133
 675 001c 0122     		movs	r2, #1
 676 001e 1021     		movs	r1, #16
 677 0020 2846     		mov	r0, r5
 678 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 679              	.LVL51:
 179:user/w25q32.c **** }
 680              		.loc 1 179 1 is_stmt 0 view .LVU134
 681 0026 38BD     		pop	{r3, r4, r5, pc}
 682              	.L46:
 683              		.align	2
 684              	.L45:
 685 0028 00000240 		.word	1073872896
 686              		.cfi_endproc
 687              	.LFE144:
 689              		.section	.text.FlashPage_Write,"ax",%progbits
 690              		.align	1
 691              		.global	FlashPage_Write
 692              		.syntax unified
 693              		.thumb
 694              		.thumb_func
 696              	FlashPage_Write:
 697              	.LVL52:
 698              	.LFB145:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 16


 180:user/w25q32.c **** /*---- F L A S H   P A G E _   W R I T E ----
 181:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 182:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩpageAddr:“≥ÔøΩÔøΩ÷∑ÔøΩÔøΩÔøΩ⁄∫ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩŸ≥ÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩ–°
 183:user/w25q32.c ****           *ptr:     ÷∏ÔøΩÔøΩ“™–¥ÔøΩÔøΩÔøΩÔøΩÔøΩ›µÔøΩÔøΩÔøΩ÷∑ÔøΩÔøΩ
 184:user/w25q32.c ****           pageSize: “≥ÔøΩƒ¥ÔøΩ–°ÔøΩÔøΩ“ªÔøΩÔøΩÔøΩÔøΩ FLASH_PAGE_SIZE 
 185:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 186:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ⁄¥ÔøΩflash ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩƒµÔøΩ÷∑ŒªŒ™24bit ÔøΩÔøΩ
 187:user/w25q32.c ****           ÔøΩÔøΩÔøΩ–°ÔøΩÔøΩ“≥ÔøΩÔøΩŒßÔøΩÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩÔøΩÔøΩ‘≠ÔøΩÔøΩÔøΩÊ¥¢ÔøΩÔøΩÔøΩÔøΩÔøΩ›≤ÔøΩÔø
 188:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ13:52:53-------
 189:user/w25q32.c **** void FlashPage_Write(uint16_t pageAddr,uint8_t *ptr,uint32_t pageSize)
 190:user/w25q32.c **** {
 699              		.loc 1 190 1 is_stmt 1 view -0
 700              		.cfi_startproc
 701              		@ args = 0, pretend = 0, frame = 0
 702              		@ frame_needed = 0, uses_anonymous_args = 0
 703              		.loc 1 190 1 is_stmt 0 view .LVU136
 704 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 705              	.LCFI19:
 706              		.cfi_def_cfa_offset 24
 707              		.cfi_offset 3, -24
 708              		.cfi_offset 4, -20
 709              		.cfi_offset 5, -16
 710              		.cfi_offset 6, -12
 711              		.cfi_offset 7, -8
 712              		.cfi_offset 14, -4
 713 0002 0546     		mov	r5, r0
 714 0004 0C46     		mov	r4, r1
 715 0006 1646     		mov	r6, r2
 191:user/w25q32.c ****     uint32_t addr,i;
 716              		.loc 1 191 5 is_stmt 1 view .LVU137
 192:user/w25q32.c **** //	    addr=pageAddr*FLASH_PAGE_SIZE;
 193:user/w25q32.c ****     addr=((uint32_t)pageAddr)<<8;  
 717              		.loc 1 193 5 view .LVU138
 718              		.loc 1 193 9 is_stmt 0 view .LVU139
 719 0008 0702     		lsls	r7, r0, #8
 720              	.LVL53:
 194:user/w25q32.c ****     FlashWait_Busy();
 721              		.loc 1 194 5 is_stmt 1 view .LVU140
 722 000a FFF7FEFF 		bl	FlashWait_Busy
 723              	.LVL54:
 195:user/w25q32.c ****     FlashWriteEnable();
 724              		.loc 1 195 5 view .LVU141
 725 000e FFF7FEFF 		bl	FlashWriteEnable
 726              	.LVL55:
 196:user/w25q32.c ****     FLASH_CS_Low();
 727              		.loc 1 196 5 view .LVU142
 728 0012 0022     		movs	r2, #0
 729 0014 1021     		movs	r1, #16
 730 0016 0F48     		ldr	r0, .L51
 731 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 732              	.LVL56:
 733              		.loc 1 196 19 view .LVU143
 197:user/w25q32.c ****     SPI2_Write(PP_CMD); 
 734              		.loc 1 197 5 view .LVU144
 735 001c 0220     		movs	r0, #2
 736 001e FFF7FEFF 		bl	SPI2_Write
 737              	.LVL57:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 17


 198:user/w25q32.c ****     SPI2_Write(addr>>16);
 738              		.loc 1 198 5 view .LVU145
 739 0022 380C     		lsrs	r0, r7, #16
 740 0024 FFF7FEFF 		bl	SPI2_Write
 741              	.LVL58:
 199:user/w25q32.c ****     SPI2_Write(addr>>8);
 742              		.loc 1 199 5 view .LVU146
 743 0028 E8B2     		uxtb	r0, r5
 744 002a FFF7FEFF 		bl	SPI2_Write
 745              	.LVL59:
 200:user/w25q32.c ****     SPI2_Write(addr); 
 746              		.loc 1 200 5 view .LVU147
 747 002e 0020     		movs	r0, #0
 748 0030 FFF7FEFF 		bl	SPI2_Write
 749              	.LVL60:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 750              		.loc 1 201 5 view .LVU148
 751              		.loc 1 201 10 is_stmt 0 view .LVU149
 752 0034 0025     		movs	r5, #0
 753              		.loc 1 201 5 view .LVU150
 754 0036 04E0     		b	.L48
 755              	.LVL61:
 756              	.L49:
 202:user/w25q32.c ****         SPI2_Write(*ptr++); 
 757              		.loc 1 202 9 is_stmt 1 discriminator 3 view .LVU151
 758              		.loc 1 202 9 is_stmt 0 discriminator 3 view .LVU152
 759 0038 14F8010B 		ldrb	r0, [r4], #1	@ zero_extendqisi2
 760              	.LVL62:
 761              		.loc 1 202 9 discriminator 3 view .LVU153
 762 003c FFF7FEFF 		bl	SPI2_Write
 763              	.LVL63:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 764              		.loc 1 201 24 is_stmt 1 discriminator 3 view .LVU154
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 765              		.loc 1 201 25 is_stmt 0 discriminator 3 view .LVU155
 766 0040 0135     		adds	r5, r5, #1
 767              	.LVL64:
 768              	.L48:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 769              		.loc 1 201 13 is_stmt 1 discriminator 1 view .LVU156
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 770              		.loc 1 201 5 is_stmt 0 discriminator 1 view .LVU157
 771 0042 B542     		cmp	r5, r6
 772 0044 F8D3     		bcc	.L49
 203:user/w25q32.c ****     FLASH_CS_High();    
 773              		.loc 1 203 5 is_stmt 1 view .LVU158
 774 0046 0122     		movs	r2, #1
 775 0048 1021     		movs	r1, #16
 776 004a 0248     		ldr	r0, .L51
 777 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 778              	.LVL65:
 204:user/w25q32.c **** }
 779              		.loc 1 204 1 is_stmt 0 view .LVU159
 780 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 781              	.LVL66:
 782              	.L52:
 783              		.loc 1 204 1 view .LVU160
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 18


 784 0052 00BF     		.align	2
 785              	.L51:
 786 0054 00000240 		.word	1073872896
 787              		.cfi_endproc
 788              	.LFE145:
 790              		.section	.text.FlashChip_Erase,"ax",%progbits
 791              		.align	1
 792              		.global	FlashChip_Erase
 793              		.syntax unified
 794              		.thumb
 795              		.thumb_func
 797              	FlashChip_Erase:
 798              	.LFB146:
 205:user/w25q32.c **** void FlashChip_Erase(void)
 206:user/w25q32.c **** {
 799              		.loc 1 206 1 is_stmt 1 view -0
 800              		.cfi_startproc
 801              		@ args = 0, pretend = 0, frame = 0
 802              		@ frame_needed = 0, uses_anonymous_args = 0
 803 0000 10B5     		push	{r4, lr}
 804              	.LCFI20:
 805              		.cfi_def_cfa_offset 8
 806              		.cfi_offset 4, -8
 807              		.cfi_offset 14, -4
 207:user/w25q32.c ****     FlashWait_Busy();
 808              		.loc 1 207 5 view .LVU162
 809 0002 FFF7FEFF 		bl	FlashWait_Busy
 810              	.LVL67:
 208:user/w25q32.c ****     FlashWriteEnable();    
 811              		.loc 1 208 5 view .LVU163
 812 0006 FFF7FEFF 		bl	FlashWriteEnable
 813              	.LVL68:
 209:user/w25q32.c ****     FLASH_CS_Low();
 814              		.loc 1 209 5 view .LVU164
 815 000a 074C     		ldr	r4, .L55
 816 000c 0022     		movs	r2, #0
 817 000e 1021     		movs	r1, #16
 818 0010 2046     		mov	r0, r4
 819 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 820              	.LVL69:
 821              		.loc 1 209 19 view .LVU165
 210:user/w25q32.c ****     SPI2_Write(CE_CMD);     
 822              		.loc 1 210 5 view .LVU166
 823 0016 6020     		movs	r0, #96
 824 0018 FFF7FEFF 		bl	SPI2_Write
 825              	.LVL70:
 211:user/w25q32.c ****     FLASH_CS_High();    
 826              		.loc 1 211 5 view .LVU167
 827 001c 0122     		movs	r2, #1
 828 001e 1021     		movs	r1, #16
 829 0020 2046     		mov	r0, r4
 830 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 831              	.LVL71:
 212:user/w25q32.c **** }
 832              		.loc 1 212 1 is_stmt 0 view .LVU168
 833 0026 10BD     		pop	{r4, pc}
 834              	.L56:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 19


 835              		.align	2
 836              	.L55:
 837 0028 00000240 		.word	1073872896
 838              		.cfi_endproc
 839              	.LFE146:
 841              		.section	.text.SpiFlash_Init,"ax",%progbits
 842              		.align	1
 843              		.global	SpiFlash_Init
 844              		.syntax unified
 845              		.thumb
 846              		.thumb_func
 848              	SpiFlash_Init:
 849              	.LFB135:
  28:user/w25q32.c ****     flashInfoTypedef flashInfo;   
 850              		.loc 1 28 1 is_stmt 1 view -0
 851              		.cfi_startproc
 852              		@ args = 0, pretend = 0, frame = 8
 853              		@ frame_needed = 0, uses_anonymous_args = 0
 854 0000 00B5     		push	{lr}
 855              	.LCFI21:
 856              		.cfi_def_cfa_offset 4
 857              		.cfi_offset 14, -4
 858 0002 83B0     		sub	sp, sp, #12
 859              	.LCFI22:
 860              		.cfi_def_cfa_offset 16
  29:user/w25q32.c ****     //WP
 861              		.loc 1 29 5 view .LVU170
  39:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
 862              		.loc 1 39 5 view .LVU171
 863 0004 01A8     		add	r0, sp, #4
 864 0006 FFF7FEFF 		bl	FlashGet_ElectronicInfo
 865              	.LVL72:
  46:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
 866              		.loc 1 46 5 view .LVU172
 867 000a 01A8     		add	r0, sp, #4
 868 000c FFF7FEFF 		bl	FlashGet_Info
 869              	.LVL73:
  61:user/w25q32.c **** 
 870              		.loc 1 61 5 view .LVU173
 871 0010 FFF7FEFF 		bl	FlashChip_Erase
 872              	.LVL74:
  68:user/w25q32.c **** 
 873              		.loc 1 68 1 is_stmt 0 view .LVU174
 874 0014 03B0     		add	sp, sp, #12
 875              	.LCFI23:
 876              		.cfi_def_cfa_offset 4
 877              		@ sp needed
 878 0016 5DF804FB 		ldr	pc, [sp], #4
 879              		.cfi_endproc
 880              	.LFE135:
 882              		.section	.text.FlashBlock_Erase,"ax",%progbits
 883              		.align	1
 884              		.global	FlashBlock_Erase
 885              		.syntax unified
 886              		.thumb
 887              		.thumb_func
 889              	FlashBlock_Erase:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 20


 890              	.LVL75:
 891              	.LFB147:
 213:user/w25q32.c **** /*---- F L A S H   B L O C K _   E R A S E ----
 214:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 215:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩblock: 0~256
 216:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 217:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 218:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ14:43:05-------
 219:user/w25q32.c **** void FlashBlock_Erase(uint8_t blockAddr)
 220:user/w25q32.c **** {
 892              		.loc 1 220 1 is_stmt 1 view -0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 0
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896              		.loc 1 220 1 is_stmt 0 view .LVU176
 897 0000 38B5     		push	{r3, r4, r5, lr}
 898              	.LCFI24:
 899              		.cfi_def_cfa_offset 16
 900              		.cfi_offset 3, -16
 901              		.cfi_offset 4, -12
 902              		.cfi_offset 5, -8
 903              		.cfi_offset 14, -4
 904 0002 0446     		mov	r4, r0
 221:user/w25q32.c ****     uint32_t addr;//,i;
 905              		.loc 1 221 5 is_stmt 1 view .LVU177
 222:user/w25q32.c **** //	    addr=blockAddr*16*4096;  //√øÔøΩÔøΩblockÔøΩÔøΩ16ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ√øÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
 223:user/w25q32.c ****     
 224:user/w25q32.c **** 
 225:user/w25q32.c ****     addr=((uint32_t)blockAddr)<<16;
 906              		.loc 1 225 5 view .LVU178
 226:user/w25q32.c ****     FlashWait_Busy();
 907              		.loc 1 226 5 view .LVU179
 908 0004 FFF7FEFF 		bl	FlashWait_Busy
 909              	.LVL76:
 227:user/w25q32.c ****     FlashWriteEnable();
 910              		.loc 1 227 5 view .LVU180
 911 0008 FFF7FEFF 		bl	FlashWriteEnable
 912              	.LVL77:
 228:user/w25q32.c ****     FLASH_CS_Low();
 913              		.loc 1 228 5 view .LVU181
 914 000c 0B4D     		ldr	r5, .L61
 915 000e 0022     		movs	r2, #0
 916 0010 1021     		movs	r1, #16
 917 0012 2846     		mov	r0, r5
 918 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 919              	.LVL78:
 920              		.loc 1 228 19 view .LVU182
 229:user/w25q32.c ****     SPI2_Write(BE_CMD); 
 921              		.loc 1 229 5 view .LVU183
 922 0018 5220     		movs	r0, #82
 923 001a FFF7FEFF 		bl	SPI2_Write
 924              	.LVL79:
 230:user/w25q32.c ****     SPI2_Write(addr>>16);
 925              		.loc 1 230 5 view .LVU184
 926 001e 2046     		mov	r0, r4
 927 0020 FFF7FEFF 		bl	SPI2_Write
 928              	.LVL80:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 21


 231:user/w25q32.c ****     SPI2_Write(addr>>8);
 929              		.loc 1 231 5 view .LVU185
 930 0024 0020     		movs	r0, #0
 931 0026 FFF7FEFF 		bl	SPI2_Write
 932              	.LVL81:
 232:user/w25q32.c ****     SPI2_Write(addr); 
 933              		.loc 1 232 5 view .LVU186
 934 002a 0020     		movs	r0, #0
 935 002c FFF7FEFF 		bl	SPI2_Write
 936              	.LVL82:
 233:user/w25q32.c ****     FLASH_CS_High();    
 937              		.loc 1 233 5 view .LVU187
 938 0030 0122     		movs	r2, #1
 939 0032 1021     		movs	r1, #16
 940 0034 2846     		mov	r0, r5
 941 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 942              	.LVL83:
 234:user/w25q32.c **** }
 943              		.loc 1 234 1 is_stmt 0 view .LVU188
 944 003a 38BD     		pop	{r3, r4, r5, pc}
 945              	.L62:
 946              		.align	2
 947              	.L61:
 948 003c 00000240 		.word	1073872896
 949              		.cfi_endproc
 950              	.LFE147:
 952              		.section	.text.FlashSector_Erase,"ax",%progbits
 953              		.align	1
 954              		.global	FlashSector_Erase
 955              		.syntax unified
 956              		.thumb
 957              		.thumb_func
 959              	FlashSector_Erase:
 960              	.LVL84:
 961              	.LFB148:
 235:user/w25q32.c **** /*---- F L A S H   S E C T O R _   E R A S E ----
 236:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 237:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩsectorAddr: 0~4096
 238:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 239:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 240:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ14:45:28-------
 241:user/w25q32.c **** void FlashSector_Erase(uint16_t sectorAddr)
 242:user/w25q32.c **** {
 962              		.loc 1 242 1 is_stmt 1 view -0
 963              		.cfi_startproc
 964              		@ args = 0, pretend = 0, frame = 0
 965              		@ frame_needed = 0, uses_anonymous_args = 0
 966              		.loc 1 242 1 is_stmt 0 view .LVU190
 967 0000 38B5     		push	{r3, r4, r5, lr}
 968              	.LCFI25:
 969              		.cfi_def_cfa_offset 16
 970              		.cfi_offset 3, -16
 971              		.cfi_offset 4, -12
 972              		.cfi_offset 5, -8
 973              		.cfi_offset 14, -4
 243:user/w25q32.c ****     uint32_t addr;//,i;
 974              		.loc 1 243 5 is_stmt 1 view .LVU191
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 22


 244:user/w25q32.c ****     addr=((uint32_t)sectorAddr)<<12;
 975              		.loc 1 244 5 view .LVU192
 976              		.loc 1 244 9 is_stmt 0 view .LVU193
 977 0002 0403     		lsls	r4, r0, #12
 978              	.LVL85:
 245:user/w25q32.c ****     FlashWait_Busy();
 979              		.loc 1 245 5 is_stmt 1 view .LVU194
 980 0004 FFF7FEFF 		bl	FlashWait_Busy
 981              	.LVL86:
 246:user/w25q32.c ****     FlashWriteEnable();
 982              		.loc 1 246 5 view .LVU195
 983 0008 FFF7FEFF 		bl	FlashWriteEnable
 984              	.LVL87:
 247:user/w25q32.c ****     FLASH_CS_Low();
 985              		.loc 1 247 5 view .LVU196
 986 000c 0D4D     		ldr	r5, .L65
 987 000e 0022     		movs	r2, #0
 988 0010 1021     		movs	r1, #16
 989 0012 2846     		mov	r0, r5
 990 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 991              	.LVL88:
 992              		.loc 1 247 19 view .LVU197
 248:user/w25q32.c ****     SPI2_Write(SE_CMD); 
 993              		.loc 1 248 5 view .LVU198
 994 0018 2020     		movs	r0, #32
 995 001a FFF7FEFF 		bl	SPI2_Write
 996              	.LVL89:
 249:user/w25q32.c ****     SPI2_Write(addr>>16);
 997              		.loc 1 249 5 view .LVU199
 998 001e C4F30740 		ubfx	r0, r4, #16, #8
 999 0022 FFF7FEFF 		bl	SPI2_Write
 1000              	.LVL90:
 250:user/w25q32.c ****     SPI2_Write(addr>>8);
 1001              		.loc 1 250 5 view .LVU200
 1002              		.loc 1 250 20 is_stmt 0 view .LVU201
 1003 0026 200A     		lsrs	r0, r4, #8
 1004              		.loc 1 250 5 view .LVU202
 1005 0028 00F0F000 		and	r0, r0, #240
 1006 002c FFF7FEFF 		bl	SPI2_Write
 1007              	.LVL91:
 251:user/w25q32.c ****     SPI2_Write(addr); 
 1008              		.loc 1 251 5 is_stmt 1 view .LVU203
 1009 0030 0020     		movs	r0, #0
 1010 0032 FFF7FEFF 		bl	SPI2_Write
 1011              	.LVL92:
 252:user/w25q32.c ****     FLASH_CS_High();    
 1012              		.loc 1 252 5 view .LVU204
 1013 0036 0122     		movs	r2, #1
 1014 0038 1021     		movs	r1, #16
 1015 003a 2846     		mov	r0, r5
 1016 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1017              	.LVL93:
 253:user/w25q32.c **** }
 1018              		.loc 1 253 1 is_stmt 0 view .LVU205
 1019 0040 38BD     		pop	{r3, r4, r5, pc}
 1020              	.LVL94:
 1021              	.L66:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 23


 1022              		.loc 1 253 1 view .LVU206
 1023 0042 00BF     		.align	2
 1024              	.L65:
 1025 0044 00000240 		.word	1073872896
 1026              		.cfi_endproc
 1027              	.LFE148:
 1029              		.section	.text.FlashRead,"ax",%progbits
 1030              		.align	1
 1031              		.global	FlashRead
 1032              		.syntax unified
 1033              		.thumb
 1034              		.thumb_func
 1036              	FlashRead:
 1037              	.LVL95:
 1038              	.LFB149:
 254:user/w25q32.c **** void FlashRead(uint32_t addr,uint8_t *ptr,uint32_t len)
 255:user/w25q32.c **** {
 1039              		.loc 1 255 1 is_stmt 1 view -0
 1040              		.cfi_startproc
 1041              		@ args = 0, pretend = 0, frame = 0
 1042              		@ frame_needed = 0, uses_anonymous_args = 0
 1043              		.loc 1 255 1 is_stmt 0 view .LVU208
 1044 0000 70B5     		push	{r4, r5, r6, lr}
 1045              	.LCFI26:
 1046              		.cfi_def_cfa_offset 16
 1047              		.cfi_offset 4, -16
 1048              		.cfi_offset 5, -12
 1049              		.cfi_offset 6, -8
 1050              		.cfi_offset 14, -4
 1051 0002 0C46     		mov	r4, r1
 1052 0004 1646     		mov	r6, r2
 256:user/w25q32.c ****     uint32_t addr_tmp,i;
 1053              		.loc 1 256 5 is_stmt 1 view .LVU209
 257:user/w25q32.c ****     addr_tmp=addr&0x00ffffff;
 1054              		.loc 1 257 5 view .LVU210
 1055              		.loc 1 257 13 is_stmt 0 view .LVU211
 1056 0006 20F07F45 		bic	r5, r0, #-16777216
 1057              	.LVL96:
 258:user/w25q32.c ****     FlashWait_Busy();    
 1058              		.loc 1 258 5 is_stmt 1 view .LVU212
 1059 000a FFF7FEFF 		bl	FlashWait_Busy
 1060              	.LVL97:
 259:user/w25q32.c ****     FLASH_CS_Low();
 1061              		.loc 1 259 5 view .LVU213
 1062 000e 0022     		movs	r2, #0
 1063 0010 1021     		movs	r1, #16
 1064 0012 0F48     		ldr	r0, .L71
 1065 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1066              	.LVL98:
 1067              		.loc 1 259 19 view .LVU214
 260:user/w25q32.c ****     SPI2_Write(READ_CMD); 
 1068              		.loc 1 260 5 view .LVU215
 1069 0018 0320     		movs	r0, #3
 1070 001a FFF7FEFF 		bl	SPI2_Write
 1071              	.LVL99:
 261:user/w25q32.c ****     SPI2_Write(addr_tmp>>16);
 1072              		.loc 1 261 5 view .LVU216
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 24


 1073 001e 280C     		lsrs	r0, r5, #16
 1074 0020 FFF7FEFF 		bl	SPI2_Write
 1075              	.LVL100:
 262:user/w25q32.c ****     SPI2_Write(addr_tmp>>8);
 1076              		.loc 1 262 5 view .LVU217
 1077 0024 C5F30720 		ubfx	r0, r5, #8, #8
 1078 0028 FFF7FEFF 		bl	SPI2_Write
 1079              	.LVL101:
 263:user/w25q32.c ****     SPI2_Write(addr_tmp); 
 1080              		.loc 1 263 5 view .LVU218
 1081 002c E8B2     		uxtb	r0, r5
 1082 002e FFF7FEFF 		bl	SPI2_Write
 1083              	.LVL102:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1084              		.loc 1 264 5 view .LVU219
 1085              		.loc 1 264 10 is_stmt 0 view .LVU220
 1086 0032 0025     		movs	r5, #0
 1087              	.LVL103:
 1088              		.loc 1 264 5 view .LVU221
 1089 0034 04E0     		b	.L68
 1090              	.LVL104:
 1091              	.L69:
 265:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1092              		.loc 1 265 9 is_stmt 1 discriminator 3 view .LVU222
 1093              		.loc 1 265 16 is_stmt 0 discriminator 3 view .LVU223
 1094 0036 FFF7FEFF 		bl	SPI2_Read
 1095              	.LVL105:
 1096              		.loc 1 265 15 discriminator 3 view .LVU224
 1097 003a 04F8010B 		strb	r0, [r4], #1
 1098              	.LVL106:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1099              		.loc 1 264 19 is_stmt 1 discriminator 3 view .LVU225
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1100              		.loc 1 264 20 is_stmt 0 discriminator 3 view .LVU226
 1101 003e 0135     		adds	r5, r5, #1
 1102              	.LVL107:
 1103              	.L68:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1104              		.loc 1 264 13 is_stmt 1 discriminator 1 view .LVU227
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1105              		.loc 1 264 5 is_stmt 0 discriminator 1 view .LVU228
 1106 0040 B542     		cmp	r5, r6
 1107 0042 F8D3     		bcc	.L69
 266:user/w25q32.c ****     FLASH_CS_High();    
 1108              		.loc 1 266 5 is_stmt 1 view .LVU229
 1109 0044 0122     		movs	r2, #1
 1110 0046 1021     		movs	r1, #16
 1111 0048 0148     		ldr	r0, .L71
 1112 004a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1113              	.LVL108:
 267:user/w25q32.c **** }
 1114              		.loc 1 267 1 is_stmt 0 view .LVU230
 1115 004e 70BD     		pop	{r4, r5, r6, pc}
 1116              	.LVL109:
 1117              	.L72:
 1118              		.loc 1 267 1 view .LVU231
 1119              		.align	2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 25


 1120              	.L71:
 1121 0050 00000240 		.word	1073872896
 1122              		.cfi_endproc
 1123              	.LFE149:
 1125              		.section	.text.FlashPage_Read,"ax",%progbits
 1126              		.align	1
 1127              		.global	FlashPage_Read
 1128              		.syntax unified
 1129              		.thumb
 1130              		.thumb_func
 1132              	FlashPage_Read:
 1133              	.LVL110:
 1134              	.LFB150:
 268:user/w25q32.c **** /*---- F L A S H   P A G E _   R E A D ----
 269:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 270:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩpageAddr:“≥ÔøΩÔøΩ÷∑ÔøΩÔøΩÔøΩ⁄∫ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩŸ≥ÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩ–°
 271:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 272:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 273:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ15:11:50-------
 274:user/w25q32.c **** void FlashPage_Read(uint16_t pageAddr,uint8_t *ptr,uint32_t pageSize)
 275:user/w25q32.c **** {
 1135              		.loc 1 275 1 is_stmt 1 view -0
 1136              		.cfi_startproc
 1137              		@ args = 0, pretend = 0, frame = 0
 1138              		@ frame_needed = 0, uses_anonymous_args = 0
 1139              		.loc 1 275 1 is_stmt 0 view .LVU233
 1140 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1141              	.LCFI27:
 1142              		.cfi_def_cfa_offset 24
 1143              		.cfi_offset 3, -24
 1144              		.cfi_offset 4, -20
 1145              		.cfi_offset 5, -16
 1146              		.cfi_offset 6, -12
 1147              		.cfi_offset 7, -8
 1148              		.cfi_offset 14, -4
 1149 0002 0546     		mov	r5, r0
 1150 0004 0C46     		mov	r4, r1
 1151 0006 1646     		mov	r6, r2
 276:user/w25q32.c ****     uint32_t addr,i;
 1152              		.loc 1 276 5 is_stmt 1 view .LVU234
 277:user/w25q32.c **** //	    addr=pageAddr*FLASH_PAGE_SIZE;
 278:user/w25q32.c ****     addr=((uint32_t)pageAddr)<<8;
 1153              		.loc 1 278 5 view .LVU235
 1154              		.loc 1 278 9 is_stmt 0 view .LVU236
 1155 0008 0702     		lsls	r7, r0, #8
 1156              	.LVL111:
 279:user/w25q32.c ****     FlashWait_Busy();   
 1157              		.loc 1 279 5 is_stmt 1 view .LVU237
 1158 000a FFF7FEFF 		bl	FlashWait_Busy
 1159              	.LVL112:
 280:user/w25q32.c ****     FLASH_CS_Low();
 1160              		.loc 1 280 5 view .LVU238
 1161 000e 0022     		movs	r2, #0
 1162 0010 1021     		movs	r1, #16
 1163 0012 0F48     		ldr	r0, .L77
 1164 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1165              	.LVL113:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 26


 1166              		.loc 1 280 19 view .LVU239
 281:user/w25q32.c ****     SPI2_Write(READ_CMD); 
 1167              		.loc 1 281 5 view .LVU240
 1168 0018 0320     		movs	r0, #3
 1169 001a FFF7FEFF 		bl	SPI2_Write
 1170              	.LVL114:
 282:user/w25q32.c ****     SPI2_Write(addr>>16);
 1171              		.loc 1 282 5 view .LVU241
 1172 001e 380C     		lsrs	r0, r7, #16
 1173 0020 FFF7FEFF 		bl	SPI2_Write
 1174              	.LVL115:
 283:user/w25q32.c ****     SPI2_Write(addr>>8);
 1175              		.loc 1 283 5 view .LVU242
 1176 0024 E8B2     		uxtb	r0, r5
 1177 0026 FFF7FEFF 		bl	SPI2_Write
 1178              	.LVL116:
 284:user/w25q32.c ****     SPI2_Write(addr); 
 1179              		.loc 1 284 5 view .LVU243
 1180 002a 0020     		movs	r0, #0
 1181 002c FFF7FEFF 		bl	SPI2_Write
 1182              	.LVL117:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1183              		.loc 1 285 5 view .LVU244
 1184              		.loc 1 285 10 is_stmt 0 view .LVU245
 1185 0030 0025     		movs	r5, #0
 1186              		.loc 1 285 5 view .LVU246
 1187 0032 04E0     		b	.L74
 1188              	.LVL118:
 1189              	.L75:
 286:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1190              		.loc 1 286 9 is_stmt 1 discriminator 3 view .LVU247
 1191              		.loc 1 286 16 is_stmt 0 discriminator 3 view .LVU248
 1192 0034 FFF7FEFF 		bl	SPI2_Read
 1193              	.LVL119:
 1194              		.loc 1 286 15 discriminator 3 view .LVU249
 1195 0038 04F8010B 		strb	r0, [r4], #1
 1196              	.LVL120:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1197              		.loc 1 285 24 is_stmt 1 discriminator 3 view .LVU250
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1198              		.loc 1 285 25 is_stmt 0 discriminator 3 view .LVU251
 1199 003c 0135     		adds	r5, r5, #1
 1200              	.LVL121:
 1201              	.L74:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1202              		.loc 1 285 13 is_stmt 1 discriminator 1 view .LVU252
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1203              		.loc 1 285 5 is_stmt 0 discriminator 1 view .LVU253
 1204 003e B542     		cmp	r5, r6
 1205 0040 F8D3     		bcc	.L75
 287:user/w25q32.c ****     FLASH_CS_High();    
 1206              		.loc 1 287 5 is_stmt 1 view .LVU254
 1207 0042 0122     		movs	r2, #1
 1208 0044 1021     		movs	r1, #16
 1209 0046 0248     		ldr	r0, .L77
 1210 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1211              	.LVL122:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 27


 288:user/w25q32.c **** }
 1212              		.loc 1 288 1 is_stmt 0 view .LVU255
 1213 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1214              	.LVL123:
 1215              	.L78:
 1216              		.loc 1 288 1 view .LVU256
 1217 004e 00BF     		.align	2
 1218              	.L77:
 1219 0050 00000240 		.word	1073872896
 1220              		.cfi_endproc
 1221              	.LFE150:
 1223              		.section	.text.FlashFastRead,"ax",%progbits
 1224              		.align	1
 1225              		.global	FlashFastRead
 1226              		.syntax unified
 1227              		.thumb
 1228              		.thumb_func
 1230              	FlashFastRead:
 1231              	.LVL124:
 1232              	.LFB151:
 289:user/w25q32.c **** void FlashFastRead(uint32_t addr,uint8_t *ptr,uint32_t len)
 290:user/w25q32.c **** {
 1233              		.loc 1 290 1 is_stmt 1 view -0
 1234              		.cfi_startproc
 1235              		@ args = 0, pretend = 0, frame = 0
 1236              		@ frame_needed = 0, uses_anonymous_args = 0
 1237              		.loc 1 290 1 is_stmt 0 view .LVU258
 1238 0000 70B5     		push	{r4, r5, r6, lr}
 1239              	.LCFI28:
 1240              		.cfi_def_cfa_offset 16
 1241              		.cfi_offset 4, -16
 1242              		.cfi_offset 5, -12
 1243              		.cfi_offset 6, -8
 1244              		.cfi_offset 14, -4
 1245 0002 0C46     		mov	r4, r1
 1246 0004 1646     		mov	r6, r2
 291:user/w25q32.c ****     uint32_t addr_tmp,i;
 1247              		.loc 1 291 5 is_stmt 1 view .LVU259
 292:user/w25q32.c ****     addr_tmp=addr&0x00ffffff;
 1248              		.loc 1 292 5 view .LVU260
 1249              		.loc 1 292 13 is_stmt 0 view .LVU261
 1250 0006 20F07F45 		bic	r5, r0, #-16777216
 1251              	.LVL125:
 293:user/w25q32.c ****     FlashWait_Busy();    
 1252              		.loc 1 293 5 is_stmt 1 view .LVU262
 1253 000a FFF7FEFF 		bl	FlashWait_Busy
 1254              	.LVL126:
 294:user/w25q32.c ****     FLASH_CS_Low();
 1255              		.loc 1 294 5 view .LVU263
 1256 000e 0022     		movs	r2, #0
 1257 0010 1021     		movs	r1, #16
 1258 0012 1148     		ldr	r0, .L83
 1259 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1260              	.LVL127:
 1261              		.loc 1 294 19 view .LVU264
 295:user/w25q32.c ****     SPI2_Write(FREAD_CMD); 
 1262              		.loc 1 295 5 view .LVU265
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 28


 1263 0018 0B20     		movs	r0, #11
 1264 001a FFF7FEFF 		bl	SPI2_Write
 1265              	.LVL128:
 296:user/w25q32.c ****     SPI2_Write(addr_tmp>>16);
 1266              		.loc 1 296 5 view .LVU266
 1267 001e 280C     		lsrs	r0, r5, #16
 1268 0020 FFF7FEFF 		bl	SPI2_Write
 1269              	.LVL129:
 297:user/w25q32.c ****     SPI2_Write(addr_tmp>>8);
 1270              		.loc 1 297 5 view .LVU267
 1271 0024 C5F30720 		ubfx	r0, r5, #8, #8
 1272 0028 FFF7FEFF 		bl	SPI2_Write
 1273              	.LVL130:
 298:user/w25q32.c ****     SPI2_Write(addr_tmp); 
 1274              		.loc 1 298 5 view .LVU268
 1275 002c E8B2     		uxtb	r0, r5
 1276 002e FFF7FEFF 		bl	SPI2_Write
 1277              	.LVL131:
 299:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE); 
 1278              		.loc 1 299 5 view .LVU269
 1279 0032 FF20     		movs	r0, #255
 1280 0034 FFF7FEFF 		bl	SPI2_Write
 1281              	.LVL132:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1282              		.loc 1 300 5 view .LVU270
 1283              		.loc 1 300 10 is_stmt 0 view .LVU271
 1284 0038 0025     		movs	r5, #0
 1285              	.LVL133:
 1286              		.loc 1 300 5 view .LVU272
 1287 003a 04E0     		b	.L80
 1288              	.LVL134:
 1289              	.L81:
 301:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1290              		.loc 1 301 9 is_stmt 1 discriminator 3 view .LVU273
 1291              		.loc 1 301 16 is_stmt 0 discriminator 3 view .LVU274
 1292 003c FFF7FEFF 		bl	SPI2_Read
 1293              	.LVL135:
 1294              		.loc 1 301 15 discriminator 3 view .LVU275
 1295 0040 04F8010B 		strb	r0, [r4], #1
 1296              	.LVL136:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1297              		.loc 1 300 19 is_stmt 1 discriminator 3 view .LVU276
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1298              		.loc 1 300 20 is_stmt 0 discriminator 3 view .LVU277
 1299 0044 0135     		adds	r5, r5, #1
 1300              	.LVL137:
 1301              	.L80:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1302              		.loc 1 300 13 is_stmt 1 discriminator 1 view .LVU278
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1303              		.loc 1 300 5 is_stmt 0 discriminator 1 view .LVU279
 1304 0046 B542     		cmp	r5, r6
 1305 0048 F8D3     		bcc	.L81
 302:user/w25q32.c ****     FLASH_CS_High();    
 1306              		.loc 1 302 5 is_stmt 1 view .LVU280
 1307 004a 0122     		movs	r2, #1
 1308 004c 1021     		movs	r1, #16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 29


 1309 004e 0248     		ldr	r0, .L83
 1310 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1311              	.LVL138:
 303:user/w25q32.c **** }
 1312              		.loc 1 303 1 is_stmt 0 view .LVU281
 1313 0054 70BD     		pop	{r4, r5, r6, pc}
 1314              	.LVL139:
 1315              	.L84:
 1316              		.loc 1 303 1 view .LVU282
 1317 0056 00BF     		.align	2
 1318              	.L83:
 1319 0058 00000240 		.word	1073872896
 1320              		.cfi_endproc
 1321              	.LFE151:
 1323              		.section	.text.read_sector,"ax",%progbits
 1324              		.align	1
 1325              		.global	read_sector
 1326              		.syntax unified
 1327              		.thumb
 1328              		.thumb_func
 1330              	read_sector:
 1331              	.LVL140:
 1332              	.LFB152:
 304:user/w25q32.c **** // ËØª‰∏Ä‰∏™ÊâáÂå∫ 4K
 305:user/w25q32.c **** void read_sector(uint32_t blk_addr,uint8_t *buf, uint16_t blk_len)
 306:user/w25q32.c **** {
 1333              		.loc 1 306 1 is_stmt 1 view -0
 1334              		.cfi_startproc
 1335              		@ args = 0, pretend = 0, frame = 0
 1336              		@ frame_needed = 0, uses_anonymous_args = 0
 1337              		.loc 1 306 1 is_stmt 0 view .LVU284
 1338 0000 70B5     		push	{r4, r5, r6, lr}
 1339              	.LCFI29:
 1340              		.cfi_def_cfa_offset 16
 1341              		.cfi_offset 4, -16
 1342              		.cfi_offset 5, -12
 1343              		.cfi_offset 6, -8
 1344              		.cfi_offset 14, -4
 1345 0002 0E46     		mov	r6, r1
 307:user/w25q32.c ****     uint32_t page_addr;
 1346              		.loc 1 307 5 is_stmt 1 view .LVU285
 308:user/w25q32.c ****     int i;
 1347              		.loc 1 308 5 view .LVU286
 309:user/w25q32.c ****     // addr = blk_addr*4096;
 310:user/w25q32.c ****     page_addr = blk_addr*16;
 1348              		.loc 1 310 5 view .LVU287
 1349              		.loc 1 310 15 is_stmt 0 view .LVU288
 1350 0004 0501     		lsls	r5, r0, #4
 1351              	.LVL141:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1352              		.loc 1 311 5 is_stmt 1 view .LVU289
 1353              		.loc 1 311 11 is_stmt 0 view .LVU290
 1354 0006 0024     		movs	r4, #0
 1355              		.loc 1 311 5 view .LVU291
 1356 0008 08E0     		b	.L86
 1357              	.LVL142:
 1358              	.L87:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 30


 312:user/w25q32.c ****     {
 313:user/w25q32.c ****         FlashPage_Read(page_addr+i,buf+i*256,256);
 1359              		.loc 1 313 9 is_stmt 1 discriminator 3 view .LVU292
 1360 000a 2819     		adds	r0, r5, r4
 1361 000c 4FF48072 		mov	r2, #256
 1362 0010 06EB0421 		add	r1, r6, r4, lsl #8
 1363 0014 80B2     		uxth	r0, r0
 1364 0016 FFF7FEFF 		bl	FlashPage_Read
 1365              	.LVL143:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1366              		.loc 1 311 24 discriminator 3 view .LVU293
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1367              		.loc 1 311 25 is_stmt 0 discriminator 3 view .LVU294
 1368 001a 0134     		adds	r4, r4, #1
 1369              	.LVL144:
 1370              	.L86:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1371              		.loc 1 311 16 is_stmt 1 discriminator 1 view .LVU295
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1372              		.loc 1 311 5 is_stmt 0 discriminator 1 view .LVU296
 1373 001c 0F2C     		cmp	r4, #15
 1374 001e F4DD     		ble	.L87
 314:user/w25q32.c ****     }
 315:user/w25q32.c **** }
 1375              		.loc 1 315 1 view .LVU297
 1376 0020 70BD     		pop	{r4, r5, r6, pc}
 1377              		.loc 1 315 1 view .LVU298
 1378              		.cfi_endproc
 1379              	.LFE152:
 1381              		.section	.text.write_sector,"ax",%progbits
 1382              		.align	1
 1383              		.global	write_sector
 1384              		.syntax unified
 1385              		.thumb
 1386              		.thumb_func
 1388              	write_sector:
 1389              	.LVL145:
 1390              	.LFB153:
 316:user/w25q32.c **** // ÂÜô‰∏Ä‰∏™ÊâáÂå∫ 4K
 317:user/w25q32.c **** void write_sector(uint32_t blk_addr,uint8_t *buf, uint16_t blk_len)
 318:user/w25q32.c **** {
 1391              		.loc 1 318 1 is_stmt 1 view -0
 1392              		.cfi_startproc
 1393              		@ args = 0, pretend = 0, frame = 0
 1394              		@ frame_needed = 0, uses_anonymous_args = 0
 1395              		.loc 1 318 1 is_stmt 0 view .LVU300
 1396 0000 70B5     		push	{r4, r5, r6, lr}
 1397              	.LCFI30:
 1398              		.cfi_def_cfa_offset 16
 1399              		.cfi_offset 4, -16
 1400              		.cfi_offset 5, -12
 1401              		.cfi_offset 6, -8
 1402              		.cfi_offset 14, -4
 1403 0002 0546     		mov	r5, r0
 1404 0004 0E46     		mov	r6, r1
 319:user/w25q32.c ****     uint32_t page_addr;
 1405              		.loc 1 319 5 is_stmt 1 view .LVU301
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 31


 320:user/w25q32.c ****     int i;
 1406              		.loc 1 320 5 view .LVU302
 321:user/w25q32.c ****     // addr = blk_addr*4096;
 322:user/w25q32.c ****     FlashSector_Erase(blk_addr);
 1407              		.loc 1 322 5 view .LVU303
 1408 0006 80B2     		uxth	r0, r0
 1409              	.LVL146:
 1410              		.loc 1 322 5 is_stmt 0 view .LVU304
 1411 0008 FFF7FEFF 		bl	FlashSector_Erase
 1412              	.LVL147:
 323:user/w25q32.c ****     page_addr = blk_addr*16;
 1413              		.loc 1 323 5 is_stmt 1 view .LVU305
 1414              		.loc 1 323 15 is_stmt 0 view .LVU306
 1415 000c 2D01     		lsls	r5, r5, #4
 1416              	.LVL148:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1417              		.loc 1 324 5 is_stmt 1 view .LVU307
 1418              		.loc 1 324 11 is_stmt 0 view .LVU308
 1419 000e 0024     		movs	r4, #0
 1420              		.loc 1 324 5 view .LVU309
 1421 0010 08E0     		b	.L90
 1422              	.LVL149:
 1423              	.L91:
 325:user/w25q32.c ****     {
 326:user/w25q32.c ****         FlashPage_Write(page_addr+i,buf+i*256,256);
 1424              		.loc 1 326 9 is_stmt 1 discriminator 3 view .LVU310
 1425 0012 2819     		adds	r0, r5, r4
 1426 0014 4FF48072 		mov	r2, #256
 1427 0018 06EB0421 		add	r1, r6, r4, lsl #8
 1428 001c 80B2     		uxth	r0, r0
 1429 001e FFF7FEFF 		bl	FlashPage_Write
 1430              	.LVL150:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1431              		.loc 1 324 24 discriminator 3 view .LVU311
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1432              		.loc 1 324 25 is_stmt 0 discriminator 3 view .LVU312
 1433 0022 0134     		adds	r4, r4, #1
 1434              	.LVL151:
 1435              	.L90:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1436              		.loc 1 324 16 is_stmt 1 discriminator 1 view .LVU313
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1437              		.loc 1 324 5 is_stmt 0 discriminator 1 view .LVU314
 1438 0024 0F2C     		cmp	r4, #15
 1439 0026 F4DD     		ble	.L91
 327:user/w25q32.c ****     }
 328:user/w25q32.c **** }
 1440              		.loc 1 328 1 view .LVU315
 1441 0028 70BD     		pop	{r4, r5, r6, pc}
 1442              		.loc 1 328 1 view .LVU316
 1443              		.cfi_endproc
 1444              	.LFE153:
 1446              		.text
 1447              	.Letext0:
 1448              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1449              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1450              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 32


 1451              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1452              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1453              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1454              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 1455              		.file 9 "user/w25q32.h"
 1456              		.file 10 "Inc/spi.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 33


DEFINED SYMBOLS
                            *ABS*:00000000 w25q32.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:20     .text.SPI2_Write:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:26     .text.SPI2_Write:00000000 SPI2_Write
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:61     .text.SPI2_Write:0000001c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:66     .text.SPI2_Read:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:72     .text.SPI2_Read:00000000 SPI2_Read
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:109    .text.SPI2_Read:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:114    .text.FlashWait_Busy:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:120    .text.FlashWait_Busy:00000000 FlashWait_Busy
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:183    .text.FlashWait_Busy:00000038 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:188    .text.FlashGet_Info:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:194    .text.FlashGet_Info:00000000 FlashGet_Info
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:279    .text.FlashGet_Info:00000058 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:285    .text.FlashGet_ElectronicInfo:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:291    .text.FlashGet_ElectronicInfo:00000000 FlashGet_ElectronicInfo
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:378    .text.FlashGet_ElectronicInfo:0000005c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:384    .text.FlashEnter_DeepPowerDown:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:390    .text.FlashEnter_DeepPowerDown:00000000 FlashEnter_DeepPowerDown
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:424    .text.FlashEnter_DeepPowerDown:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:429    .text.FlashReleaseFrom_DeepPowerDown:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:435    .text.FlashReleaseFrom_DeepPowerDown:00000000 FlashReleaseFrom_DeepPowerDown
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:469    .text.FlashReleaseFrom_DeepPowerDown:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:474    .text.FlashReleaseFrom_DeepPowerDownE:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:480    .text.FlashReleaseFrom_DeepPowerDownE:00000000 FlashReleaseFrom_DeepPowerDownE
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:539    .text.FlashReleaseFrom_DeepPowerDownE:0000003c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:544    .text.FlashWriteEnable:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:550    .text.FlashWriteEnable:00000000 FlashWriteEnable
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:584    .text.FlashWriteEnable:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:589    .text.FlashWriteDisable:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:595    .text.FlashWriteDisable:00000000 FlashWriteDisable
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:629    .text.FlashWriteDisable:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:634    .text.FlashWrite_StaRegister:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:640    .text.FlashWrite_StaRegister:00000000 FlashWrite_StaRegister
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:685    .text.FlashWrite_StaRegister:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:690    .text.FlashPage_Write:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:696    .text.FlashPage_Write:00000000 FlashPage_Write
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:786    .text.FlashPage_Write:00000054 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:791    .text.FlashChip_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:797    .text.FlashChip_Erase:00000000 FlashChip_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:837    .text.FlashChip_Erase:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:842    .text.SpiFlash_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:848    .text.SpiFlash_Init:00000000 SpiFlash_Init
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:883    .text.FlashBlock_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:889    .text.FlashBlock_Erase:00000000 FlashBlock_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:948    .text.FlashBlock_Erase:0000003c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:953    .text.FlashSector_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:959    .text.FlashSector_Erase:00000000 FlashSector_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1025   .text.FlashSector_Erase:00000044 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1030   .text.FlashRead:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1036   .text.FlashRead:00000000 FlashRead
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1121   .text.FlashRead:00000050 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1126   .text.FlashPage_Read:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1132   .text.FlashPage_Read:00000000 FlashPage_Read
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1219   .text.FlashPage_Read:00000050 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1224   .text.FlashFastRead:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1230   .text.FlashFastRead:00000000 FlashFastRead
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s 			page 34


C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1319   .text.FlashFastRead:00000058 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1324   .text.read_sector:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1330   .text.read_sector:00000000 read_sector
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1382   .text.write_sector:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccEiWhxk.s:1388   .text.write_sector:00000000 write_sector

UNDEFINED SYMBOLS
HAL_SPI_Transmit
hspi1
HAL_SPI_TransmitReceive
HAL_GPIO_WritePin
