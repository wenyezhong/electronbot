ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"w25q32.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.SPI2_Write,"ax",%progbits
  20              		.align	1
  21              		.global	SPI2_Write
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	SPI2_Write:
  27              	.LVL0:
  28              	.LFB133:
  29              		.file 1 "user/w25q32.c"
   1:user/w25q32.c **** /* ---------------------------------- File Description --------------------------------------------
   2:user/w25q32.c **** „ÄêÊñá‰ª∂ÂäüËÉΩ„ÄëÔºöÊú¨Êñá‰ª∂‰∏∫ W25Q128  SpiFLASHËäØÁâáÈ©±Âä®Êñá‰ª∂
   3:user/w25q32.c ****               W25Q128  Â≠òÂÇ®Èáè‰∏∫128M bit  ÂàÜ‰∏∫4096‰∏™ÊâáÂå∫ÔºåÊØè‰∏™ÊâáÂå∫Êúâ4K byte  16‰∏™Êâá
   4:user/w25q32.c ****               ÊØèpage ‰∏∫256‰∏™Â≠óËäÇ  ÊÄªÂÖ±65536È°µ   ÊØè‰∏™ÊâáÂå∫16È°µ
   5:user/w25q32.c ****               ÊúÄÂø´ËÆøÈóÆÈÄüÂ∫¶È´òËææ104MHz
   6:user/w25q32.c **** „ÄêÂàõÂª∫Êó∂Èó¥„ÄëÔºö2012Âπ¥10Êúà22Êó•ÊòüÊúü‰∏Ä13:20:40
   7:user/w25q32.c **** „ÄêÊñá‰ª∂ÁâàÊú¨„ÄëÔºöV1.0
   8:user/w25q32.c **** „Äê‰ΩúËÄÖÂ£∞Êòé„ÄëÔºöÊú¨Êñá‰ª∂‰ΩúËÄÖ‰∏∫Ê∏©‰∏ö‰∏≠,ÂèØÈÄöËøáemail‰∏é‰ΩúËÄÖËÅîÁ≥ª: eric540@163.com
   9:user/w25q32.c **** ------------------------------------------------------------------------------------------ */
  10:user/w25q32.c **** 
  11:user/w25q32.c **** #include "w25q32.h"
  12:user/w25q32.c **** #include <stdio.h>
  13:user/w25q32.c **** 
  14:user/w25q32.c **** void SPI2_Write(uint8_t dat)
  15:user/w25q32.c **** {
  30              		.loc 1 15 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 8
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 15 1 is_stmt 0 view .LVU1
  35 0000 00B5     		push	{lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 4
  38              		.cfi_offset 14, -4
  39 0002 83B0     		sub	sp, sp, #12
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 16
  42 0004 8DF80700 		strb	r0, [sp, #7]
  16:user/w25q32.c ****     HAL_SPI_Transmit(&hspi1, &dat, 1, 0xff);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 2


  43              		.loc 1 16 5 is_stmt 1 view .LVU2
  44 0008 FF23     		movs	r3, #255
  45 000a 0122     		movs	r2, #1
  46 000c 0DF10701 		add	r1, sp, #7
  47 0010 0248     		ldr	r0, .L3
  48              	.LVL1:
  49              		.loc 1 16 5 is_stmt 0 view .LVU3
  50 0012 FFF7FEFF 		bl	HAL_SPI_Transmit
  51              	.LVL2:
  17:user/w25q32.c **** }
  52              		.loc 1 17 1 view .LVU4
  53 0016 03B0     		add	sp, sp, #12
  54              	.LCFI2:
  55              		.cfi_def_cfa_offset 4
  56              		@ sp needed
  57 0018 5DF804FB 		ldr	pc, [sp], #4
  58              	.L4:
  59              		.align	2
  60              	.L3:
  61 001c 00000000 		.word	hspi1
  62              		.cfi_endproc
  63              	.LFE133:
  65              		.section	.text.SPI2_Read,"ax",%progbits
  66              		.align	1
  67              		.global	SPI2_Read
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	SPI2_Read:
  73              	.LFB134:
  18:user/w25q32.c **** uint8_t SPI2_Read(void)
  19:user/w25q32.c **** {
  74              		.loc 1 19 1 is_stmt 1 view -0
  75              		.cfi_startproc
  76              		@ args = 0, pretend = 0, frame = 8
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78 0000 00B5     		push	{lr}
  79              	.LCFI3:
  80              		.cfi_def_cfa_offset 4
  81              		.cfi_offset 14, -4
  82 0002 85B0     		sub	sp, sp, #20
  83              	.LCFI4:
  84              		.cfi_def_cfa_offset 24
  20:user/w25q32.c ****     uint8_t rx_dat;
  85              		.loc 1 20 5 view .LVU6
  21:user/w25q32.c ****     uint8_t tx_dat=0xff;
  86              		.loc 1 21 5 view .LVU7
  87              		.loc 1 21 13 is_stmt 0 view .LVU8
  88 0004 FF23     		movs	r3, #255
  89 0006 8DF80E30 		strb	r3, [sp, #14]
  22:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, &tx_dat, &rx_dat, 1, 0xff);
  90              		.loc 1 22 5 is_stmt 1 view .LVU9
  91 000a 0093     		str	r3, [sp]
  92 000c 0123     		movs	r3, #1
  93 000e 0DF10F02 		add	r2, sp, #15
  94 0012 0DF10E01 		add	r1, sp, #14
  95 0016 0448     		ldr	r0, .L7
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 3


  96 0018 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
  97              	.LVL3:
  23:user/w25q32.c ****     // HAL_SPI_Receive(&hspi1, &rx_dat, 1, 20);
  24:user/w25q32.c ****     return rx_dat;
  98              		.loc 1 24 5 view .LVU10
  25:user/w25q32.c **** }
  99              		.loc 1 25 1 is_stmt 0 view .LVU11
 100 001c 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 101 0020 05B0     		add	sp, sp, #20
 102              	.LCFI5:
 103              		.cfi_def_cfa_offset 4
 104              		@ sp needed
 105 0022 5DF804FB 		ldr	pc, [sp], #4
 106              	.L8:
 107 0026 00BF     		.align	2
 108              	.L7:
 109 0028 00000000 		.word	hspi1
 110              		.cfi_endproc
 111              	.LFE134:
 113              		.section	.text.FlashWait_Busy,"ax",%progbits
 114              		.align	1
 115              		.global	FlashWait_Busy
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 120              	FlashWait_Busy:
 121              	.LFB136:
  26:user/w25q32.c **** 
  27:user/w25q32.c **** void SpiFlash_Init(void)
  28:user/w25q32.c **** {
  29:user/w25q32.c ****     flashInfoTypedef flashInfo;   
  30:user/w25q32.c ****     //WP
  31:user/w25q32.c ****     /*GPIO_InitTypeDef GPIO_InitStructure;
  32:user/w25q32.c ****     GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  33:user/w25q32.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;
  34:user/w25q32.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  35:user/w25q32.c ****     GPIO_Init(GPIOC, &GPIO_InitStructure);
  36:user/w25q32.c ****     FLASH_WP_High();*/
  37:user/w25q32.c ****     // SPI2_Configuration();
  38:user/w25q32.c ****     
  39:user/w25q32.c ****     FlashGet_ElectronicInfo(&flashInfo);
  40:user/w25q32.c ****     printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
  41:user/w25q32.c ****     printf("DeviceID=%02X\r\n",flashInfo.DeviceID[0]);
  42:user/w25q32.c ****     if(flashInfo.ManufacturerID==0xEF)
  43:user/w25q32.c ****     {
  44:user/w25q32.c ****         printf("\tFlash Info: WINBOND SPI FLASH\r\n");
  45:user/w25q32.c ****     }
  46:user/w25q32.c ****     FlashGet_Info(&flashInfo);
  47:user/w25q32.c ****     printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
  48:user/w25q32.c ****     printf("DeviceID=%02X%02X\r\n",flashInfo.DeviceID[0],flashInfo.DeviceID[1]);
  49:user/w25q32.c ****     if((flashInfo.DeviceID[0]==0x40)&&(flashInfo.DeviceID[1]==0x18))
  50:user/w25q32.c ****     {
  51:user/w25q32.c ****         printf("\tFlashType:W25Q128  FlashSize:128Mbit\r\n\tTotal 256 Blocks  16 Sectors/Block  4KB
  52:user/w25q32.c ****     }
  53:user/w25q32.c ****     else if((flashInfo.DeviceID[0]==0x40)&&(flashInfo.DeviceID[1]==0x16))
  54:user/w25q32.c ****     {
  55:user/w25q32.c ****         printf("\tFlashType:W25Q32  FlashSize:32Mbit\r\n\tTotal 64 Blocks  16 Sectors/Block  4KB/Se
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 4


  56:user/w25q32.c ****     }
  57:user/w25q32.c ****     else
  58:user/w25q32.c ****     {
  59:user/w25q32.c **** 
  60:user/w25q32.c ****     }
  61:user/w25q32.c ****     // FlashChip_Erase();
  62:user/w25q32.c **** 
  63:user/w25q32.c **** #if 0    
  64:user/w25q32.c ****     FlashEnter_DeepPowerDown();
  65:user/w25q32.c ****     tmp=FlashReleaseFrom_DeepPowerDownE();
  66:user/w25q32.c ****     printf("ElectronicSignature=%02x\r\n",tmp);  //ÔøΩÔøΩ”°ÔøΩÔøΩÔøΩŒ™: 0x14
  67:user/w25q32.c **** #endif    
  68:user/w25q32.c **** }
  69:user/w25q32.c **** 
  70:user/w25q32.c **** void FlashWait_Busy(void)
  71:user/w25q32.c **** {
 122              		.loc 1 71 1 is_stmt 1 view -0
 123              		.cfi_startproc
 124              		@ args = 0, pretend = 0, frame = 0
 125              		@ frame_needed = 0, uses_anonymous_args = 0
 126 0000 10B5     		push	{r4, lr}
 127              	.LCFI6:
 128              		.cfi_def_cfa_offset 8
 129              		.cfi_offset 4, -8
 130              		.cfi_offset 14, -4
  72:user/w25q32.c ****     uint8_t flashSta;
 131              		.loc 1 72 5 view .LVU13
  73:user/w25q32.c ****     uint32_t retry=0;
 132              		.loc 1 73 5 view .LVU14
 133              	.LVL4:
  74:user/w25q32.c ****     FLASH_CS_Low();
 134              		.loc 1 74 5 view .LVU15
 135 0002 0022     		movs	r2, #0
 136 0004 1021     		movs	r1, #16
 137 0006 0C48     		ldr	r0, .L13
 138 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 139              	.LVL5:
 140              		.loc 1 74 19 view .LVU16
  75:user/w25q32.c ****     SPI2_Write(RDSD_CMD);
 141              		.loc 1 75 5 view .LVU17
 142 000c 0520     		movs	r0, #5
 143 000e FFF7FEFF 		bl	SPI2_Write
 144              	.LVL6:
  73:user/w25q32.c ****     uint32_t retry=0;
 145              		.loc 1 73 14 is_stmt 0 view .LVU18
 146 0012 0024     		movs	r4, #0
 147              	.LVL7:
 148              	.L11:
  76:user/w25q32.c ****     do{
 149              		.loc 1 76 5 is_stmt 1 view .LVU19
  77:user/w25q32.c ****         
  78:user/w25q32.c ****         flashSta=SPI2_Read();
 150              		.loc 1 78 9 view .LVU20
 151              		.loc 1 78 18 is_stmt 0 view .LVU21
 152 0014 FFF7FEFF 		bl	SPI2_Read
 153              	.LVL8:
  79:user/w25q32.c ****         if(retry++>FLASH_BUSY_TIMEOUT)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 5


 154              		.loc 1 79 9 is_stmt 1 view .LVU22
 155 0018 2246     		mov	r2, r4
 156              		.loc 1 79 17 is_stmt 0 view .LVU23
 157 001a 0134     		adds	r4, r4, #1
 158              	.LVL9:
 159              		.loc 1 79 11 view .LVU24
 160 001c 44F62063 		movw	r3, #20000
 161 0020 9A42     		cmp	r2, r3
 162 0022 02D8     		bhi	.L10
  80:user/w25q32.c ****             break;
  81:user/w25q32.c ****         //printf("flashSta=%02x----%d\r\n",flashSta,retry);
  82:user/w25q32.c ****     }while(flashSta&0x01);
 163              		.loc 1 82 11 is_stmt 1 view .LVU25
 164              		.loc 1 82 5 is_stmt 0 view .LVU26
 165 0024 10F0010F 		tst	r0, #1
 166 0028 F4D1     		bne	.L11
 167              	.L10:
  83:user/w25q32.c ****     //printf("%d\r\n",retry);
  84:user/w25q32.c ****     FLASH_CS_High();    
 168              		.loc 1 84 5 is_stmt 1 view .LVU27
 169 002a 0122     		movs	r2, #1
 170 002c 1021     		movs	r1, #16
 171 002e 0248     		ldr	r0, .L13
 172              	.LVL10:
 173              		.loc 1 84 5 is_stmt 0 view .LVU28
 174 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 175              	.LVL11:
  85:user/w25q32.c **** }
 176              		.loc 1 85 1 view .LVU29
 177 0034 10BD     		pop	{r4, pc}
 178              	.LVL12:
 179              	.L14:
 180              		.loc 1 85 1 view .LVU30
 181 0036 00BF     		.align	2
 182              	.L13:
 183 0038 00000240 		.word	1073872896
 184              		.cfi_endproc
 185              	.LFE136:
 187              		.section	.text.FlashGet_Info,"ax",%progbits
 188              		.align	1
 189              		.global	FlashGet_Info
 190              		.syntax unified
 191              		.thumb
 192              		.thumb_func
 194              	FlashGet_Info:
 195              	.LVL13:
 196              	.LFB137:
  86:user/w25q32.c **** void FlashGet_Info(flashInfoTypedef * pFlashInfo)
  87:user/w25q32.c **** {
 197              		.loc 1 87 1 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 16
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 201              		.loc 1 87 1 is_stmt 0 view .LVU32
 202 0000 30B5     		push	{r4, r5, lr}
 203              	.LCFI7:
 204              		.cfi_def_cfa_offset 12
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 6


 205              		.cfi_offset 4, -12
 206              		.cfi_offset 5, -8
 207              		.cfi_offset 14, -4
 208 0002 87B0     		sub	sp, sp, #28
 209              	.LCFI8:
 210              		.cfi_def_cfa_offset 40
 211 0004 0446     		mov	r4, r0
  88:user/w25q32.c ****     uint8_t tx_data[7];
 212              		.loc 1 88 5 is_stmt 1 view .LVU33
  89:user/w25q32.c ****     uint8_t rx_data[7];
 213              		.loc 1 89 5 view .LVU34
  90:user/w25q32.c **** //	    FlashWait_Busy();
  91:user/w25q32.c ****     FLASH_CS_Low();    
 214              		.loc 1 91 5 view .LVU35
 215 0006 144D     		ldr	r5, .L17
 216 0008 0022     		movs	r2, #0
 217 000a 1021     		movs	r1, #16
 218 000c 2846     		mov	r0, r5
 219              	.LVL14:
 220              		.loc 1 91 5 is_stmt 0 view .LVU36
 221 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 222              	.LVL15:
 223              		.loc 1 91 19 is_stmt 1 view .LVU37
  92:user/w25q32.c ****     /* SPI2_Write(RDID_CMD);
  93:user/w25q32.c ****     pFlashInfo->ManufacturerID=SPI2_Read();
  94:user/w25q32.c ****     pFlashInfo->DeviceID[0]=SPI2_Read();
  95:user/w25q32.c ****     pFlashInfo->DeviceID[1]=SPI2_Read(); */
  96:user/w25q32.c **** 
  97:user/w25q32.c ****     
  98:user/w25q32.c ****     tx_data[0] = RDID_CMD;
 224              		.loc 1 98 5 view .LVU38
 225              		.loc 1 98 16 is_stmt 0 view .LVU39
 226 0012 9F23     		movs	r3, #159
 227 0014 8DF81030 		strb	r3, [sp, #16]
  99:user/w25q32.c ****     tx_data[1] = DUMMY_BYTE;
 228              		.loc 1 99 5 is_stmt 1 view .LVU40
 229              		.loc 1 99 16 is_stmt 0 view .LVU41
 230 0018 FF23     		movs	r3, #255
 231 001a 8DF81130 		strb	r3, [sp, #17]
 100:user/w25q32.c ****     tx_data[2] = DUMMY_BYTE;
 232              		.loc 1 100 5 is_stmt 1 view .LVU42
 233              		.loc 1 100 16 is_stmt 0 view .LVU43
 234 001e 8DF81230 		strb	r3, [sp, #18]
 101:user/w25q32.c ****     tx_data[3] = DUMMY_BYTE;
 235              		.loc 1 101 5 is_stmt 1 view .LVU44
 236              		.loc 1 101 16 is_stmt 0 view .LVU45
 237 0022 8DF81330 		strb	r3, [sp, #19]
 102:user/w25q32.c ****   
 103:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_data, rx_data, 4, 500);
 238              		.loc 1 103 5 is_stmt 1 view .LVU46
 239 0026 4FF4FA73 		mov	r3, #500
 240 002a 0093     		str	r3, [sp]
 241 002c 0423     		movs	r3, #4
 242 002e 02AA     		add	r2, sp, #8
 243 0030 04A9     		add	r1, sp, #16
 244 0032 0A48     		ldr	r0, .L17+4
 245 0034 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 7


 246              	.LVL16:
 104:user/w25q32.c ****     pFlashInfo->ManufacturerID = rx_data[1];
 247              		.loc 1 104 5 view .LVU47
 248              		.loc 1 104 41 is_stmt 0 view .LVU48
 249 0038 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 250              		.loc 1 104 32 view .LVU49
 251 003c 2370     		strb	r3, [r4]
 105:user/w25q32.c ****     pFlashInfo->DeviceID[0] = rx_data[2];
 252              		.loc 1 105 5 is_stmt 1 view .LVU50
 253              		.loc 1 105 38 is_stmt 0 view .LVU51
 254 003e 9DF80A30 		ldrb	r3, [sp, #10]	@ zero_extendqisi2
 255              		.loc 1 105 29 view .LVU52
 256 0042 6370     		strb	r3, [r4, #1]
 106:user/w25q32.c ****     pFlashInfo->DeviceID[1] = rx_data[3];
 257              		.loc 1 106 5 is_stmt 1 view .LVU53
 258              		.loc 1 106 38 is_stmt 0 view .LVU54
 259 0044 9DF80B30 		ldrb	r3, [sp, #11]	@ zero_extendqisi2
 260              		.loc 1 106 29 view .LVU55
 261 0048 A370     		strb	r3, [r4, #2]
 107:user/w25q32.c **** 
 108:user/w25q32.c ****     FLASH_CS_High();    
 262              		.loc 1 108 5 is_stmt 1 view .LVU56
 263 004a 0122     		movs	r2, #1
 264 004c 1021     		movs	r1, #16
 265 004e 2846     		mov	r0, r5
 266 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 267              	.LVL17:
 109:user/w25q32.c **** }
 268              		.loc 1 109 1 is_stmt 0 view .LVU57
 269 0054 07B0     		add	sp, sp, #28
 270              	.LCFI9:
 271              		.cfi_def_cfa_offset 12
 272              		@ sp needed
 273 0056 30BD     		pop	{r4, r5, pc}
 274              	.LVL18:
 275              	.L18:
 276              		.loc 1 109 1 view .LVU58
 277              		.align	2
 278              	.L17:
 279 0058 00000240 		.word	1073872896
 280 005c 00000000 		.word	hspi1
 281              		.cfi_endproc
 282              	.LFE137:
 284              		.section	.text.FlashGet_ElectronicInfo,"ax",%progbits
 285              		.align	1
 286              		.global	FlashGet_ElectronicInfo
 287              		.syntax unified
 288              		.thumb
 289              		.thumb_func
 291              	FlashGet_ElectronicInfo:
 292              	.LVL19:
 293              	.LFB138:
 110:user/w25q32.c **** void FlashGet_ElectronicInfo(flashInfoTypedef * pFlashInfo)
 111:user/w25q32.c **** {
 294              		.loc 1 111 1 is_stmt 1 view -0
 295              		.cfi_startproc
 296              		@ args = 0, pretend = 0, frame = 16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 8


 297              		@ frame_needed = 0, uses_anonymous_args = 0
 298              		.loc 1 111 1 is_stmt 0 view .LVU60
 299 0000 30B5     		push	{r4, r5, lr}
 300              	.LCFI10:
 301              		.cfi_def_cfa_offset 12
 302              		.cfi_offset 4, -12
 303              		.cfi_offset 5, -8
 304              		.cfi_offset 14, -4
 305 0002 87B0     		sub	sp, sp, #28
 306              	.LCFI11:
 307              		.cfi_def_cfa_offset 40
 308 0004 0446     		mov	r4, r0
 112:user/w25q32.c ****     // int i;
 113:user/w25q32.c ****     uint8_t tx_data[7];
 309              		.loc 1 113 5 is_stmt 1 view .LVU61
 114:user/w25q32.c ****     uint8_t rx_data[7];
 310              		.loc 1 114 5 view .LVU62
 115:user/w25q32.c **** 	// FlashWait_Busy();
 116:user/w25q32.c ****     FLASH_CS_Low();
 311              		.loc 1 116 5 view .LVU63
 312 0006 154D     		ldr	r5, .L21
 313 0008 0022     		movs	r2, #0
 314 000a 1021     		movs	r1, #16
 315 000c 2846     		mov	r0, r5
 316              	.LVL20:
 317              		.loc 1 116 5 is_stmt 0 view .LVU64
 318 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 319              	.LVL21:
 320              		.loc 1 116 19 is_stmt 1 view .LVU65
 117:user/w25q32.c ****    
 118:user/w25q32.c ****     /* SPI2_Write(REMS_CMD);
 119:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 120:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 121:user/w25q32.c ****     SPI2_Write(0x00);  //manufacturer's ID first
 122:user/w25q32.c ****     pFlashInfo->ManufacturerID=SPI2_Read();
 123:user/w25q32.c ****     pFlashInfo->DeviceID[0]=SPI2_Read(); */
 124:user/w25q32.c ****     
 125:user/w25q32.c ****     tx_data[0] = REMS_CMD;
 321              		.loc 1 125 5 view .LVU66
 322              		.loc 1 125 16 is_stmt 0 view .LVU67
 323 0012 9023     		movs	r3, #144
 324 0014 8DF81030 		strb	r3, [sp, #16]
 126:user/w25q32.c ****     tx_data[1] = DUMMY_BYTE;
 325              		.loc 1 126 5 is_stmt 1 view .LVU68
 326              		.loc 1 126 16 is_stmt 0 view .LVU69
 327 0018 FF23     		movs	r3, #255
 328 001a 8DF81130 		strb	r3, [sp, #17]
 127:user/w25q32.c ****     tx_data[2] = DUMMY_BYTE;
 329              		.loc 1 127 5 is_stmt 1 view .LVU70
 330              		.loc 1 127 16 is_stmt 0 view .LVU71
 331 001e 8DF81230 		strb	r3, [sp, #18]
 128:user/w25q32.c ****     tx_data[3] = 0x00;
 332              		.loc 1 128 5 is_stmt 1 view .LVU72
 333              		.loc 1 128 16 is_stmt 0 view .LVU73
 334 0022 0022     		movs	r2, #0
 335 0024 8DF81320 		strb	r2, [sp, #19]
 129:user/w25q32.c ****     tx_data[4] = DUMMY_BYTE;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 9


 336              		.loc 1 129 5 is_stmt 1 view .LVU74
 337              		.loc 1 129 16 is_stmt 0 view .LVU75
 338 0028 8DF81430 		strb	r3, [sp, #20]
 130:user/w25q32.c ****     tx_data[5] = DUMMY_BYTE;
 339              		.loc 1 130 5 is_stmt 1 view .LVU76
 340              		.loc 1 130 16 is_stmt 0 view .LVU77
 341 002c 8DF81530 		strb	r3, [sp, #21]
 131:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_data, rx_data, 6, 500);
 342              		.loc 1 131 5 is_stmt 1 view .LVU78
 343 0030 4FF4FA73 		mov	r3, #500
 344 0034 0093     		str	r3, [sp]
 345 0036 0623     		movs	r3, #6
 346 0038 02AA     		add	r2, sp, #8
 347 003a 04A9     		add	r1, sp, #16
 348 003c 0848     		ldr	r0, .L21+4
 349 003e FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 350              	.LVL22:
 132:user/w25q32.c ****     pFlashInfo->ManufacturerID=rx_data[4];
 351              		.loc 1 132 5 view .LVU79
 352              		.loc 1 132 39 is_stmt 0 view .LVU80
 353 0042 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 354              		.loc 1 132 31 view .LVU81
 355 0046 2370     		strb	r3, [r4]
 133:user/w25q32.c ****     pFlashInfo->DeviceID[0]=rx_data[5];
 356              		.loc 1 133 5 is_stmt 1 view .LVU82
 357              		.loc 1 133 36 is_stmt 0 view .LVU83
 358 0048 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 359              		.loc 1 133 28 view .LVU84
 360 004c 6370     		strb	r3, [r4, #1]
 134:user/w25q32.c ****     
 135:user/w25q32.c ****     FLASH_CS_High();
 361              		.loc 1 135 5 is_stmt 1 view .LVU85
 362 004e 0122     		movs	r2, #1
 363 0050 1021     		movs	r1, #16
 364 0052 2846     		mov	r0, r5
 365 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 366              	.LVL23:
 136:user/w25q32.c **** }
 367              		.loc 1 136 1 is_stmt 0 view .LVU86
 368 0058 07B0     		add	sp, sp, #28
 369              	.LCFI12:
 370              		.cfi_def_cfa_offset 12
 371              		@ sp needed
 372 005a 30BD     		pop	{r4, r5, pc}
 373              	.LVL24:
 374              	.L22:
 375              		.loc 1 136 1 view .LVU87
 376              		.align	2
 377              	.L21:
 378 005c 00000240 		.word	1073872896
 379 0060 00000000 		.word	hspi1
 380              		.cfi_endproc
 381              	.LFE138:
 383              		.section	.rodata.SpiFlash_Init.str1.4,"aMS",%progbits,1
 384              		.align	2
 385              	.LC0:
 386 0000 4D616E75 		.ascii	"ManufacturerID=%02X\015\012\000"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 10


 386      66616374 
 386      75726572 
 386      49443D25 
 386      3032580D 
 387 0016 0000     		.align	2
 388              	.LC1:
 389 0018 44657669 		.ascii	"DeviceID=%02X\015\012\000"
 389      63654944 
 389      3D253032 
 389      580D0A00 
 390              		.align	2
 391              	.LC2:
 392 0028 09466C61 		.ascii	"\011Flash Info: WINBOND SPI FLASH\015\000"
 392      73682049 
 392      6E666F3A 
 392      2057494E 
 392      424F4E44 
 393              		.align	2
 394              	.LC3:
 395 0048 44657669 		.ascii	"DeviceID=%02X%02X\015\012\000"
 395      63654944 
 395      3D253032 
 395      58253032 
 395      580D0A00 
 396              		.align	2
 397              	.LC4:
 398 005c 09466C61 		.ascii	"\011FlashType:W25Q128  FlashSize:128Mbit\015\012\011"
 398      73685479 
 398      70653A57 
 398      32355131 
 398      32382020 
 399 0084 546F7461 		.ascii	"Total 256 Blocks  16 Sectors/Block  4KB/Sector\015\000"
 399      6C203235 
 399      3620426C 
 399      6F636B73 
 399      20203136 
 400              		.align	2
 401              	.LC5:
 402 00b4 09466C61 		.ascii	"\011FlashType:W25Q32  FlashSize:32Mbit\015\012\011T"
 402      73685479 
 402      70653A57 
 402      32355133 
 402      32202046 
 403 00db 6F74616C 		.ascii	"otal 64 Blocks  16 Sectors/Block  4KB/Sector\015\000"
 403      20363420 
 403      426C6F63 
 403      6B732020 
 403      31362053 
 404              		.section	.text.SpiFlash_Init,"ax",%progbits
 405              		.align	1
 406              		.global	SpiFlash_Init
 407              		.syntax unified
 408              		.thumb
 409              		.thumb_func
 411              	SpiFlash_Init:
 412              	.LFB135:
  28:user/w25q32.c ****     flashInfoTypedef flashInfo;   
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 11


 413              		.loc 1 28 1 is_stmt 1 view -0
 414              		.cfi_startproc
 415              		@ args = 0, pretend = 0, frame = 8
 416              		@ frame_needed = 0, uses_anonymous_args = 0
 417 0000 00B5     		push	{lr}
 418              	.LCFI13:
 419              		.cfi_def_cfa_offset 4
 420              		.cfi_offset 14, -4
 421 0002 83B0     		sub	sp, sp, #12
 422              	.LCFI14:
 423              		.cfi_def_cfa_offset 16
  29:user/w25q32.c ****     //WP
 424              		.loc 1 29 5 view .LVU89
  39:user/w25q32.c ****     printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
 425              		.loc 1 39 5 view .LVU90
 426 0004 01A8     		add	r0, sp, #4
 427 0006 FFF7FEFF 		bl	FlashGet_ElectronicInfo
 428              	.LVL25:
  40:user/w25q32.c ****     printf("DeviceID=%02X\r\n",flashInfo.DeviceID[0]);
 429              		.loc 1 40 5 view .LVU91
 430 000a 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 431 000e 1C48     		ldr	r0, .L31
 432 0010 FFF7FEFF 		bl	printf
 433              	.LVL26:
  41:user/w25q32.c ****     if(flashInfo.ManufacturerID==0xEF)
 434              		.loc 1 41 5 view .LVU92
 435 0014 9DF80510 		ldrb	r1, [sp, #5]	@ zero_extendqisi2
 436 0018 1A48     		ldr	r0, .L31+4
 437 001a FFF7FEFF 		bl	printf
 438              	.LVL27:
  42:user/w25q32.c ****     {
 439              		.loc 1 42 5 view .LVU93
  42:user/w25q32.c ****     {
 440              		.loc 1 42 17 is_stmt 0 view .LVU94
 441 001e 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
  42:user/w25q32.c ****     {
 442              		.loc 1 42 7 view .LVU95
 443 0022 EF2B     		cmp	r3, #239
 444 0024 17D0     		beq	.L28
 445              	.L24:
  46:user/w25q32.c ****     printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
 446              		.loc 1 46 5 is_stmt 1 view .LVU96
 447 0026 01A8     		add	r0, sp, #4
 448 0028 FFF7FEFF 		bl	FlashGet_Info
 449              	.LVL28:
  47:user/w25q32.c ****     printf("DeviceID=%02X%02X\r\n",flashInfo.DeviceID[0],flashInfo.DeviceID[1]);
 450              		.loc 1 47 5 view .LVU97
 451 002c 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 452 0030 1348     		ldr	r0, .L31
 453 0032 FFF7FEFF 		bl	printf
 454              	.LVL29:
  48:user/w25q32.c ****     if((flashInfo.DeviceID[0]==0x40)&&(flashInfo.DeviceID[1]==0x18))
 455              		.loc 1 48 5 view .LVU98
 456 0036 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 457 003a 9DF80510 		ldrb	r1, [sp, #5]	@ zero_extendqisi2
 458 003e 1248     		ldr	r0, .L31+8
 459 0040 FFF7FEFF 		bl	printf
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 12


 460              	.LVL30:
  49:user/w25q32.c ****     {
 461              		.loc 1 49 5 view .LVU99
  49:user/w25q32.c ****     {
 462              		.loc 1 49 27 is_stmt 0 view .LVU100
 463 0044 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
  49:user/w25q32.c ****     {
 464              		.loc 1 49 7 view .LVU101
 465 0048 402B     		cmp	r3, #64
 466 004a 08D0     		beq	.L29
 467              	.L25:
  53:user/w25q32.c ****     {
 468              		.loc 1 53 10 is_stmt 1 view .LVU102
  53:user/w25q32.c ****     {
 469              		.loc 1 53 12 is_stmt 0 view .LVU103
 470 004c 402B     		cmp	r3, #64
 471 004e 0ED0     		beq	.L30
 472              	.L23:
  68:user/w25q32.c **** 
 473              		.loc 1 68 1 view .LVU104
 474 0050 03B0     		add	sp, sp, #12
 475              	.LCFI15:
 476              		.cfi_remember_state
 477              		.cfi_def_cfa_offset 4
 478              		@ sp needed
 479 0052 5DF804FB 		ldr	pc, [sp], #4
 480              	.L28:
 481              	.LCFI16:
 482              		.cfi_restore_state
  44:user/w25q32.c ****     }
 483              		.loc 1 44 9 is_stmt 1 view .LVU105
 484 0056 0D48     		ldr	r0, .L31+12
 485 0058 FFF7FEFF 		bl	puts
 486              	.LVL31:
 487 005c E3E7     		b	.L24
 488              	.L29:
  49:user/w25q32.c ****     {
 489              		.loc 1 49 58 is_stmt 0 discriminator 1 view .LVU106
 490 005e 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
  49:user/w25q32.c ****     {
 491              		.loc 1 49 37 discriminator 1 view .LVU107
 492 0062 182A     		cmp	r2, #24
 493 0064 F2D1     		bne	.L25
  51:user/w25q32.c ****     }
 494              		.loc 1 51 9 is_stmt 1 view .LVU108
 495 0066 0A48     		ldr	r0, .L31+16
 496 0068 FFF7FEFF 		bl	puts
 497              	.LVL32:
 498 006c F0E7     		b	.L23
 499              	.L30:
  53:user/w25q32.c ****     {
 500              		.loc 1 53 63 is_stmt 0 discriminator 1 view .LVU109
 501 006e 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
  53:user/w25q32.c ****     {
 502              		.loc 1 53 42 discriminator 1 view .LVU110
 503 0072 162B     		cmp	r3, #22
 504 0074 ECD1     		bne	.L23
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 13


  55:user/w25q32.c ****     }
 505              		.loc 1 55 9 is_stmt 1 view .LVU111
 506 0076 0748     		ldr	r0, .L31+20
 507 0078 FFF7FEFF 		bl	puts
 508              	.LVL33:
  60:user/w25q32.c ****     // FlashChip_Erase();
 509              		.loc 1 60 5 view .LVU112
  68:user/w25q32.c **** 
 510              		.loc 1 68 1 is_stmt 0 view .LVU113
 511 007c E8E7     		b	.L23
 512              	.L32:
 513 007e 00BF     		.align	2
 514              	.L31:
 515 0080 00000000 		.word	.LC0
 516 0084 18000000 		.word	.LC1
 517 0088 48000000 		.word	.LC3
 518 008c 28000000 		.word	.LC2
 519 0090 5C000000 		.word	.LC4
 520 0094 B4000000 		.word	.LC5
 521              		.cfi_endproc
 522              	.LFE135:
 524              		.section	.text.FlashEnter_DeepPowerDown,"ax",%progbits
 525              		.align	1
 526              		.global	FlashEnter_DeepPowerDown
 527              		.syntax unified
 528              		.thumb
 529              		.thumb_func
 531              	FlashEnter_DeepPowerDown:
 532              	.LFB139:
 137:user/w25q32.c **** void FlashEnter_DeepPowerDown(void)
 138:user/w25q32.c **** {
 533              		.loc 1 138 1 is_stmt 1 view -0
 534              		.cfi_startproc
 535              		@ args = 0, pretend = 0, frame = 0
 536              		@ frame_needed = 0, uses_anonymous_args = 0
 537 0000 10B5     		push	{r4, lr}
 538              	.LCFI17:
 539              		.cfi_def_cfa_offset 8
 540              		.cfi_offset 4, -8
 541              		.cfi_offset 14, -4
 139:user/w25q32.c ****     FLASH_CS_Low();
 542              		.loc 1 139 5 view .LVU115
 543 0002 074C     		ldr	r4, .L35
 544 0004 0022     		movs	r2, #0
 545 0006 1021     		movs	r1, #16
 546 0008 2046     		mov	r0, r4
 547 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 548              	.LVL34:
 549              		.loc 1 139 19 view .LVU116
 140:user/w25q32.c ****     SPI2_Write(DP_CMD);   
 550              		.loc 1 140 5 view .LVU117
 551 000e B920     		movs	r0, #185
 552 0010 FFF7FEFF 		bl	SPI2_Write
 553              	.LVL35:
 141:user/w25q32.c ****     FLASH_CS_High();    
 554              		.loc 1 141 5 view .LVU118
 555 0014 0122     		movs	r2, #1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 14


 556 0016 1021     		movs	r1, #16
 557 0018 2046     		mov	r0, r4
 558 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 559              	.LVL36:
 142:user/w25q32.c **** }
 560              		.loc 1 142 1 is_stmt 0 view .LVU119
 561 001e 10BD     		pop	{r4, pc}
 562              	.L36:
 563              		.align	2
 564              	.L35:
 565 0020 00000240 		.word	1073872896
 566              		.cfi_endproc
 567              	.LFE139:
 569              		.section	.text.FlashReleaseFrom_DeepPowerDown,"ax",%progbits
 570              		.align	1
 571              		.global	FlashReleaseFrom_DeepPowerDown
 572              		.syntax unified
 573              		.thumb
 574              		.thumb_func
 576              	FlashReleaseFrom_DeepPowerDown:
 577              	.LFB140:
 143:user/w25q32.c **** void FlashReleaseFrom_DeepPowerDown(void)
 144:user/w25q32.c **** {
 578              		.loc 1 144 1 is_stmt 1 view -0
 579              		.cfi_startproc
 580              		@ args = 0, pretend = 0, frame = 0
 581              		@ frame_needed = 0, uses_anonymous_args = 0
 582 0000 10B5     		push	{r4, lr}
 583              	.LCFI18:
 584              		.cfi_def_cfa_offset 8
 585              		.cfi_offset 4, -8
 586              		.cfi_offset 14, -4
 145:user/w25q32.c ****     FLASH_CS_Low();
 587              		.loc 1 145 5 view .LVU121
 588 0002 074C     		ldr	r4, .L39
 589 0004 0022     		movs	r2, #0
 590 0006 1021     		movs	r1, #16
 591 0008 2046     		mov	r0, r4
 592 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 593              	.LVL37:
 594              		.loc 1 145 19 view .LVU122
 146:user/w25q32.c ****     SPI2_Write(RDP_CMD);   
 595              		.loc 1 146 5 view .LVU123
 596 000e AB20     		movs	r0, #171
 597 0010 FFF7FEFF 		bl	SPI2_Write
 598              	.LVL38:
 147:user/w25q32.c ****     FLASH_CS_High();    
 599              		.loc 1 147 5 view .LVU124
 600 0014 0122     		movs	r2, #1
 601 0016 1021     		movs	r1, #16
 602 0018 2046     		mov	r0, r4
 603 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 604              	.LVL39:
 148:user/w25q32.c **** }
 605              		.loc 1 148 1 is_stmt 0 view .LVU125
 606 001e 10BD     		pop	{r4, pc}
 607              	.L40:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 15


 608              		.align	2
 609              	.L39:
 610 0020 00000240 		.word	1073872896
 611              		.cfi_endproc
 612              	.LFE140:
 614              		.section	.text.FlashReleaseFrom_DeepPowerDownE,"ax",%progbits
 615              		.align	1
 616              		.global	FlashReleaseFrom_DeepPowerDownE
 617              		.syntax unified
 618              		.thumb
 619              		.thumb_func
 621              	FlashReleaseFrom_DeepPowerDownE:
 622              	.LFB141:
 149:user/w25q32.c **** uint8_t FlashReleaseFrom_DeepPowerDownE(void)
 150:user/w25q32.c **** {   
 623              		.loc 1 150 1 is_stmt 1 view -0
 624              		.cfi_startproc
 625              		@ args = 0, pretend = 0, frame = 0
 626              		@ frame_needed = 0, uses_anonymous_args = 0
 627 0000 38B5     		push	{r3, r4, r5, lr}
 628              	.LCFI19:
 629              		.cfi_def_cfa_offset 16
 630              		.cfi_offset 3, -16
 631              		.cfi_offset 4, -12
 632              		.cfi_offset 5, -8
 633              		.cfi_offset 14, -4
 151:user/w25q32.c ****     uint8_t ElectronicSignature;
 634              		.loc 1 151 5 view .LVU127
 152:user/w25q32.c ****     FLASH_CS_Low();
 635              		.loc 1 152 5 view .LVU128
 636 0002 0E4D     		ldr	r5, .L43
 637 0004 0022     		movs	r2, #0
 638 0006 1021     		movs	r1, #16
 639 0008 2846     		mov	r0, r5
 640 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 641              	.LVL40:
 642              		.loc 1 152 19 view .LVU129
 153:user/w25q32.c ****     SPI2_Write(RES_CMD);
 643              		.loc 1 153 5 view .LVU130
 644 000e AB20     		movs	r0, #171
 645 0010 FFF7FEFF 		bl	SPI2_Write
 646              	.LVL41:
 154:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 647              		.loc 1 154 5 view .LVU131
 648 0014 FF20     		movs	r0, #255
 649 0016 FFF7FEFF 		bl	SPI2_Write
 650              	.LVL42:
 155:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 651              		.loc 1 155 5 view .LVU132
 652 001a FF20     		movs	r0, #255
 653 001c FFF7FEFF 		bl	SPI2_Write
 654              	.LVL43:
 156:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 655              		.loc 1 156 5 view .LVU133
 656 0020 FF20     		movs	r0, #255
 657 0022 FFF7FEFF 		bl	SPI2_Write
 658              	.LVL44:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 16


 157:user/w25q32.c ****     ElectronicSignature=SPI2_Read();
 659              		.loc 1 157 5 view .LVU134
 660              		.loc 1 157 25 is_stmt 0 view .LVU135
 661 0026 FFF7FEFF 		bl	SPI2_Read
 662              	.LVL45:
 663 002a 0446     		mov	r4, r0
 664              	.LVL46:
 158:user/w25q32.c ****     FLASH_CS_High();    
 665              		.loc 1 158 5 is_stmt 1 view .LVU136
 666 002c 0122     		movs	r2, #1
 667 002e 1021     		movs	r1, #16
 668 0030 2846     		mov	r0, r5
 669 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 670              	.LVL47:
 159:user/w25q32.c ****     return ElectronicSignature;
 671              		.loc 1 159 5 view .LVU137
 160:user/w25q32.c **** }
 672              		.loc 1 160 1 is_stmt 0 view .LVU138
 673 0036 2046     		mov	r0, r4
 674 0038 38BD     		pop	{r3, r4, r5, pc}
 675              	.LVL48:
 676              	.L44:
 677              		.loc 1 160 1 view .LVU139
 678 003a 00BF     		.align	2
 679              	.L43:
 680 003c 00000240 		.word	1073872896
 681              		.cfi_endproc
 682              	.LFE141:
 684              		.section	.text.FlashWriteEnable,"ax",%progbits
 685              		.align	1
 686              		.global	FlashWriteEnable
 687              		.syntax unified
 688              		.thumb
 689              		.thumb_func
 691              	FlashWriteEnable:
 692              	.LFB142:
 161:user/w25q32.c **** void FlashWriteEnable(void)
 162:user/w25q32.c **** {
 693              		.loc 1 162 1 is_stmt 1 view -0
 694              		.cfi_startproc
 695              		@ args = 0, pretend = 0, frame = 0
 696              		@ frame_needed = 0, uses_anonymous_args = 0
 697 0000 10B5     		push	{r4, lr}
 698              	.LCFI20:
 699              		.cfi_def_cfa_offset 8
 700              		.cfi_offset 4, -8
 701              		.cfi_offset 14, -4
 163:user/w25q32.c ****     FLASH_CS_Low();
 702              		.loc 1 163 5 view .LVU141
 703 0002 074C     		ldr	r4, .L47
 704 0004 0022     		movs	r2, #0
 705 0006 1021     		movs	r1, #16
 706 0008 2046     		mov	r0, r4
 707 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 708              	.LVL49:
 709              		.loc 1 163 19 view .LVU142
 164:user/w25q32.c ****     SPI2_Write(WREN_CMD);   
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 17


 710              		.loc 1 164 5 view .LVU143
 711 000e 0620     		movs	r0, #6
 712 0010 FFF7FEFF 		bl	SPI2_Write
 713              	.LVL50:
 165:user/w25q32.c ****     FLASH_CS_High();    
 714              		.loc 1 165 5 view .LVU144
 715 0014 0122     		movs	r2, #1
 716 0016 1021     		movs	r1, #16
 717 0018 2046     		mov	r0, r4
 718 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 719              	.LVL51:
 166:user/w25q32.c **** }
 720              		.loc 1 166 1 is_stmt 0 view .LVU145
 721 001e 10BD     		pop	{r4, pc}
 722              	.L48:
 723              		.align	2
 724              	.L47:
 725 0020 00000240 		.word	1073872896
 726              		.cfi_endproc
 727              	.LFE142:
 729              		.section	.text.FlashWriteDisable,"ax",%progbits
 730              		.align	1
 731              		.global	FlashWriteDisable
 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
 736              	FlashWriteDisable:
 737              	.LFB143:
 167:user/w25q32.c **** void FlashWriteDisable(void)
 168:user/w25q32.c **** {
 738              		.loc 1 168 1 is_stmt 1 view -0
 739              		.cfi_startproc
 740              		@ args = 0, pretend = 0, frame = 0
 741              		@ frame_needed = 0, uses_anonymous_args = 0
 742 0000 10B5     		push	{r4, lr}
 743              	.LCFI21:
 744              		.cfi_def_cfa_offset 8
 745              		.cfi_offset 4, -8
 746              		.cfi_offset 14, -4
 169:user/w25q32.c ****     FLASH_CS_Low();
 747              		.loc 1 169 5 view .LVU147
 748 0002 074C     		ldr	r4, .L51
 749 0004 0022     		movs	r2, #0
 750 0006 1021     		movs	r1, #16
 751 0008 2046     		mov	r0, r4
 752 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 753              	.LVL52:
 754              		.loc 1 169 19 view .LVU148
 170:user/w25q32.c ****     SPI2_Write(WRDI_CMD);   
 755              		.loc 1 170 5 view .LVU149
 756 000e 0420     		movs	r0, #4
 757 0010 FFF7FEFF 		bl	SPI2_Write
 758              	.LVL53:
 171:user/w25q32.c ****     FLASH_CS_High();    
 759              		.loc 1 171 5 view .LVU150
 760 0014 0122     		movs	r2, #1
 761 0016 1021     		movs	r1, #16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 18


 762 0018 2046     		mov	r0, r4
 763 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 764              	.LVL54:
 172:user/w25q32.c **** }
 765              		.loc 1 172 1 is_stmt 0 view .LVU151
 766 001e 10BD     		pop	{r4, pc}
 767              	.L52:
 768              		.align	2
 769              	.L51:
 770 0020 00000240 		.word	1073872896
 771              		.cfi_endproc
 772              	.LFE143:
 774              		.section	.text.FlashWrite_StaRegister,"ax",%progbits
 775              		.align	1
 776              		.global	FlashWrite_StaRegister
 777              		.syntax unified
 778              		.thumb
 779              		.thumb_func
 781              	FlashWrite_StaRegister:
 782              	.LVL55:
 783              	.LFB144:
 173:user/w25q32.c **** void FlashWrite_StaRegister(uint8_t flashSta)
 174:user/w25q32.c **** {
 784              		.loc 1 174 1 is_stmt 1 view -0
 785              		.cfi_startproc
 786              		@ args = 0, pretend = 0, frame = 0
 787              		@ frame_needed = 0, uses_anonymous_args = 0
 788              		.loc 1 174 1 is_stmt 0 view .LVU153
 789 0000 38B5     		push	{r3, r4, r5, lr}
 790              	.LCFI22:
 791              		.cfi_def_cfa_offset 16
 792              		.cfi_offset 3, -16
 793              		.cfi_offset 4, -12
 794              		.cfi_offset 5, -8
 795              		.cfi_offset 14, -4
 796 0002 0446     		mov	r4, r0
 175:user/w25q32.c ****     FLASH_CS_Low();
 797              		.loc 1 175 5 is_stmt 1 view .LVU154
 798 0004 084D     		ldr	r5, .L55
 799 0006 0022     		movs	r2, #0
 800 0008 1021     		movs	r1, #16
 801 000a 2846     		mov	r0, r5
 802              	.LVL56:
 803              		.loc 1 175 5 is_stmt 0 view .LVU155
 804 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 805              	.LVL57:
 806              		.loc 1 175 19 is_stmt 1 view .LVU156
 176:user/w25q32.c ****     SPI2_Write(WRSR_CMD); 
 807              		.loc 1 176 5 view .LVU157
 808 0010 0120     		movs	r0, #1
 809 0012 FFF7FEFF 		bl	SPI2_Write
 810              	.LVL58:
 177:user/w25q32.c ****     SPI2_Write(flashSta); 
 811              		.loc 1 177 5 view .LVU158
 812 0016 2046     		mov	r0, r4
 813 0018 FFF7FEFF 		bl	SPI2_Write
 814              	.LVL59:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 19


 178:user/w25q32.c ****     FLASH_CS_High();    
 815              		.loc 1 178 5 view .LVU159
 816 001c 0122     		movs	r2, #1
 817 001e 1021     		movs	r1, #16
 818 0020 2846     		mov	r0, r5
 819 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 820              	.LVL60:
 179:user/w25q32.c **** }
 821              		.loc 1 179 1 is_stmt 0 view .LVU160
 822 0026 38BD     		pop	{r3, r4, r5, pc}
 823              	.L56:
 824              		.align	2
 825              	.L55:
 826 0028 00000240 		.word	1073872896
 827              		.cfi_endproc
 828              	.LFE144:
 830              		.section	.text.FlashPage_Write,"ax",%progbits
 831              		.align	1
 832              		.global	FlashPage_Write
 833              		.syntax unified
 834              		.thumb
 835              		.thumb_func
 837              	FlashPage_Write:
 838              	.LVL61:
 839              	.LFB145:
 180:user/w25q32.c **** /*---- F L A S H   P A G E _   W R I T E ----
 181:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 182:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩpageAddr:“≥ÔøΩÔøΩ÷∑ÔøΩÔøΩÔøΩ⁄∫ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩŸ≥ÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩ–°
 183:user/w25q32.c ****           *ptr:     ÷∏ÔøΩÔøΩ“™–¥ÔøΩÔøΩÔøΩÔøΩÔøΩ›µÔøΩÔøΩÔøΩ÷∑ÔøΩÔøΩ
 184:user/w25q32.c ****           pageSize: “≥ÔøΩƒ¥ÔøΩ–°ÔøΩÔøΩ“ªÔøΩÔøΩÔøΩÔøΩ FLASH_PAGE_SIZE 
 185:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 186:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ⁄¥ÔøΩflash ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩƒµÔøΩ÷∑ŒªŒ™24bit ÔøΩÔøΩ
 187:user/w25q32.c ****           ÔøΩÔøΩÔøΩ–°ÔøΩÔøΩ“≥ÔøΩÔøΩŒßÔøΩÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩÔøΩÔøΩ‘≠ÔøΩÔøΩÔøΩÊ¥¢ÔøΩÔøΩÔøΩÔøΩÔøΩ›≤ÔøΩÔø
 188:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ13:52:53-------
 189:user/w25q32.c **** void FlashPage_Write(uint16_t pageAddr,uint8_t *ptr,uint32_t pageSize)
 190:user/w25q32.c **** {
 840              		.loc 1 190 1 is_stmt 1 view -0
 841              		.cfi_startproc
 842              		@ args = 0, pretend = 0, frame = 0
 843              		@ frame_needed = 0, uses_anonymous_args = 0
 844              		.loc 1 190 1 is_stmt 0 view .LVU162
 845 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 846              	.LCFI23:
 847              		.cfi_def_cfa_offset 24
 848              		.cfi_offset 3, -24
 849              		.cfi_offset 4, -20
 850              		.cfi_offset 5, -16
 851              		.cfi_offset 6, -12
 852              		.cfi_offset 7, -8
 853              		.cfi_offset 14, -4
 854 0002 0546     		mov	r5, r0
 855 0004 0C46     		mov	r4, r1
 856 0006 1646     		mov	r6, r2
 191:user/w25q32.c ****     uint32_t addr,i;
 857              		.loc 1 191 5 is_stmt 1 view .LVU163
 192:user/w25q32.c **** //	    addr=pageAddr*FLASH_PAGE_SIZE;
 193:user/w25q32.c ****     addr=((uint32_t)pageAddr)<<8;  
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 20


 858              		.loc 1 193 5 view .LVU164
 859              		.loc 1 193 9 is_stmt 0 view .LVU165
 860 0008 0702     		lsls	r7, r0, #8
 861              	.LVL62:
 194:user/w25q32.c ****     FlashWait_Busy();
 862              		.loc 1 194 5 is_stmt 1 view .LVU166
 863 000a FFF7FEFF 		bl	FlashWait_Busy
 864              	.LVL63:
 195:user/w25q32.c ****     FlashWriteEnable();
 865              		.loc 1 195 5 view .LVU167
 866 000e FFF7FEFF 		bl	FlashWriteEnable
 867              	.LVL64:
 196:user/w25q32.c ****     FLASH_CS_Low();
 868              		.loc 1 196 5 view .LVU168
 869 0012 0022     		movs	r2, #0
 870 0014 1021     		movs	r1, #16
 871 0016 0F48     		ldr	r0, .L61
 872 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 873              	.LVL65:
 874              		.loc 1 196 19 view .LVU169
 197:user/w25q32.c ****     SPI2_Write(PP_CMD); 
 875              		.loc 1 197 5 view .LVU170
 876 001c 0220     		movs	r0, #2
 877 001e FFF7FEFF 		bl	SPI2_Write
 878              	.LVL66:
 198:user/w25q32.c ****     SPI2_Write(addr>>16);
 879              		.loc 1 198 5 view .LVU171
 880 0022 380C     		lsrs	r0, r7, #16
 881 0024 FFF7FEFF 		bl	SPI2_Write
 882              	.LVL67:
 199:user/w25q32.c ****     SPI2_Write(addr>>8);
 883              		.loc 1 199 5 view .LVU172
 884 0028 E8B2     		uxtb	r0, r5
 885 002a FFF7FEFF 		bl	SPI2_Write
 886              	.LVL68:
 200:user/w25q32.c ****     SPI2_Write(addr); 
 887              		.loc 1 200 5 view .LVU173
 888 002e 0020     		movs	r0, #0
 889 0030 FFF7FEFF 		bl	SPI2_Write
 890              	.LVL69:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 891              		.loc 1 201 5 view .LVU174
 892              		.loc 1 201 10 is_stmt 0 view .LVU175
 893 0034 0025     		movs	r5, #0
 894              		.loc 1 201 5 view .LVU176
 895 0036 04E0     		b	.L58
 896              	.LVL70:
 897              	.L59:
 202:user/w25q32.c ****         SPI2_Write(*ptr++); 
 898              		.loc 1 202 9 is_stmt 1 discriminator 3 view .LVU177
 899              		.loc 1 202 9 is_stmt 0 discriminator 3 view .LVU178
 900 0038 14F8010B 		ldrb	r0, [r4], #1	@ zero_extendqisi2
 901              	.LVL71:
 902              		.loc 1 202 9 discriminator 3 view .LVU179
 903 003c FFF7FEFF 		bl	SPI2_Write
 904              	.LVL72:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 21


 905              		.loc 1 201 24 is_stmt 1 discriminator 3 view .LVU180
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 906              		.loc 1 201 25 is_stmt 0 discriminator 3 view .LVU181
 907 0040 0135     		adds	r5, r5, #1
 908              	.LVL73:
 909              	.L58:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 910              		.loc 1 201 13 is_stmt 1 discriminator 1 view .LVU182
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 911              		.loc 1 201 5 is_stmt 0 discriminator 1 view .LVU183
 912 0042 B542     		cmp	r5, r6
 913 0044 F8D3     		bcc	.L59
 203:user/w25q32.c ****     FLASH_CS_High();    
 914              		.loc 1 203 5 is_stmt 1 view .LVU184
 915 0046 0122     		movs	r2, #1
 916 0048 1021     		movs	r1, #16
 917 004a 0248     		ldr	r0, .L61
 918 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 919              	.LVL74:
 204:user/w25q32.c **** }
 920              		.loc 1 204 1 is_stmt 0 view .LVU185
 921 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 922              	.LVL75:
 923              	.L62:
 924              		.loc 1 204 1 view .LVU186
 925 0052 00BF     		.align	2
 926              	.L61:
 927 0054 00000240 		.word	1073872896
 928              		.cfi_endproc
 929              	.LFE145:
 931              		.section	.text.FlashChip_Erase,"ax",%progbits
 932              		.align	1
 933              		.global	FlashChip_Erase
 934              		.syntax unified
 935              		.thumb
 936              		.thumb_func
 938              	FlashChip_Erase:
 939              	.LFB146:
 205:user/w25q32.c **** void FlashChip_Erase(void)
 206:user/w25q32.c **** {
 940              		.loc 1 206 1 is_stmt 1 view -0
 941              		.cfi_startproc
 942              		@ args = 0, pretend = 0, frame = 0
 943              		@ frame_needed = 0, uses_anonymous_args = 0
 944 0000 10B5     		push	{r4, lr}
 945              	.LCFI24:
 946              		.cfi_def_cfa_offset 8
 947              		.cfi_offset 4, -8
 948              		.cfi_offset 14, -4
 207:user/w25q32.c ****     FlashWait_Busy();
 949              		.loc 1 207 5 view .LVU188
 950 0002 FFF7FEFF 		bl	FlashWait_Busy
 951              	.LVL76:
 208:user/w25q32.c ****     FlashWriteEnable();    
 952              		.loc 1 208 5 view .LVU189
 953 0006 FFF7FEFF 		bl	FlashWriteEnable
 954              	.LVL77:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 22


 209:user/w25q32.c ****     FLASH_CS_Low();
 955              		.loc 1 209 5 view .LVU190
 956 000a 074C     		ldr	r4, .L65
 957 000c 0022     		movs	r2, #0
 958 000e 1021     		movs	r1, #16
 959 0010 2046     		mov	r0, r4
 960 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 961              	.LVL78:
 962              		.loc 1 209 19 view .LVU191
 210:user/w25q32.c ****     SPI2_Write(CE_CMD);     
 963              		.loc 1 210 5 view .LVU192
 964 0016 6020     		movs	r0, #96
 965 0018 FFF7FEFF 		bl	SPI2_Write
 966              	.LVL79:
 211:user/w25q32.c ****     FLASH_CS_High();    
 967              		.loc 1 211 5 view .LVU193
 968 001c 0122     		movs	r2, #1
 969 001e 1021     		movs	r1, #16
 970 0020 2046     		mov	r0, r4
 971 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 972              	.LVL80:
 212:user/w25q32.c **** }
 973              		.loc 1 212 1 is_stmt 0 view .LVU194
 974 0026 10BD     		pop	{r4, pc}
 975              	.L66:
 976              		.align	2
 977              	.L65:
 978 0028 00000240 		.word	1073872896
 979              		.cfi_endproc
 980              	.LFE146:
 982              		.section	.text.FlashBlock_Erase,"ax",%progbits
 983              		.align	1
 984              		.global	FlashBlock_Erase
 985              		.syntax unified
 986              		.thumb
 987              		.thumb_func
 989              	FlashBlock_Erase:
 990              	.LVL81:
 991              	.LFB147:
 213:user/w25q32.c **** /*---- F L A S H   B L O C K _   E R A S E ----
 214:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 215:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩblock: 0~256
 216:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 217:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 218:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ14:43:05-------
 219:user/w25q32.c **** void FlashBlock_Erase(uint8_t blockAddr)
 220:user/w25q32.c **** {
 992              		.loc 1 220 1 is_stmt 1 view -0
 993              		.cfi_startproc
 994              		@ args = 0, pretend = 0, frame = 0
 995              		@ frame_needed = 0, uses_anonymous_args = 0
 996              		.loc 1 220 1 is_stmt 0 view .LVU196
 997 0000 38B5     		push	{r3, r4, r5, lr}
 998              	.LCFI25:
 999              		.cfi_def_cfa_offset 16
 1000              		.cfi_offset 3, -16
 1001              		.cfi_offset 4, -12
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 23


 1002              		.cfi_offset 5, -8
 1003              		.cfi_offset 14, -4
 1004 0002 0446     		mov	r4, r0
 221:user/w25q32.c ****     uint32_t addr;//,i;
 1005              		.loc 1 221 5 is_stmt 1 view .LVU197
 222:user/w25q32.c **** //	    addr=blockAddr*16*4096;  //√øÔøΩÔøΩblockÔøΩÔøΩ16ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ√øÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
 223:user/w25q32.c ****     
 224:user/w25q32.c **** 
 225:user/w25q32.c ****     addr=((uint32_t)blockAddr)<<16;
 1006              		.loc 1 225 5 view .LVU198
 226:user/w25q32.c ****     FlashWait_Busy();
 1007              		.loc 1 226 5 view .LVU199
 1008 0004 FFF7FEFF 		bl	FlashWait_Busy
 1009              	.LVL82:
 227:user/w25q32.c ****     FlashWriteEnable();
 1010              		.loc 1 227 5 view .LVU200
 1011 0008 FFF7FEFF 		bl	FlashWriteEnable
 1012              	.LVL83:
 228:user/w25q32.c ****     FLASH_CS_Low();
 1013              		.loc 1 228 5 view .LVU201
 1014 000c 0B4D     		ldr	r5, .L69
 1015 000e 0022     		movs	r2, #0
 1016 0010 1021     		movs	r1, #16
 1017 0012 2846     		mov	r0, r5
 1018 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1019              	.LVL84:
 1020              		.loc 1 228 19 view .LVU202
 229:user/w25q32.c ****     SPI2_Write(BE_CMD); 
 1021              		.loc 1 229 5 view .LVU203
 1022 0018 5220     		movs	r0, #82
 1023 001a FFF7FEFF 		bl	SPI2_Write
 1024              	.LVL85:
 230:user/w25q32.c ****     SPI2_Write(addr>>16);
 1025              		.loc 1 230 5 view .LVU204
 1026 001e 2046     		mov	r0, r4
 1027 0020 FFF7FEFF 		bl	SPI2_Write
 1028              	.LVL86:
 231:user/w25q32.c ****     SPI2_Write(addr>>8);
 1029              		.loc 1 231 5 view .LVU205
 1030 0024 0020     		movs	r0, #0
 1031 0026 FFF7FEFF 		bl	SPI2_Write
 1032              	.LVL87:
 232:user/w25q32.c ****     SPI2_Write(addr); 
 1033              		.loc 1 232 5 view .LVU206
 1034 002a 0020     		movs	r0, #0
 1035 002c FFF7FEFF 		bl	SPI2_Write
 1036              	.LVL88:
 233:user/w25q32.c ****     FLASH_CS_High();    
 1037              		.loc 1 233 5 view .LVU207
 1038 0030 0122     		movs	r2, #1
 1039 0032 1021     		movs	r1, #16
 1040 0034 2846     		mov	r0, r5
 1041 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1042              	.LVL89:
 234:user/w25q32.c **** }
 1043              		.loc 1 234 1 is_stmt 0 view .LVU208
 1044 003a 38BD     		pop	{r3, r4, r5, pc}
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 24


 1045              	.L70:
 1046              		.align	2
 1047              	.L69:
 1048 003c 00000240 		.word	1073872896
 1049              		.cfi_endproc
 1050              	.LFE147:
 1052              		.section	.text.FlashSector_Erase,"ax",%progbits
 1053              		.align	1
 1054              		.global	FlashSector_Erase
 1055              		.syntax unified
 1056              		.thumb
 1057              		.thumb_func
 1059              	FlashSector_Erase:
 1060              	.LVL90:
 1061              	.LFB148:
 235:user/w25q32.c **** /*---- F L A S H   S E C T O R _   E R A S E ----
 236:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 237:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩsectorAddr: 0~4096
 238:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 239:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 240:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ14:45:28-------
 241:user/w25q32.c **** void FlashSector_Erase(uint16_t sectorAddr)
 242:user/w25q32.c **** {
 1062              		.loc 1 242 1 is_stmt 1 view -0
 1063              		.cfi_startproc
 1064              		@ args = 0, pretend = 0, frame = 0
 1065              		@ frame_needed = 0, uses_anonymous_args = 0
 1066              		.loc 1 242 1 is_stmt 0 view .LVU210
 1067 0000 38B5     		push	{r3, r4, r5, lr}
 1068              	.LCFI26:
 1069              		.cfi_def_cfa_offset 16
 1070              		.cfi_offset 3, -16
 1071              		.cfi_offset 4, -12
 1072              		.cfi_offset 5, -8
 1073              		.cfi_offset 14, -4
 243:user/w25q32.c ****     uint32_t addr;//,i;
 1074              		.loc 1 243 5 is_stmt 1 view .LVU211
 244:user/w25q32.c ****     addr=((uint32_t)sectorAddr)<<12;
 1075              		.loc 1 244 5 view .LVU212
 1076              		.loc 1 244 9 is_stmt 0 view .LVU213
 1077 0002 0403     		lsls	r4, r0, #12
 1078              	.LVL91:
 245:user/w25q32.c ****     FlashWait_Busy();
 1079              		.loc 1 245 5 is_stmt 1 view .LVU214
 1080 0004 FFF7FEFF 		bl	FlashWait_Busy
 1081              	.LVL92:
 246:user/w25q32.c ****     FlashWriteEnable();
 1082              		.loc 1 246 5 view .LVU215
 1083 0008 FFF7FEFF 		bl	FlashWriteEnable
 1084              	.LVL93:
 247:user/w25q32.c ****     FLASH_CS_Low();
 1085              		.loc 1 247 5 view .LVU216
 1086 000c 0D4D     		ldr	r5, .L73
 1087 000e 0022     		movs	r2, #0
 1088 0010 1021     		movs	r1, #16
 1089 0012 2846     		mov	r0, r5
 1090 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 25


 1091              	.LVL94:
 1092              		.loc 1 247 19 view .LVU217
 248:user/w25q32.c ****     SPI2_Write(SE_CMD); 
 1093              		.loc 1 248 5 view .LVU218
 1094 0018 2020     		movs	r0, #32
 1095 001a FFF7FEFF 		bl	SPI2_Write
 1096              	.LVL95:
 249:user/w25q32.c ****     SPI2_Write(addr>>16);
 1097              		.loc 1 249 5 view .LVU219
 1098 001e C4F30740 		ubfx	r0, r4, #16, #8
 1099 0022 FFF7FEFF 		bl	SPI2_Write
 1100              	.LVL96:
 250:user/w25q32.c ****     SPI2_Write(addr>>8);
 1101              		.loc 1 250 5 view .LVU220
 1102              		.loc 1 250 20 is_stmt 0 view .LVU221
 1103 0026 200A     		lsrs	r0, r4, #8
 1104              		.loc 1 250 5 view .LVU222
 1105 0028 00F0F000 		and	r0, r0, #240
 1106 002c FFF7FEFF 		bl	SPI2_Write
 1107              	.LVL97:
 251:user/w25q32.c ****     SPI2_Write(addr); 
 1108              		.loc 1 251 5 is_stmt 1 view .LVU223
 1109 0030 0020     		movs	r0, #0
 1110 0032 FFF7FEFF 		bl	SPI2_Write
 1111              	.LVL98:
 252:user/w25q32.c ****     FLASH_CS_High();    
 1112              		.loc 1 252 5 view .LVU224
 1113 0036 0122     		movs	r2, #1
 1114 0038 1021     		movs	r1, #16
 1115 003a 2846     		mov	r0, r5
 1116 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1117              	.LVL99:
 253:user/w25q32.c **** }
 1118              		.loc 1 253 1 is_stmt 0 view .LVU225
 1119 0040 38BD     		pop	{r3, r4, r5, pc}
 1120              	.LVL100:
 1121              	.L74:
 1122              		.loc 1 253 1 view .LVU226
 1123 0042 00BF     		.align	2
 1124              	.L73:
 1125 0044 00000240 		.word	1073872896
 1126              		.cfi_endproc
 1127              	.LFE148:
 1129              		.section	.text.FlashRead,"ax",%progbits
 1130              		.align	1
 1131              		.global	FlashRead
 1132              		.syntax unified
 1133              		.thumb
 1134              		.thumb_func
 1136              	FlashRead:
 1137              	.LVL101:
 1138              	.LFB149:
 254:user/w25q32.c **** void FlashRead(uint32_t addr,uint8_t *ptr,uint32_t len)
 255:user/w25q32.c **** {
 1139              		.loc 1 255 1 is_stmt 1 view -0
 1140              		.cfi_startproc
 1141              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 26


 1142              		@ frame_needed = 0, uses_anonymous_args = 0
 1143              		.loc 1 255 1 is_stmt 0 view .LVU228
 1144 0000 70B5     		push	{r4, r5, r6, lr}
 1145              	.LCFI27:
 1146              		.cfi_def_cfa_offset 16
 1147              		.cfi_offset 4, -16
 1148              		.cfi_offset 5, -12
 1149              		.cfi_offset 6, -8
 1150              		.cfi_offset 14, -4
 1151 0002 0C46     		mov	r4, r1
 1152 0004 1646     		mov	r6, r2
 256:user/w25q32.c ****     uint32_t addr_tmp,i;
 1153              		.loc 1 256 5 is_stmt 1 view .LVU229
 257:user/w25q32.c ****     addr_tmp=addr&0x00ffffff;
 1154              		.loc 1 257 5 view .LVU230
 1155              		.loc 1 257 13 is_stmt 0 view .LVU231
 1156 0006 20F07F45 		bic	r5, r0, #-16777216
 1157              	.LVL102:
 258:user/w25q32.c ****     FlashWait_Busy();    
 1158              		.loc 1 258 5 is_stmt 1 view .LVU232
 1159 000a FFF7FEFF 		bl	FlashWait_Busy
 1160              	.LVL103:
 259:user/w25q32.c ****     FLASH_CS_Low();
 1161              		.loc 1 259 5 view .LVU233
 1162 000e 0022     		movs	r2, #0
 1163 0010 1021     		movs	r1, #16
 1164 0012 0F48     		ldr	r0, .L79
 1165 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1166              	.LVL104:
 1167              		.loc 1 259 19 view .LVU234
 260:user/w25q32.c ****     SPI2_Write(READ_CMD); 
 1168              		.loc 1 260 5 view .LVU235
 1169 0018 0320     		movs	r0, #3
 1170 001a FFF7FEFF 		bl	SPI2_Write
 1171              	.LVL105:
 261:user/w25q32.c ****     SPI2_Write(addr_tmp>>16);
 1172              		.loc 1 261 5 view .LVU236
 1173 001e 280C     		lsrs	r0, r5, #16
 1174 0020 FFF7FEFF 		bl	SPI2_Write
 1175              	.LVL106:
 262:user/w25q32.c ****     SPI2_Write(addr_tmp>>8);
 1176              		.loc 1 262 5 view .LVU237
 1177 0024 C5F30720 		ubfx	r0, r5, #8, #8
 1178 0028 FFF7FEFF 		bl	SPI2_Write
 1179              	.LVL107:
 263:user/w25q32.c ****     SPI2_Write(addr_tmp); 
 1180              		.loc 1 263 5 view .LVU238
 1181 002c E8B2     		uxtb	r0, r5
 1182 002e FFF7FEFF 		bl	SPI2_Write
 1183              	.LVL108:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1184              		.loc 1 264 5 view .LVU239
 1185              		.loc 1 264 10 is_stmt 0 view .LVU240
 1186 0032 0025     		movs	r5, #0
 1187              	.LVL109:
 1188              		.loc 1 264 5 view .LVU241
 1189 0034 04E0     		b	.L76
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 27


 1190              	.LVL110:
 1191              	.L77:
 265:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1192              		.loc 1 265 9 is_stmt 1 discriminator 3 view .LVU242
 1193              		.loc 1 265 16 is_stmt 0 discriminator 3 view .LVU243
 1194 0036 FFF7FEFF 		bl	SPI2_Read
 1195              	.LVL111:
 1196              		.loc 1 265 15 discriminator 3 view .LVU244
 1197 003a 04F8010B 		strb	r0, [r4], #1
 1198              	.LVL112:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1199              		.loc 1 264 19 is_stmt 1 discriminator 3 view .LVU245
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1200              		.loc 1 264 20 is_stmt 0 discriminator 3 view .LVU246
 1201 003e 0135     		adds	r5, r5, #1
 1202              	.LVL113:
 1203              	.L76:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1204              		.loc 1 264 13 is_stmt 1 discriminator 1 view .LVU247
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1205              		.loc 1 264 5 is_stmt 0 discriminator 1 view .LVU248
 1206 0040 B542     		cmp	r5, r6
 1207 0042 F8D3     		bcc	.L77
 266:user/w25q32.c ****     FLASH_CS_High();    
 1208              		.loc 1 266 5 is_stmt 1 view .LVU249
 1209 0044 0122     		movs	r2, #1
 1210 0046 1021     		movs	r1, #16
 1211 0048 0148     		ldr	r0, .L79
 1212 004a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1213              	.LVL114:
 267:user/w25q32.c **** }
 1214              		.loc 1 267 1 is_stmt 0 view .LVU250
 1215 004e 70BD     		pop	{r4, r5, r6, pc}
 1216              	.LVL115:
 1217              	.L80:
 1218              		.loc 1 267 1 view .LVU251
 1219              		.align	2
 1220              	.L79:
 1221 0050 00000240 		.word	1073872896
 1222              		.cfi_endproc
 1223              	.LFE149:
 1225              		.section	.text.FlashPage_Read,"ax",%progbits
 1226              		.align	1
 1227              		.global	FlashPage_Read
 1228              		.syntax unified
 1229              		.thumb
 1230              		.thumb_func
 1232              	FlashPage_Read:
 1233              	.LVL116:
 1234              	.LFB150:
 268:user/w25q32.c **** /*---- F L A S H   P A G E _   R E A D ----
 269:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 270:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩpageAddr:“≥ÔøΩÔøΩ÷∑ÔøΩÔøΩÔøΩ⁄∫ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩŸ≥ÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩ–°
 271:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 272:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 273:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ15:11:50-------
 274:user/w25q32.c **** void FlashPage_Read(uint16_t pageAddr,uint8_t *ptr,uint32_t pageSize)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 28


 275:user/w25q32.c **** {
 1235              		.loc 1 275 1 is_stmt 1 view -0
 1236              		.cfi_startproc
 1237              		@ args = 0, pretend = 0, frame = 0
 1238              		@ frame_needed = 0, uses_anonymous_args = 0
 1239              		.loc 1 275 1 is_stmt 0 view .LVU253
 1240 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1241              	.LCFI28:
 1242              		.cfi_def_cfa_offset 24
 1243              		.cfi_offset 3, -24
 1244              		.cfi_offset 4, -20
 1245              		.cfi_offset 5, -16
 1246              		.cfi_offset 6, -12
 1247              		.cfi_offset 7, -8
 1248              		.cfi_offset 14, -4
 1249 0002 0546     		mov	r5, r0
 1250 0004 0C46     		mov	r4, r1
 1251 0006 1646     		mov	r6, r2
 276:user/w25q32.c ****     uint32_t addr,i;
 1252              		.loc 1 276 5 is_stmt 1 view .LVU254
 277:user/w25q32.c **** //	    addr=pageAddr*FLASH_PAGE_SIZE;
 278:user/w25q32.c ****     addr=((uint32_t)pageAddr)<<8;
 1253              		.loc 1 278 5 view .LVU255
 1254              		.loc 1 278 9 is_stmt 0 view .LVU256
 1255 0008 0702     		lsls	r7, r0, #8
 1256              	.LVL117:
 279:user/w25q32.c ****     FlashWait_Busy();   
 1257              		.loc 1 279 5 is_stmt 1 view .LVU257
 1258 000a FFF7FEFF 		bl	FlashWait_Busy
 1259              	.LVL118:
 280:user/w25q32.c ****     FLASH_CS_Low();
 1260              		.loc 1 280 5 view .LVU258
 1261 000e 0022     		movs	r2, #0
 1262 0010 1021     		movs	r1, #16
 1263 0012 0F48     		ldr	r0, .L85
 1264 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1265              	.LVL119:
 1266              		.loc 1 280 19 view .LVU259
 281:user/w25q32.c ****     SPI2_Write(READ_CMD); 
 1267              		.loc 1 281 5 view .LVU260
 1268 0018 0320     		movs	r0, #3
 1269 001a FFF7FEFF 		bl	SPI2_Write
 1270              	.LVL120:
 282:user/w25q32.c ****     SPI2_Write(addr>>16);
 1271              		.loc 1 282 5 view .LVU261
 1272 001e 380C     		lsrs	r0, r7, #16
 1273 0020 FFF7FEFF 		bl	SPI2_Write
 1274              	.LVL121:
 283:user/w25q32.c ****     SPI2_Write(addr>>8);
 1275              		.loc 1 283 5 view .LVU262
 1276 0024 E8B2     		uxtb	r0, r5
 1277 0026 FFF7FEFF 		bl	SPI2_Write
 1278              	.LVL122:
 284:user/w25q32.c ****     SPI2_Write(addr); 
 1279              		.loc 1 284 5 view .LVU263
 1280 002a 0020     		movs	r0, #0
 1281 002c FFF7FEFF 		bl	SPI2_Write
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 29


 1282              	.LVL123:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1283              		.loc 1 285 5 view .LVU264
 1284              		.loc 1 285 10 is_stmt 0 view .LVU265
 1285 0030 0025     		movs	r5, #0
 1286              		.loc 1 285 5 view .LVU266
 1287 0032 04E0     		b	.L82
 1288              	.LVL124:
 1289              	.L83:
 286:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1290              		.loc 1 286 9 is_stmt 1 discriminator 3 view .LVU267
 1291              		.loc 1 286 16 is_stmt 0 discriminator 3 view .LVU268
 1292 0034 FFF7FEFF 		bl	SPI2_Read
 1293              	.LVL125:
 1294              		.loc 1 286 15 discriminator 3 view .LVU269
 1295 0038 04F8010B 		strb	r0, [r4], #1
 1296              	.LVL126:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1297              		.loc 1 285 24 is_stmt 1 discriminator 3 view .LVU270
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1298              		.loc 1 285 25 is_stmt 0 discriminator 3 view .LVU271
 1299 003c 0135     		adds	r5, r5, #1
 1300              	.LVL127:
 1301              	.L82:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1302              		.loc 1 285 13 is_stmt 1 discriminator 1 view .LVU272
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1303              		.loc 1 285 5 is_stmt 0 discriminator 1 view .LVU273
 1304 003e B542     		cmp	r5, r6
 1305 0040 F8D3     		bcc	.L83
 287:user/w25q32.c ****     FLASH_CS_High();    
 1306              		.loc 1 287 5 is_stmt 1 view .LVU274
 1307 0042 0122     		movs	r2, #1
 1308 0044 1021     		movs	r1, #16
 1309 0046 0248     		ldr	r0, .L85
 1310 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1311              	.LVL128:
 288:user/w25q32.c **** }
 1312              		.loc 1 288 1 is_stmt 0 view .LVU275
 1313 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1314              	.LVL129:
 1315              	.L86:
 1316              		.loc 1 288 1 view .LVU276
 1317 004e 00BF     		.align	2
 1318              	.L85:
 1319 0050 00000240 		.word	1073872896
 1320              		.cfi_endproc
 1321              	.LFE150:
 1323              		.section	.text.FlashFastRead,"ax",%progbits
 1324              		.align	1
 1325              		.global	FlashFastRead
 1326              		.syntax unified
 1327              		.thumb
 1328              		.thumb_func
 1330              	FlashFastRead:
 1331              	.LVL130:
 1332              	.LFB151:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 30


 289:user/w25q32.c **** void FlashFastRead(uint32_t addr,uint8_t *ptr,uint32_t len)
 290:user/w25q32.c **** {
 1333              		.loc 1 290 1 is_stmt 1 view -0
 1334              		.cfi_startproc
 1335              		@ args = 0, pretend = 0, frame = 0
 1336              		@ frame_needed = 0, uses_anonymous_args = 0
 1337              		.loc 1 290 1 is_stmt 0 view .LVU278
 1338 0000 70B5     		push	{r4, r5, r6, lr}
 1339              	.LCFI29:
 1340              		.cfi_def_cfa_offset 16
 1341              		.cfi_offset 4, -16
 1342              		.cfi_offset 5, -12
 1343              		.cfi_offset 6, -8
 1344              		.cfi_offset 14, -4
 1345 0002 0C46     		mov	r4, r1
 1346 0004 1646     		mov	r6, r2
 291:user/w25q32.c ****     uint32_t addr_tmp,i;
 1347              		.loc 1 291 5 is_stmt 1 view .LVU279
 292:user/w25q32.c ****     addr_tmp=addr&0x00ffffff;
 1348              		.loc 1 292 5 view .LVU280
 1349              		.loc 1 292 13 is_stmt 0 view .LVU281
 1350 0006 20F07F45 		bic	r5, r0, #-16777216
 1351              	.LVL131:
 293:user/w25q32.c ****     FlashWait_Busy();    
 1352              		.loc 1 293 5 is_stmt 1 view .LVU282
 1353 000a FFF7FEFF 		bl	FlashWait_Busy
 1354              	.LVL132:
 294:user/w25q32.c ****     FLASH_CS_Low();
 1355              		.loc 1 294 5 view .LVU283
 1356 000e 0022     		movs	r2, #0
 1357 0010 1021     		movs	r1, #16
 1358 0012 1148     		ldr	r0, .L91
 1359 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1360              	.LVL133:
 1361              		.loc 1 294 19 view .LVU284
 295:user/w25q32.c ****     SPI2_Write(FREAD_CMD); 
 1362              		.loc 1 295 5 view .LVU285
 1363 0018 0B20     		movs	r0, #11
 1364 001a FFF7FEFF 		bl	SPI2_Write
 1365              	.LVL134:
 296:user/w25q32.c ****     SPI2_Write(addr_tmp>>16);
 1366              		.loc 1 296 5 view .LVU286
 1367 001e 280C     		lsrs	r0, r5, #16
 1368 0020 FFF7FEFF 		bl	SPI2_Write
 1369              	.LVL135:
 297:user/w25q32.c ****     SPI2_Write(addr_tmp>>8);
 1370              		.loc 1 297 5 view .LVU287
 1371 0024 C5F30720 		ubfx	r0, r5, #8, #8
 1372 0028 FFF7FEFF 		bl	SPI2_Write
 1373              	.LVL136:
 298:user/w25q32.c ****     SPI2_Write(addr_tmp); 
 1374              		.loc 1 298 5 view .LVU288
 1375 002c E8B2     		uxtb	r0, r5
 1376 002e FFF7FEFF 		bl	SPI2_Write
 1377              	.LVL137:
 299:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE); 
 1378              		.loc 1 299 5 view .LVU289
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 31


 1379 0032 FF20     		movs	r0, #255
 1380 0034 FFF7FEFF 		bl	SPI2_Write
 1381              	.LVL138:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1382              		.loc 1 300 5 view .LVU290
 1383              		.loc 1 300 10 is_stmt 0 view .LVU291
 1384 0038 0025     		movs	r5, #0
 1385              	.LVL139:
 1386              		.loc 1 300 5 view .LVU292
 1387 003a 04E0     		b	.L88
 1388              	.LVL140:
 1389              	.L89:
 301:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1390              		.loc 1 301 9 is_stmt 1 discriminator 3 view .LVU293
 1391              		.loc 1 301 16 is_stmt 0 discriminator 3 view .LVU294
 1392 003c FFF7FEFF 		bl	SPI2_Read
 1393              	.LVL141:
 1394              		.loc 1 301 15 discriminator 3 view .LVU295
 1395 0040 04F8010B 		strb	r0, [r4], #1
 1396              	.LVL142:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1397              		.loc 1 300 19 is_stmt 1 discriminator 3 view .LVU296
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1398              		.loc 1 300 20 is_stmt 0 discriminator 3 view .LVU297
 1399 0044 0135     		adds	r5, r5, #1
 1400              	.LVL143:
 1401              	.L88:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1402              		.loc 1 300 13 is_stmt 1 discriminator 1 view .LVU298
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1403              		.loc 1 300 5 is_stmt 0 discriminator 1 view .LVU299
 1404 0046 B542     		cmp	r5, r6
 1405 0048 F8D3     		bcc	.L89
 302:user/w25q32.c ****     FLASH_CS_High();    
 1406              		.loc 1 302 5 is_stmt 1 view .LVU300
 1407 004a 0122     		movs	r2, #1
 1408 004c 1021     		movs	r1, #16
 1409 004e 0248     		ldr	r0, .L91
 1410 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1411              	.LVL144:
 303:user/w25q32.c **** }
 1412              		.loc 1 303 1 is_stmt 0 view .LVU301
 1413 0054 70BD     		pop	{r4, r5, r6, pc}
 1414              	.LVL145:
 1415              	.L92:
 1416              		.loc 1 303 1 view .LVU302
 1417 0056 00BF     		.align	2
 1418              	.L91:
 1419 0058 00000240 		.word	1073872896
 1420              		.cfi_endproc
 1421              	.LFE151:
 1423              		.section	.text.read_sector,"ax",%progbits
 1424              		.align	1
 1425              		.global	read_sector
 1426              		.syntax unified
 1427              		.thumb
 1428              		.thumb_func
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 32


 1430              	read_sector:
 1431              	.LVL146:
 1432              	.LFB152:
 304:user/w25q32.c **** // ËØª‰∏Ä‰∏™ÊâáÂå∫ 4K
 305:user/w25q32.c **** void read_sector(uint32_t blk_addr,uint8_t *buf, uint16_t blk_len)
 306:user/w25q32.c **** {
 1433              		.loc 1 306 1 is_stmt 1 view -0
 1434              		.cfi_startproc
 1435              		@ args = 0, pretend = 0, frame = 0
 1436              		@ frame_needed = 0, uses_anonymous_args = 0
 1437              		.loc 1 306 1 is_stmt 0 view .LVU304
 1438 0000 70B5     		push	{r4, r5, r6, lr}
 1439              	.LCFI30:
 1440              		.cfi_def_cfa_offset 16
 1441              		.cfi_offset 4, -16
 1442              		.cfi_offset 5, -12
 1443              		.cfi_offset 6, -8
 1444              		.cfi_offset 14, -4
 1445 0002 0E46     		mov	r6, r1
 307:user/w25q32.c ****     uint32_t page_addr;
 1446              		.loc 1 307 5 is_stmt 1 view .LVU305
 308:user/w25q32.c ****     int i;
 1447              		.loc 1 308 5 view .LVU306
 309:user/w25q32.c ****     // addr = blk_addr*4096;
 310:user/w25q32.c ****     page_addr = blk_addr*16;
 1448              		.loc 1 310 5 view .LVU307
 1449              		.loc 1 310 15 is_stmt 0 view .LVU308
 1450 0004 0501     		lsls	r5, r0, #4
 1451              	.LVL147:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1452              		.loc 1 311 5 is_stmt 1 view .LVU309
 1453              		.loc 1 311 11 is_stmt 0 view .LVU310
 1454 0006 0024     		movs	r4, #0
 1455              		.loc 1 311 5 view .LVU311
 1456 0008 08E0     		b	.L94
 1457              	.LVL148:
 1458              	.L95:
 312:user/w25q32.c ****     {
 313:user/w25q32.c ****         FlashPage_Read(page_addr+i,buf+i*256,256);
 1459              		.loc 1 313 9 is_stmt 1 discriminator 3 view .LVU312
 1460 000a 2819     		adds	r0, r5, r4
 1461 000c 4FF48072 		mov	r2, #256
 1462 0010 06EB0421 		add	r1, r6, r4, lsl #8
 1463 0014 80B2     		uxth	r0, r0
 1464 0016 FFF7FEFF 		bl	FlashPage_Read
 1465              	.LVL149:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1466              		.loc 1 311 24 discriminator 3 view .LVU313
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1467              		.loc 1 311 25 is_stmt 0 discriminator 3 view .LVU314
 1468 001a 0134     		adds	r4, r4, #1
 1469              	.LVL150:
 1470              	.L94:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1471              		.loc 1 311 16 is_stmt 1 discriminator 1 view .LVU315
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1472              		.loc 1 311 5 is_stmt 0 discriminator 1 view .LVU316
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 33


 1473 001c 0F2C     		cmp	r4, #15
 1474 001e F4DD     		ble	.L95
 314:user/w25q32.c ****     }
 315:user/w25q32.c **** }
 1475              		.loc 1 315 1 view .LVU317
 1476 0020 70BD     		pop	{r4, r5, r6, pc}
 1477              		.loc 1 315 1 view .LVU318
 1478              		.cfi_endproc
 1479              	.LFE152:
 1481              		.section	.text.write_sector,"ax",%progbits
 1482              		.align	1
 1483              		.global	write_sector
 1484              		.syntax unified
 1485              		.thumb
 1486              		.thumb_func
 1488              	write_sector:
 1489              	.LVL151:
 1490              	.LFB153:
 316:user/w25q32.c **** // ÂÜô‰∏Ä‰∏™ÊâáÂå∫ 4K
 317:user/w25q32.c **** void write_sector(uint32_t blk_addr,uint8_t *buf, uint16_t blk_len)
 318:user/w25q32.c **** {
 1491              		.loc 1 318 1 is_stmt 1 view -0
 1492              		.cfi_startproc
 1493              		@ args = 0, pretend = 0, frame = 0
 1494              		@ frame_needed = 0, uses_anonymous_args = 0
 1495              		.loc 1 318 1 is_stmt 0 view .LVU320
 1496 0000 70B5     		push	{r4, r5, r6, lr}
 1497              	.LCFI31:
 1498              		.cfi_def_cfa_offset 16
 1499              		.cfi_offset 4, -16
 1500              		.cfi_offset 5, -12
 1501              		.cfi_offset 6, -8
 1502              		.cfi_offset 14, -4
 1503 0002 0546     		mov	r5, r0
 1504 0004 0E46     		mov	r6, r1
 319:user/w25q32.c ****     uint32_t page_addr;
 1505              		.loc 1 319 5 is_stmt 1 view .LVU321
 320:user/w25q32.c ****     int i;
 1506              		.loc 1 320 5 view .LVU322
 321:user/w25q32.c ****     // addr = blk_addr*4096;
 322:user/w25q32.c ****     FlashSector_Erase(blk_addr);
 1507              		.loc 1 322 5 view .LVU323
 1508 0006 80B2     		uxth	r0, r0
 1509              	.LVL152:
 1510              		.loc 1 322 5 is_stmt 0 view .LVU324
 1511 0008 FFF7FEFF 		bl	FlashSector_Erase
 1512              	.LVL153:
 323:user/w25q32.c ****     page_addr = blk_addr*16;
 1513              		.loc 1 323 5 is_stmt 1 view .LVU325
 1514              		.loc 1 323 15 is_stmt 0 view .LVU326
 1515 000c 2D01     		lsls	r5, r5, #4
 1516              	.LVL154:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1517              		.loc 1 324 5 is_stmt 1 view .LVU327
 1518              		.loc 1 324 11 is_stmt 0 view .LVU328
 1519 000e 0024     		movs	r4, #0
 1520              		.loc 1 324 5 view .LVU329
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 34


 1521 0010 08E0     		b	.L98
 1522              	.LVL155:
 1523              	.L99:
 325:user/w25q32.c ****     {
 326:user/w25q32.c ****         FlashPage_Write(page_addr+i,buf+i*256,256);
 1524              		.loc 1 326 9 is_stmt 1 discriminator 3 view .LVU330
 1525 0012 2819     		adds	r0, r5, r4
 1526 0014 4FF48072 		mov	r2, #256
 1527 0018 06EB0421 		add	r1, r6, r4, lsl #8
 1528 001c 80B2     		uxth	r0, r0
 1529 001e FFF7FEFF 		bl	FlashPage_Write
 1530              	.LVL156:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1531              		.loc 1 324 24 discriminator 3 view .LVU331
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1532              		.loc 1 324 25 is_stmt 0 discriminator 3 view .LVU332
 1533 0022 0134     		adds	r4, r4, #1
 1534              	.LVL157:
 1535              	.L98:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1536              		.loc 1 324 16 is_stmt 1 discriminator 1 view .LVU333
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1537              		.loc 1 324 5 is_stmt 0 discriminator 1 view .LVU334
 1538 0024 0F2C     		cmp	r4, #15
 1539 0026 F4DD     		ble	.L99
 327:user/w25q32.c ****     }
 328:user/w25q32.c **** }
 1540              		.loc 1 328 1 view .LVU335
 1541 0028 70BD     		pop	{r4, r5, r6, pc}
 1542              		.loc 1 328 1 view .LVU336
 1543              		.cfi_endproc
 1544              	.LFE153:
 1546              		.text
 1547              	.Letext0:
 1548              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1549              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1550              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1551              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1552              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1553              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1554              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 1555              		.file 9 "user/w25q32.h"
 1556              		.file 10 "Inc/spi.h"
 1557              		.file 11 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\
 1558              		.file 12 "<built-in>"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 35


DEFINED SYMBOLS
                            *ABS*:00000000 w25q32.c
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:20     .text.SPI2_Write:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:26     .text.SPI2_Write:00000000 SPI2_Write
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:61     .text.SPI2_Write:0000001c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:66     .text.SPI2_Read:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:72     .text.SPI2_Read:00000000 SPI2_Read
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:109    .text.SPI2_Read:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:114    .text.FlashWait_Busy:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:120    .text.FlashWait_Busy:00000000 FlashWait_Busy
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:183    .text.FlashWait_Busy:00000038 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:188    .text.FlashGet_Info:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:194    .text.FlashGet_Info:00000000 FlashGet_Info
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:279    .text.FlashGet_Info:00000058 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:285    .text.FlashGet_ElectronicInfo:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:291    .text.FlashGet_ElectronicInfo:00000000 FlashGet_ElectronicInfo
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:378    .text.FlashGet_ElectronicInfo:0000005c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:384    .rodata.SpiFlash_Init.str1.4:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:405    .text.SpiFlash_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:411    .text.SpiFlash_Init:00000000 SpiFlash_Init
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:515    .text.SpiFlash_Init:00000080 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:525    .text.FlashEnter_DeepPowerDown:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:531    .text.FlashEnter_DeepPowerDown:00000000 FlashEnter_DeepPowerDown
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:565    .text.FlashEnter_DeepPowerDown:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:570    .text.FlashReleaseFrom_DeepPowerDown:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:576    .text.FlashReleaseFrom_DeepPowerDown:00000000 FlashReleaseFrom_DeepPowerDown
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:610    .text.FlashReleaseFrom_DeepPowerDown:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:615    .text.FlashReleaseFrom_DeepPowerDownE:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:621    .text.FlashReleaseFrom_DeepPowerDownE:00000000 FlashReleaseFrom_DeepPowerDownE
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:680    .text.FlashReleaseFrom_DeepPowerDownE:0000003c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:685    .text.FlashWriteEnable:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:691    .text.FlashWriteEnable:00000000 FlashWriteEnable
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:725    .text.FlashWriteEnable:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:730    .text.FlashWriteDisable:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:736    .text.FlashWriteDisable:00000000 FlashWriteDisable
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:770    .text.FlashWriteDisable:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:775    .text.FlashWrite_StaRegister:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:781    .text.FlashWrite_StaRegister:00000000 FlashWrite_StaRegister
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:826    .text.FlashWrite_StaRegister:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:831    .text.FlashPage_Write:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:837    .text.FlashPage_Write:00000000 FlashPage_Write
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:927    .text.FlashPage_Write:00000054 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:932    .text.FlashChip_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:938    .text.FlashChip_Erase:00000000 FlashChip_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:978    .text.FlashChip_Erase:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:983    .text.FlashBlock_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:989    .text.FlashBlock_Erase:00000000 FlashBlock_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1048   .text.FlashBlock_Erase:0000003c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1053   .text.FlashSector_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1059   .text.FlashSector_Erase:00000000 FlashSector_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1125   .text.FlashSector_Erase:00000044 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1130   .text.FlashRead:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1136   .text.FlashRead:00000000 FlashRead
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1221   .text.FlashRead:00000050 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1226   .text.FlashPage_Read:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1232   .text.FlashPage_Read:00000000 FlashPage_Read
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1319   .text.FlashPage_Read:00000050 $d
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s 			page 36


C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1324   .text.FlashFastRead:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1330   .text.FlashFastRead:00000000 FlashFastRead
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1419   .text.FlashFastRead:00000058 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1424   .text.read_sector:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1430   .text.read_sector:00000000 read_sector
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1482   .text.write_sector:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4OFTdG.s:1488   .text.write_sector:00000000 write_sector

UNDEFINED SYMBOLS
HAL_SPI_Transmit
hspi1
HAL_SPI_TransmitReceive
HAL_GPIO_WritePin
printf
puts
