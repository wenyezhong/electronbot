ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"w25q32.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.SPI2_Write,"ax",%progbits
  20              		.align	1
  21              		.global	SPI2_Write
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	SPI2_Write:
  27              	.LVL0:
  28              	.LFB133:
  29              		.file 1 "user/w25q32.c"
   1:user/w25q32.c **** /* ---------------------------------- File Description --------------------------------------------
   2:user/w25q32.c **** „ÄêÊñá‰ª∂ÂäüËÉΩ„ÄëÔºöÊú¨Êñá‰ª∂‰∏∫ W25Q128  SpiFLASHËäØÁâáÈ©±Âä®Êñá‰ª∂
   3:user/w25q32.c ****               W25Q128  Â≠òÂÇ®Èáè‰∏∫128M bit  ÂàÜ‰∏∫4096‰∏™ÊâáÂå∫ÔºåÊØè‰∏™ÊâáÂå∫Êúâ4K byte  16‰∏™Êâá
   4:user/w25q32.c ****               ÊØèpage ‰∏∫256‰∏™Â≠óËäÇ  ÊÄªÂÖ±65536È°µ   ÊØè‰∏™ÊâáÂå∫16È°µ
   5:user/w25q32.c ****               ÊúÄÂø´ËÆøÈóÆÈÄüÂ∫¶È´òËææ104MHz
   6:user/w25q32.c **** „ÄêÂàõÂª∫Êó∂Èó¥„ÄëÔºö2012Âπ¥10Êúà22Êó•ÊòüÊúü‰∏Ä13:20:40
   7:user/w25q32.c **** „ÄêÊñá‰ª∂ÁâàÊú¨„ÄëÔºöV1.0
   8:user/w25q32.c **** „Äê‰ΩúËÄÖÂ£∞Êòé„ÄëÔºöÊú¨Êñá‰ª∂‰ΩúËÄÖ‰∏∫Ê∏©‰∏ö‰∏≠,ÂèØÈÄöËøáemail‰∏é‰ΩúËÄÖËÅîÁ≥ª: eric540@163.com
   9:user/w25q32.c **** ------------------------------------------------------------------------------------------ */
  10:user/w25q32.c **** 
  11:user/w25q32.c **** #include "w25q32.h"
  12:user/w25q32.c **** #include <stdio.h>
  13:user/w25q32.c **** 
  14:user/w25q32.c **** void SPI2_Write(uint8_t dat)
  15:user/w25q32.c **** {
  30              		.loc 1 15 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 8
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 15 1 is_stmt 0 view .LVU1
  35 0000 00B5     		push	{lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 4
  38              		.cfi_offset 14, -4
  39 0002 83B0     		sub	sp, sp, #12
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 16
  42 0004 8DF80700 		strb	r0, [sp, #7]
  16:user/w25q32.c ****     HAL_SPI_Transmit(&hspi1, &dat, 1, 0xff);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 2


  43              		.loc 1 16 5 is_stmt 1 view .LVU2
  44 0008 FF23     		movs	r3, #255
  45 000a 0122     		movs	r2, #1
  46 000c 0DF10701 		add	r1, sp, #7
  47 0010 0248     		ldr	r0, .L3
  48              	.LVL1:
  49              		.loc 1 16 5 is_stmt 0 view .LVU3
  50 0012 FFF7FEFF 		bl	HAL_SPI_Transmit
  51              	.LVL2:
  17:user/w25q32.c **** }
  52              		.loc 1 17 1 view .LVU4
  53 0016 03B0     		add	sp, sp, #12
  54              	.LCFI2:
  55              		.cfi_def_cfa_offset 4
  56              		@ sp needed
  57 0018 5DF804FB 		ldr	pc, [sp], #4
  58              	.L4:
  59              		.align	2
  60              	.L3:
  61 001c 00000000 		.word	hspi1
  62              		.cfi_endproc
  63              	.LFE133:
  65              		.section	.text.SPI2_Read,"ax",%progbits
  66              		.align	1
  67              		.global	SPI2_Read
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	SPI2_Read:
  73              	.LFB134:
  18:user/w25q32.c **** uint8_t SPI2_Read(void)
  19:user/w25q32.c **** {
  74              		.loc 1 19 1 is_stmt 1 view -0
  75              		.cfi_startproc
  76              		@ args = 0, pretend = 0, frame = 8
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78 0000 00B5     		push	{lr}
  79              	.LCFI3:
  80              		.cfi_def_cfa_offset 4
  81              		.cfi_offset 14, -4
  82 0002 85B0     		sub	sp, sp, #20
  83              	.LCFI4:
  84              		.cfi_def_cfa_offset 24
  20:user/w25q32.c ****     uint8_t rx_dat;
  85              		.loc 1 20 5 view .LVU6
  21:user/w25q32.c ****     uint8_t tx_dat=0xff;
  86              		.loc 1 21 5 view .LVU7
  87              		.loc 1 21 13 is_stmt 0 view .LVU8
  88 0004 FF23     		movs	r3, #255
  89 0006 8DF80E30 		strb	r3, [sp, #14]
  22:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, &tx_dat, &rx_dat, 1, 0xff);
  90              		.loc 1 22 5 is_stmt 1 view .LVU9
  91 000a 0093     		str	r3, [sp]
  92 000c 0123     		movs	r3, #1
  93 000e 0DF10F02 		add	r2, sp, #15
  94 0012 0DF10E01 		add	r1, sp, #14
  95 0016 0448     		ldr	r0, .L7
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 3


  96 0018 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
  97              	.LVL3:
  23:user/w25q32.c ****     // HAL_SPI_Receive(&hspi1, &rx_dat, 1, 20);
  24:user/w25q32.c ****     return rx_dat;
  98              		.loc 1 24 5 view .LVU10
  25:user/w25q32.c **** }
  99              		.loc 1 25 1 is_stmt 0 view .LVU11
 100 001c 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 101 0020 05B0     		add	sp, sp, #20
 102              	.LCFI5:
 103              		.cfi_def_cfa_offset 4
 104              		@ sp needed
 105 0022 5DF804FB 		ldr	pc, [sp], #4
 106              	.L8:
 107 0026 00BF     		.align	2
 108              	.L7:
 109 0028 00000000 		.word	hspi1
 110              		.cfi_endproc
 111              	.LFE134:
 113              		.section	.text.FlashWait_Busy,"ax",%progbits
 114              		.align	1
 115              		.global	FlashWait_Busy
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 120              	FlashWait_Busy:
 121              	.LFB136:
  26:user/w25q32.c **** 
  27:user/w25q32.c **** void SpiFlash_Init(void)
  28:user/w25q32.c **** {
  29:user/w25q32.c ****     flashInfoTypedef flashInfo;   
  30:user/w25q32.c ****     //WP
  31:user/w25q32.c ****     /*GPIO_InitTypeDef GPIO_InitStructure;
  32:user/w25q32.c ****     GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  33:user/w25q32.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;
  34:user/w25q32.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  35:user/w25q32.c ****     GPIO_Init(GPIOC, &GPIO_InitStructure);
  36:user/w25q32.c ****     FLASH_WP_High();*/
  37:user/w25q32.c ****     // SPI2_Configuration();
  38:user/w25q32.c ****     
  39:user/w25q32.c ****     FlashGet_ElectronicInfo(&flashInfo);
  40:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
  41:user/w25q32.c ****     printf("DeviceID=%02X\r\n",flashInfo.DeviceID[0]);
  42:user/w25q32.c ****     if(flashInfo.ManufacturerID==0xEF)
  43:user/w25q32.c ****     {
  44:user/w25q32.c ****         printf("\tFlash Info: WINBOND SPI FLASH\r\n");
  45:user/w25q32.c ****     } */
  46:user/w25q32.c ****     FlashGet_Info(&flashInfo);
  47:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
  48:user/w25q32.c ****     printf("DeviceID=%02X%02X\r\n",flashInfo.DeviceID[0],flashInfo.DeviceID[1]);
  49:user/w25q32.c ****     if((flashInfo.DeviceID[0]==0x40)&&(flashInfo.DeviceID[1]==0x18))
  50:user/w25q32.c ****     {
  51:user/w25q32.c ****         printf("\tFlashType:W25Q128  FlashSize:128Mbit\r\n\tTotal 256 Blocks  16 Sectors/Block  4KB
  52:user/w25q32.c ****     }
  53:user/w25q32.c ****     else if((flashInfo.DeviceID[0]==0x40)&&(flashInfo.DeviceID[1]==0x16))
  54:user/w25q32.c ****     {
  55:user/w25q32.c ****         printf("\tFlashType:W25Q32  FlashSize:32Mbit\r\n\tTotal 64 Blocks  16 Sectors/Block  4KB/Se
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 4


  56:user/w25q32.c ****     }
  57:user/w25q32.c ****     else
  58:user/w25q32.c ****     {
  59:user/w25q32.c **** 
  60:user/w25q32.c ****     } */
  61:user/w25q32.c ****     // FlashChip_Erase();
  62:user/w25q32.c **** 
  63:user/w25q32.c **** #if 0    
  64:user/w25q32.c ****     FlashEnter_DeepPowerDown();
  65:user/w25q32.c ****     tmp=FlashReleaseFrom_DeepPowerDownE();
  66:user/w25q32.c ****     printf("ElectronicSignature=%02x\r\n",tmp);  //ÔøΩÔøΩ”°ÔøΩÔøΩÔøΩŒ™: 0x14
  67:user/w25q32.c **** #endif    
  68:user/w25q32.c **** }
  69:user/w25q32.c **** 
  70:user/w25q32.c **** void FlashWait_Busy(void)
  71:user/w25q32.c **** {
 122              		.loc 1 71 1 is_stmt 1 view -0
 123              		.cfi_startproc
 124              		@ args = 0, pretend = 0, frame = 0
 125              		@ frame_needed = 0, uses_anonymous_args = 0
 126 0000 10B5     		push	{r4, lr}
 127              	.LCFI6:
 128              		.cfi_def_cfa_offset 8
 129              		.cfi_offset 4, -8
 130              		.cfi_offset 14, -4
  72:user/w25q32.c ****     uint8_t flashSta;
 131              		.loc 1 72 5 view .LVU13
  73:user/w25q32.c ****     uint32_t retry=0;
 132              		.loc 1 73 5 view .LVU14
 133              	.LVL4:
  74:user/w25q32.c ****     FLASH_CS_Low();
 134              		.loc 1 74 5 view .LVU15
 135 0002 0022     		movs	r2, #0
 136 0004 1021     		movs	r1, #16
 137 0006 0C48     		ldr	r0, .L13
 138 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 139              	.LVL5:
 140              		.loc 1 74 19 view .LVU16
  75:user/w25q32.c ****     SPI2_Write(RDSD_CMD);
 141              		.loc 1 75 5 view .LVU17
 142 000c 0520     		movs	r0, #5
 143 000e FFF7FEFF 		bl	SPI2_Write
 144              	.LVL6:
  73:user/w25q32.c ****     uint32_t retry=0;
 145              		.loc 1 73 14 is_stmt 0 view .LVU18
 146 0012 0024     		movs	r4, #0
 147              	.LVL7:
 148              	.L11:
  76:user/w25q32.c ****     do{
 149              		.loc 1 76 5 is_stmt 1 view .LVU19
  77:user/w25q32.c ****         
  78:user/w25q32.c ****         flashSta=SPI2_Read();
 150              		.loc 1 78 9 view .LVU20
 151              		.loc 1 78 18 is_stmt 0 view .LVU21
 152 0014 FFF7FEFF 		bl	SPI2_Read
 153              	.LVL8:
  79:user/w25q32.c ****         if(retry++>FLASH_BUSY_TIMEOUT)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 5


 154              		.loc 1 79 9 is_stmt 1 view .LVU22
 155 0018 2246     		mov	r2, r4
 156              		.loc 1 79 17 is_stmt 0 view .LVU23
 157 001a 0134     		adds	r4, r4, #1
 158              	.LVL9:
 159              		.loc 1 79 11 view .LVU24
 160 001c 44F62063 		movw	r3, #20000
 161 0020 9A42     		cmp	r2, r3
 162 0022 02D8     		bhi	.L10
  80:user/w25q32.c ****             break;
  81:user/w25q32.c ****         //printf("flashSta=%02x----%d\r\n",flashSta,retry);
  82:user/w25q32.c ****     }while(flashSta&0x01);
 163              		.loc 1 82 11 is_stmt 1 view .LVU25
 164              		.loc 1 82 5 is_stmt 0 view .LVU26
 165 0024 10F0010F 		tst	r0, #1
 166 0028 F4D1     		bne	.L11
 167              	.L10:
  83:user/w25q32.c ****     //printf("%d\r\n",retry);
  84:user/w25q32.c ****     FLASH_CS_High();    
 168              		.loc 1 84 5 is_stmt 1 view .LVU27
 169 002a 0122     		movs	r2, #1
 170 002c 1021     		movs	r1, #16
 171 002e 0248     		ldr	r0, .L13
 172              	.LVL10:
 173              		.loc 1 84 5 is_stmt 0 view .LVU28
 174 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 175              	.LVL11:
  85:user/w25q32.c **** }
 176              		.loc 1 85 1 view .LVU29
 177 0034 10BD     		pop	{r4, pc}
 178              	.LVL12:
 179              	.L14:
 180              		.loc 1 85 1 view .LVU30
 181 0036 00BF     		.align	2
 182              	.L13:
 183 0038 00000240 		.word	1073872896
 184              		.cfi_endproc
 185              	.LFE136:
 187              		.section	.text.FlashGet_Info,"ax",%progbits
 188              		.align	1
 189              		.global	FlashGet_Info
 190              		.syntax unified
 191              		.thumb
 192              		.thumb_func
 194              	FlashGet_Info:
 195              	.LVL13:
 196              	.LFB137:
  86:user/w25q32.c **** void FlashGet_Info(flashInfoTypedef * pFlashInfo)
  87:user/w25q32.c **** {
 197              		.loc 1 87 1 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 16
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 201              		.loc 1 87 1 is_stmt 0 view .LVU32
 202 0000 30B5     		push	{r4, r5, lr}
 203              	.LCFI7:
 204              		.cfi_def_cfa_offset 12
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 6


 205              		.cfi_offset 4, -12
 206              		.cfi_offset 5, -8
 207              		.cfi_offset 14, -4
 208 0002 87B0     		sub	sp, sp, #28
 209              	.LCFI8:
 210              		.cfi_def_cfa_offset 40
 211 0004 0446     		mov	r4, r0
  88:user/w25q32.c ****     uint8_t tx_data[7];
 212              		.loc 1 88 5 is_stmt 1 view .LVU33
  89:user/w25q32.c ****     uint8_t rx_data[7];
 213              		.loc 1 89 5 view .LVU34
  90:user/w25q32.c **** //	    FlashWait_Busy();
  91:user/w25q32.c ****     FLASH_CS_Low();    
 214              		.loc 1 91 5 view .LVU35
 215 0006 144D     		ldr	r5, .L17
 216 0008 0022     		movs	r2, #0
 217 000a 1021     		movs	r1, #16
 218 000c 2846     		mov	r0, r5
 219              	.LVL14:
 220              		.loc 1 91 5 is_stmt 0 view .LVU36
 221 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 222              	.LVL15:
 223              		.loc 1 91 19 is_stmt 1 view .LVU37
  92:user/w25q32.c ****     /* SPI2_Write(RDID_CMD);
  93:user/w25q32.c ****     pFlashInfo->ManufacturerID=SPI2_Read();
  94:user/w25q32.c ****     pFlashInfo->DeviceID[0]=SPI2_Read();
  95:user/w25q32.c ****     pFlashInfo->DeviceID[1]=SPI2_Read(); */
  96:user/w25q32.c **** 
  97:user/w25q32.c ****     
  98:user/w25q32.c ****     tx_data[0] = RDID_CMD;
 224              		.loc 1 98 5 view .LVU38
 225              		.loc 1 98 16 is_stmt 0 view .LVU39
 226 0012 9F23     		movs	r3, #159
 227 0014 8DF81030 		strb	r3, [sp, #16]
  99:user/w25q32.c ****     tx_data[1] = DUMMY_BYTE;
 228              		.loc 1 99 5 is_stmt 1 view .LVU40
 229              		.loc 1 99 16 is_stmt 0 view .LVU41
 230 0018 FF23     		movs	r3, #255
 231 001a 8DF81130 		strb	r3, [sp, #17]
 100:user/w25q32.c ****     tx_data[2] = DUMMY_BYTE;
 232              		.loc 1 100 5 is_stmt 1 view .LVU42
 233              		.loc 1 100 16 is_stmt 0 view .LVU43
 234 001e 8DF81230 		strb	r3, [sp, #18]
 101:user/w25q32.c ****     tx_data[3] = DUMMY_BYTE;
 235              		.loc 1 101 5 is_stmt 1 view .LVU44
 236              		.loc 1 101 16 is_stmt 0 view .LVU45
 237 0022 8DF81330 		strb	r3, [sp, #19]
 102:user/w25q32.c ****   
 103:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_data, rx_data, 4, 500);
 238              		.loc 1 103 5 is_stmt 1 view .LVU46
 239 0026 4FF4FA73 		mov	r3, #500
 240 002a 0093     		str	r3, [sp]
 241 002c 0423     		movs	r3, #4
 242 002e 02AA     		add	r2, sp, #8
 243 0030 04A9     		add	r1, sp, #16
 244 0032 0A48     		ldr	r0, .L17+4
 245 0034 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 7


 246              	.LVL16:
 104:user/w25q32.c ****     pFlashInfo->ManufacturerID = rx_data[1];
 247              		.loc 1 104 5 view .LVU47
 248              		.loc 1 104 41 is_stmt 0 view .LVU48
 249 0038 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 250              		.loc 1 104 32 view .LVU49
 251 003c 2370     		strb	r3, [r4]
 105:user/w25q32.c ****     pFlashInfo->DeviceID[0] = rx_data[2];
 252              		.loc 1 105 5 is_stmt 1 view .LVU50
 253              		.loc 1 105 38 is_stmt 0 view .LVU51
 254 003e 9DF80A30 		ldrb	r3, [sp, #10]	@ zero_extendqisi2
 255              		.loc 1 105 29 view .LVU52
 256 0042 6370     		strb	r3, [r4, #1]
 106:user/w25q32.c ****     pFlashInfo->DeviceID[1] = rx_data[3];
 257              		.loc 1 106 5 is_stmt 1 view .LVU53
 258              		.loc 1 106 38 is_stmt 0 view .LVU54
 259 0044 9DF80B30 		ldrb	r3, [sp, #11]	@ zero_extendqisi2
 260              		.loc 1 106 29 view .LVU55
 261 0048 A370     		strb	r3, [r4, #2]
 107:user/w25q32.c **** 
 108:user/w25q32.c ****     FLASH_CS_High();    
 262              		.loc 1 108 5 is_stmt 1 view .LVU56
 263 004a 0122     		movs	r2, #1
 264 004c 1021     		movs	r1, #16
 265 004e 2846     		mov	r0, r5
 266 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 267              	.LVL17:
 109:user/w25q32.c **** }
 268              		.loc 1 109 1 is_stmt 0 view .LVU57
 269 0054 07B0     		add	sp, sp, #28
 270              	.LCFI9:
 271              		.cfi_def_cfa_offset 12
 272              		@ sp needed
 273 0056 30BD     		pop	{r4, r5, pc}
 274              	.LVL18:
 275              	.L18:
 276              		.loc 1 109 1 view .LVU58
 277              		.align	2
 278              	.L17:
 279 0058 00000240 		.word	1073872896
 280 005c 00000000 		.word	hspi1
 281              		.cfi_endproc
 282              	.LFE137:
 284              		.section	.text.FlashGet_ElectronicInfo,"ax",%progbits
 285              		.align	1
 286              		.global	FlashGet_ElectronicInfo
 287              		.syntax unified
 288              		.thumb
 289              		.thumb_func
 291              	FlashGet_ElectronicInfo:
 292              	.LVL19:
 293              	.LFB138:
 110:user/w25q32.c **** void FlashGet_ElectronicInfo(flashInfoTypedef * pFlashInfo)
 111:user/w25q32.c **** {
 294              		.loc 1 111 1 is_stmt 1 view -0
 295              		.cfi_startproc
 296              		@ args = 0, pretend = 0, frame = 16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 8


 297              		@ frame_needed = 0, uses_anonymous_args = 0
 298              		.loc 1 111 1 is_stmt 0 view .LVU60
 299 0000 30B5     		push	{r4, r5, lr}
 300              	.LCFI10:
 301              		.cfi_def_cfa_offset 12
 302              		.cfi_offset 4, -12
 303              		.cfi_offset 5, -8
 304              		.cfi_offset 14, -4
 305 0002 87B0     		sub	sp, sp, #28
 306              	.LCFI11:
 307              		.cfi_def_cfa_offset 40
 308 0004 0446     		mov	r4, r0
 112:user/w25q32.c ****     // int i;
 113:user/w25q32.c ****     uint8_t tx_data[7];
 309              		.loc 1 113 5 is_stmt 1 view .LVU61
 114:user/w25q32.c ****     uint8_t rx_data[7];
 310              		.loc 1 114 5 view .LVU62
 115:user/w25q32.c **** 	// FlashWait_Busy();
 116:user/w25q32.c ****     FLASH_CS_Low();
 311              		.loc 1 116 5 view .LVU63
 312 0006 154D     		ldr	r5, .L21
 313 0008 0022     		movs	r2, #0
 314 000a 1021     		movs	r1, #16
 315 000c 2846     		mov	r0, r5
 316              	.LVL20:
 317              		.loc 1 116 5 is_stmt 0 view .LVU64
 318 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 319              	.LVL21:
 320              		.loc 1 116 19 is_stmt 1 view .LVU65
 117:user/w25q32.c ****    
 118:user/w25q32.c ****     /* SPI2_Write(REMS_CMD);
 119:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 120:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 121:user/w25q32.c ****     SPI2_Write(0x00);  //manufacturer's ID first
 122:user/w25q32.c ****     pFlashInfo->ManufacturerID=SPI2_Read();
 123:user/w25q32.c ****     pFlashInfo->DeviceID[0]=SPI2_Read(); */
 124:user/w25q32.c ****     
 125:user/w25q32.c ****     tx_data[0] = REMS_CMD;
 321              		.loc 1 125 5 view .LVU66
 322              		.loc 1 125 16 is_stmt 0 view .LVU67
 323 0012 9023     		movs	r3, #144
 324 0014 8DF81030 		strb	r3, [sp, #16]
 126:user/w25q32.c ****     tx_data[1] = DUMMY_BYTE;
 325              		.loc 1 126 5 is_stmt 1 view .LVU68
 326              		.loc 1 126 16 is_stmt 0 view .LVU69
 327 0018 FF23     		movs	r3, #255
 328 001a 8DF81130 		strb	r3, [sp, #17]
 127:user/w25q32.c ****     tx_data[2] = DUMMY_BYTE;
 329              		.loc 1 127 5 is_stmt 1 view .LVU70
 330              		.loc 1 127 16 is_stmt 0 view .LVU71
 331 001e 8DF81230 		strb	r3, [sp, #18]
 128:user/w25q32.c ****     tx_data[3] = 0x00;
 332              		.loc 1 128 5 is_stmt 1 view .LVU72
 333              		.loc 1 128 16 is_stmt 0 view .LVU73
 334 0022 0022     		movs	r2, #0
 335 0024 8DF81320 		strb	r2, [sp, #19]
 129:user/w25q32.c ****     tx_data[4] = DUMMY_BYTE;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 9


 336              		.loc 1 129 5 is_stmt 1 view .LVU74
 337              		.loc 1 129 16 is_stmt 0 view .LVU75
 338 0028 8DF81430 		strb	r3, [sp, #20]
 130:user/w25q32.c ****     tx_data[5] = DUMMY_BYTE;
 339              		.loc 1 130 5 is_stmt 1 view .LVU76
 340              		.loc 1 130 16 is_stmt 0 view .LVU77
 341 002c 8DF81530 		strb	r3, [sp, #21]
 131:user/w25q32.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_data, rx_data, 6, 500);
 342              		.loc 1 131 5 is_stmt 1 view .LVU78
 343 0030 4FF4FA73 		mov	r3, #500
 344 0034 0093     		str	r3, [sp]
 345 0036 0623     		movs	r3, #6
 346 0038 02AA     		add	r2, sp, #8
 347 003a 04A9     		add	r1, sp, #16
 348 003c 0848     		ldr	r0, .L21+4
 349 003e FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 350              	.LVL22:
 132:user/w25q32.c ****     pFlashInfo->ManufacturerID=rx_data[4];
 351              		.loc 1 132 5 view .LVU79
 352              		.loc 1 132 39 is_stmt 0 view .LVU80
 353 0042 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 354              		.loc 1 132 31 view .LVU81
 355 0046 2370     		strb	r3, [r4]
 133:user/w25q32.c ****     pFlashInfo->DeviceID[0]=rx_data[5];
 356              		.loc 1 133 5 is_stmt 1 view .LVU82
 357              		.loc 1 133 36 is_stmt 0 view .LVU83
 358 0048 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 359              		.loc 1 133 28 view .LVU84
 360 004c 6370     		strb	r3, [r4, #1]
 134:user/w25q32.c ****     
 135:user/w25q32.c ****     FLASH_CS_High();
 361              		.loc 1 135 5 is_stmt 1 view .LVU85
 362 004e 0122     		movs	r2, #1
 363 0050 1021     		movs	r1, #16
 364 0052 2846     		mov	r0, r5
 365 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 366              	.LVL23:
 136:user/w25q32.c **** }
 367              		.loc 1 136 1 is_stmt 0 view .LVU86
 368 0058 07B0     		add	sp, sp, #28
 369              	.LCFI12:
 370              		.cfi_def_cfa_offset 12
 371              		@ sp needed
 372 005a 30BD     		pop	{r4, r5, pc}
 373              	.LVL24:
 374              	.L22:
 375              		.loc 1 136 1 view .LVU87
 376              		.align	2
 377              	.L21:
 378 005c 00000240 		.word	1073872896
 379 0060 00000000 		.word	hspi1
 380              		.cfi_endproc
 381              	.LFE138:
 383              		.section	.text.SpiFlash_Init,"ax",%progbits
 384              		.align	1
 385              		.global	SpiFlash_Init
 386              		.syntax unified
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 10


 387              		.thumb
 388              		.thumb_func
 390              	SpiFlash_Init:
 391              	.LFB135:
  28:user/w25q32.c ****     flashInfoTypedef flashInfo;   
 392              		.loc 1 28 1 is_stmt 1 view -0
 393              		.cfi_startproc
 394              		@ args = 0, pretend = 0, frame = 8
 395              		@ frame_needed = 0, uses_anonymous_args = 0
 396 0000 00B5     		push	{lr}
 397              	.LCFI13:
 398              		.cfi_def_cfa_offset 4
 399              		.cfi_offset 14, -4
 400 0002 83B0     		sub	sp, sp, #12
 401              	.LCFI14:
 402              		.cfi_def_cfa_offset 16
  29:user/w25q32.c ****     //WP
 403              		.loc 1 29 5 view .LVU89
  39:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
 404              		.loc 1 39 5 view .LVU90
 405 0004 01A8     		add	r0, sp, #4
 406 0006 FFF7FEFF 		bl	FlashGet_ElectronicInfo
 407              	.LVL25:
  46:user/w25q32.c ****     /* printf("ManufacturerID=%02X\r\n",flashInfo.ManufacturerID);
 408              		.loc 1 46 5 view .LVU91
 409 000a 01A8     		add	r0, sp, #4
 410 000c FFF7FEFF 		bl	FlashGet_Info
 411              	.LVL26:
  68:user/w25q32.c **** 
 412              		.loc 1 68 1 is_stmt 0 view .LVU92
 413 0010 03B0     		add	sp, sp, #12
 414              	.LCFI15:
 415              		.cfi_def_cfa_offset 4
 416              		@ sp needed
 417 0012 5DF804FB 		ldr	pc, [sp], #4
 418              		.cfi_endproc
 419              	.LFE135:
 421              		.section	.text.FlashEnter_DeepPowerDown,"ax",%progbits
 422              		.align	1
 423              		.global	FlashEnter_DeepPowerDown
 424              		.syntax unified
 425              		.thumb
 426              		.thumb_func
 428              	FlashEnter_DeepPowerDown:
 429              	.LFB139:
 137:user/w25q32.c **** void FlashEnter_DeepPowerDown(void)
 138:user/w25q32.c **** {
 430              		.loc 1 138 1 is_stmt 1 view -0
 431              		.cfi_startproc
 432              		@ args = 0, pretend = 0, frame = 0
 433              		@ frame_needed = 0, uses_anonymous_args = 0
 434 0000 10B5     		push	{r4, lr}
 435              	.LCFI16:
 436              		.cfi_def_cfa_offset 8
 437              		.cfi_offset 4, -8
 438              		.cfi_offset 14, -4
 139:user/w25q32.c ****     FLASH_CS_Low();
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 11


 439              		.loc 1 139 5 view .LVU94
 440 0002 074C     		ldr	r4, .L27
 441 0004 0022     		movs	r2, #0
 442 0006 1021     		movs	r1, #16
 443 0008 2046     		mov	r0, r4
 444 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 445              	.LVL27:
 446              		.loc 1 139 19 view .LVU95
 140:user/w25q32.c ****     SPI2_Write(DP_CMD);   
 447              		.loc 1 140 5 view .LVU96
 448 000e B920     		movs	r0, #185
 449 0010 FFF7FEFF 		bl	SPI2_Write
 450              	.LVL28:
 141:user/w25q32.c ****     FLASH_CS_High();    
 451              		.loc 1 141 5 view .LVU97
 452 0014 0122     		movs	r2, #1
 453 0016 1021     		movs	r1, #16
 454 0018 2046     		mov	r0, r4
 455 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 456              	.LVL29:
 142:user/w25q32.c **** }
 457              		.loc 1 142 1 is_stmt 0 view .LVU98
 458 001e 10BD     		pop	{r4, pc}
 459              	.L28:
 460              		.align	2
 461              	.L27:
 462 0020 00000240 		.word	1073872896
 463              		.cfi_endproc
 464              	.LFE139:
 466              		.section	.text.FlashReleaseFrom_DeepPowerDown,"ax",%progbits
 467              		.align	1
 468              		.global	FlashReleaseFrom_DeepPowerDown
 469              		.syntax unified
 470              		.thumb
 471              		.thumb_func
 473              	FlashReleaseFrom_DeepPowerDown:
 474              	.LFB140:
 143:user/w25q32.c **** void FlashReleaseFrom_DeepPowerDown(void)
 144:user/w25q32.c **** {
 475              		.loc 1 144 1 is_stmt 1 view -0
 476              		.cfi_startproc
 477              		@ args = 0, pretend = 0, frame = 0
 478              		@ frame_needed = 0, uses_anonymous_args = 0
 479 0000 10B5     		push	{r4, lr}
 480              	.LCFI17:
 481              		.cfi_def_cfa_offset 8
 482              		.cfi_offset 4, -8
 483              		.cfi_offset 14, -4
 145:user/w25q32.c ****     FLASH_CS_Low();
 484              		.loc 1 145 5 view .LVU100
 485 0002 074C     		ldr	r4, .L31
 486 0004 0022     		movs	r2, #0
 487 0006 1021     		movs	r1, #16
 488 0008 2046     		mov	r0, r4
 489 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 490              	.LVL30:
 491              		.loc 1 145 19 view .LVU101
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 12


 146:user/w25q32.c ****     SPI2_Write(RDP_CMD);   
 492              		.loc 1 146 5 view .LVU102
 493 000e AB20     		movs	r0, #171
 494 0010 FFF7FEFF 		bl	SPI2_Write
 495              	.LVL31:
 147:user/w25q32.c ****     FLASH_CS_High();    
 496              		.loc 1 147 5 view .LVU103
 497 0014 0122     		movs	r2, #1
 498 0016 1021     		movs	r1, #16
 499 0018 2046     		mov	r0, r4
 500 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 501              	.LVL32:
 148:user/w25q32.c **** }
 502              		.loc 1 148 1 is_stmt 0 view .LVU104
 503 001e 10BD     		pop	{r4, pc}
 504              	.L32:
 505              		.align	2
 506              	.L31:
 507 0020 00000240 		.word	1073872896
 508              		.cfi_endproc
 509              	.LFE140:
 511              		.section	.text.FlashReleaseFrom_DeepPowerDownE,"ax",%progbits
 512              		.align	1
 513              		.global	FlashReleaseFrom_DeepPowerDownE
 514              		.syntax unified
 515              		.thumb
 516              		.thumb_func
 518              	FlashReleaseFrom_DeepPowerDownE:
 519              	.LFB141:
 149:user/w25q32.c **** uint8_t FlashReleaseFrom_DeepPowerDownE(void)
 150:user/w25q32.c **** {   
 520              		.loc 1 150 1 is_stmt 1 view -0
 521              		.cfi_startproc
 522              		@ args = 0, pretend = 0, frame = 0
 523              		@ frame_needed = 0, uses_anonymous_args = 0
 524 0000 38B5     		push	{r3, r4, r5, lr}
 525              	.LCFI18:
 526              		.cfi_def_cfa_offset 16
 527              		.cfi_offset 3, -16
 528              		.cfi_offset 4, -12
 529              		.cfi_offset 5, -8
 530              		.cfi_offset 14, -4
 151:user/w25q32.c ****     uint8_t ElectronicSignature;
 531              		.loc 1 151 5 view .LVU106
 152:user/w25q32.c ****     FLASH_CS_Low();
 532              		.loc 1 152 5 view .LVU107
 533 0002 0E4D     		ldr	r5, .L35
 534 0004 0022     		movs	r2, #0
 535 0006 1021     		movs	r1, #16
 536 0008 2846     		mov	r0, r5
 537 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 538              	.LVL33:
 539              		.loc 1 152 19 view .LVU108
 153:user/w25q32.c ****     SPI2_Write(RES_CMD);
 540              		.loc 1 153 5 view .LVU109
 541 000e AB20     		movs	r0, #171
 542 0010 FFF7FEFF 		bl	SPI2_Write
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 13


 543              	.LVL34:
 154:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 544              		.loc 1 154 5 view .LVU110
 545 0014 FF20     		movs	r0, #255
 546 0016 FFF7FEFF 		bl	SPI2_Write
 547              	.LVL35:
 155:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 548              		.loc 1 155 5 view .LVU111
 549 001a FF20     		movs	r0, #255
 550 001c FFF7FEFF 		bl	SPI2_Write
 551              	.LVL36:
 156:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE);
 552              		.loc 1 156 5 view .LVU112
 553 0020 FF20     		movs	r0, #255
 554 0022 FFF7FEFF 		bl	SPI2_Write
 555              	.LVL37:
 157:user/w25q32.c ****     ElectronicSignature=SPI2_Read();
 556              		.loc 1 157 5 view .LVU113
 557              		.loc 1 157 25 is_stmt 0 view .LVU114
 558 0026 FFF7FEFF 		bl	SPI2_Read
 559              	.LVL38:
 560 002a 0446     		mov	r4, r0
 561              	.LVL39:
 158:user/w25q32.c ****     FLASH_CS_High();    
 562              		.loc 1 158 5 is_stmt 1 view .LVU115
 563 002c 0122     		movs	r2, #1
 564 002e 1021     		movs	r1, #16
 565 0030 2846     		mov	r0, r5
 566 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 567              	.LVL40:
 159:user/w25q32.c ****     return ElectronicSignature;
 568              		.loc 1 159 5 view .LVU116
 160:user/w25q32.c **** }
 569              		.loc 1 160 1 is_stmt 0 view .LVU117
 570 0036 2046     		mov	r0, r4
 571 0038 38BD     		pop	{r3, r4, r5, pc}
 572              	.LVL41:
 573              	.L36:
 574              		.loc 1 160 1 view .LVU118
 575 003a 00BF     		.align	2
 576              	.L35:
 577 003c 00000240 		.word	1073872896
 578              		.cfi_endproc
 579              	.LFE141:
 581              		.section	.text.FlashWriteEnable,"ax",%progbits
 582              		.align	1
 583              		.global	FlashWriteEnable
 584              		.syntax unified
 585              		.thumb
 586              		.thumb_func
 588              	FlashWriteEnable:
 589              	.LFB142:
 161:user/w25q32.c **** void FlashWriteEnable(void)
 162:user/w25q32.c **** {
 590              		.loc 1 162 1 is_stmt 1 view -0
 591              		.cfi_startproc
 592              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 14


 593              		@ frame_needed = 0, uses_anonymous_args = 0
 594 0000 10B5     		push	{r4, lr}
 595              	.LCFI19:
 596              		.cfi_def_cfa_offset 8
 597              		.cfi_offset 4, -8
 598              		.cfi_offset 14, -4
 163:user/w25q32.c ****     FLASH_CS_Low();
 599              		.loc 1 163 5 view .LVU120
 600 0002 074C     		ldr	r4, .L39
 601 0004 0022     		movs	r2, #0
 602 0006 1021     		movs	r1, #16
 603 0008 2046     		mov	r0, r4
 604 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 605              	.LVL42:
 606              		.loc 1 163 19 view .LVU121
 164:user/w25q32.c ****     SPI2_Write(WREN_CMD);   
 607              		.loc 1 164 5 view .LVU122
 608 000e 0620     		movs	r0, #6
 609 0010 FFF7FEFF 		bl	SPI2_Write
 610              	.LVL43:
 165:user/w25q32.c ****     FLASH_CS_High();    
 611              		.loc 1 165 5 view .LVU123
 612 0014 0122     		movs	r2, #1
 613 0016 1021     		movs	r1, #16
 614 0018 2046     		mov	r0, r4
 615 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 616              	.LVL44:
 166:user/w25q32.c **** }
 617              		.loc 1 166 1 is_stmt 0 view .LVU124
 618 001e 10BD     		pop	{r4, pc}
 619              	.L40:
 620              		.align	2
 621              	.L39:
 622 0020 00000240 		.word	1073872896
 623              		.cfi_endproc
 624              	.LFE142:
 626              		.section	.text.FlashWriteDisable,"ax",%progbits
 627              		.align	1
 628              		.global	FlashWriteDisable
 629              		.syntax unified
 630              		.thumb
 631              		.thumb_func
 633              	FlashWriteDisable:
 634              	.LFB143:
 167:user/w25q32.c **** void FlashWriteDisable(void)
 168:user/w25q32.c **** {
 635              		.loc 1 168 1 is_stmt 1 view -0
 636              		.cfi_startproc
 637              		@ args = 0, pretend = 0, frame = 0
 638              		@ frame_needed = 0, uses_anonymous_args = 0
 639 0000 10B5     		push	{r4, lr}
 640              	.LCFI20:
 641              		.cfi_def_cfa_offset 8
 642              		.cfi_offset 4, -8
 643              		.cfi_offset 14, -4
 169:user/w25q32.c ****     FLASH_CS_Low();
 644              		.loc 1 169 5 view .LVU126
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 15


 645 0002 074C     		ldr	r4, .L43
 646 0004 0022     		movs	r2, #0
 647 0006 1021     		movs	r1, #16
 648 0008 2046     		mov	r0, r4
 649 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 650              	.LVL45:
 651              		.loc 1 169 19 view .LVU127
 170:user/w25q32.c ****     SPI2_Write(WRDI_CMD);   
 652              		.loc 1 170 5 view .LVU128
 653 000e 0420     		movs	r0, #4
 654 0010 FFF7FEFF 		bl	SPI2_Write
 655              	.LVL46:
 171:user/w25q32.c ****     FLASH_CS_High();    
 656              		.loc 1 171 5 view .LVU129
 657 0014 0122     		movs	r2, #1
 658 0016 1021     		movs	r1, #16
 659 0018 2046     		mov	r0, r4
 660 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 661              	.LVL47:
 172:user/w25q32.c **** }
 662              		.loc 1 172 1 is_stmt 0 view .LVU130
 663 001e 10BD     		pop	{r4, pc}
 664              	.L44:
 665              		.align	2
 666              	.L43:
 667 0020 00000240 		.word	1073872896
 668              		.cfi_endproc
 669              	.LFE143:
 671              		.section	.text.FlashWrite_StaRegister,"ax",%progbits
 672              		.align	1
 673              		.global	FlashWrite_StaRegister
 674              		.syntax unified
 675              		.thumb
 676              		.thumb_func
 678              	FlashWrite_StaRegister:
 679              	.LVL48:
 680              	.LFB144:
 173:user/w25q32.c **** void FlashWrite_StaRegister(uint8_t flashSta)
 174:user/w25q32.c **** {
 681              		.loc 1 174 1 is_stmt 1 view -0
 682              		.cfi_startproc
 683              		@ args = 0, pretend = 0, frame = 0
 684              		@ frame_needed = 0, uses_anonymous_args = 0
 685              		.loc 1 174 1 is_stmt 0 view .LVU132
 686 0000 38B5     		push	{r3, r4, r5, lr}
 687              	.LCFI21:
 688              		.cfi_def_cfa_offset 16
 689              		.cfi_offset 3, -16
 690              		.cfi_offset 4, -12
 691              		.cfi_offset 5, -8
 692              		.cfi_offset 14, -4
 693 0002 0446     		mov	r4, r0
 175:user/w25q32.c ****     FLASH_CS_Low();
 694              		.loc 1 175 5 is_stmt 1 view .LVU133
 695 0004 084D     		ldr	r5, .L47
 696 0006 0022     		movs	r2, #0
 697 0008 1021     		movs	r1, #16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 16


 698 000a 2846     		mov	r0, r5
 699              	.LVL49:
 700              		.loc 1 175 5 is_stmt 0 view .LVU134
 701 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 702              	.LVL50:
 703              		.loc 1 175 19 is_stmt 1 view .LVU135
 176:user/w25q32.c ****     SPI2_Write(WRSR_CMD); 
 704              		.loc 1 176 5 view .LVU136
 705 0010 0120     		movs	r0, #1
 706 0012 FFF7FEFF 		bl	SPI2_Write
 707              	.LVL51:
 177:user/w25q32.c ****     SPI2_Write(flashSta); 
 708              		.loc 1 177 5 view .LVU137
 709 0016 2046     		mov	r0, r4
 710 0018 FFF7FEFF 		bl	SPI2_Write
 711              	.LVL52:
 178:user/w25q32.c ****     FLASH_CS_High();    
 712              		.loc 1 178 5 view .LVU138
 713 001c 0122     		movs	r2, #1
 714 001e 1021     		movs	r1, #16
 715 0020 2846     		mov	r0, r5
 716 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 717              	.LVL53:
 179:user/w25q32.c **** }
 718              		.loc 1 179 1 is_stmt 0 view .LVU139
 719 0026 38BD     		pop	{r3, r4, r5, pc}
 720              	.L48:
 721              		.align	2
 722              	.L47:
 723 0028 00000240 		.word	1073872896
 724              		.cfi_endproc
 725              	.LFE144:
 727              		.section	.text.FlashPage_Write,"ax",%progbits
 728              		.align	1
 729              		.global	FlashPage_Write
 730              		.syntax unified
 731              		.thumb
 732              		.thumb_func
 734              	FlashPage_Write:
 735              	.LVL54:
 736              	.LFB145:
 180:user/w25q32.c **** /*---- F L A S H   P A G E _   W R I T E ----
 181:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 182:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩpageAddr:“≥ÔøΩÔøΩ÷∑ÔøΩÔøΩÔøΩ⁄∫ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩŸ≥ÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩ–°
 183:user/w25q32.c ****           *ptr:     ÷∏ÔøΩÔøΩ“™–¥ÔøΩÔøΩÔøΩÔøΩÔøΩ›µÔøΩÔøΩÔøΩ÷∑ÔøΩÔøΩ
 184:user/w25q32.c ****           pageSize: “≥ÔøΩƒ¥ÔøΩ–°ÔøΩÔøΩ“ªÔøΩÔøΩÔøΩÔøΩ FLASH_PAGE_SIZE 
 185:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 186:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ⁄¥ÔøΩflash ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩƒµÔøΩ÷∑ŒªŒ™24bit ÔøΩÔøΩ
 187:user/w25q32.c ****           ÔøΩÔøΩÔøΩ–°ÔøΩÔøΩ“≥ÔøΩÔøΩŒßÔøΩÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩÔøΩÔøΩ‘≠ÔøΩÔøΩÔøΩÊ¥¢ÔøΩÔøΩÔøΩÔøΩÔøΩ›≤ÔøΩÔø
 188:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ13:52:53-------
 189:user/w25q32.c **** void FlashPage_Write(uint16_t pageAddr,uint8_t *ptr,uint32_t pageSize)
 190:user/w25q32.c **** {
 737              		.loc 1 190 1 is_stmt 1 view -0
 738              		.cfi_startproc
 739              		@ args = 0, pretend = 0, frame = 0
 740              		@ frame_needed = 0, uses_anonymous_args = 0
 741              		.loc 1 190 1 is_stmt 0 view .LVU141
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 17


 742 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 743              	.LCFI22:
 744              		.cfi_def_cfa_offset 24
 745              		.cfi_offset 3, -24
 746              		.cfi_offset 4, -20
 747              		.cfi_offset 5, -16
 748              		.cfi_offset 6, -12
 749              		.cfi_offset 7, -8
 750              		.cfi_offset 14, -4
 751 0002 0546     		mov	r5, r0
 752 0004 0C46     		mov	r4, r1
 753 0006 1646     		mov	r6, r2
 191:user/w25q32.c ****     uint32_t addr,i;
 754              		.loc 1 191 5 is_stmt 1 view .LVU142
 192:user/w25q32.c **** //	    addr=pageAddr*FLASH_PAGE_SIZE;
 193:user/w25q32.c ****     addr=((uint32_t)pageAddr)<<8;  
 755              		.loc 1 193 5 view .LVU143
 756              		.loc 1 193 9 is_stmt 0 view .LVU144
 757 0008 0702     		lsls	r7, r0, #8
 758              	.LVL55:
 194:user/w25q32.c ****     FlashWait_Busy();
 759              		.loc 1 194 5 is_stmt 1 view .LVU145
 760 000a FFF7FEFF 		bl	FlashWait_Busy
 761              	.LVL56:
 195:user/w25q32.c ****     FlashWriteEnable();
 762              		.loc 1 195 5 view .LVU146
 763 000e FFF7FEFF 		bl	FlashWriteEnable
 764              	.LVL57:
 196:user/w25q32.c ****     FLASH_CS_Low();
 765              		.loc 1 196 5 view .LVU147
 766 0012 0022     		movs	r2, #0
 767 0014 1021     		movs	r1, #16
 768 0016 0F48     		ldr	r0, .L53
 769 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 770              	.LVL58:
 771              		.loc 1 196 19 view .LVU148
 197:user/w25q32.c ****     SPI2_Write(PP_CMD); 
 772              		.loc 1 197 5 view .LVU149
 773 001c 0220     		movs	r0, #2
 774 001e FFF7FEFF 		bl	SPI2_Write
 775              	.LVL59:
 198:user/w25q32.c ****     SPI2_Write(addr>>16);
 776              		.loc 1 198 5 view .LVU150
 777 0022 380C     		lsrs	r0, r7, #16
 778 0024 FFF7FEFF 		bl	SPI2_Write
 779              	.LVL60:
 199:user/w25q32.c ****     SPI2_Write(addr>>8);
 780              		.loc 1 199 5 view .LVU151
 781 0028 E8B2     		uxtb	r0, r5
 782 002a FFF7FEFF 		bl	SPI2_Write
 783              	.LVL61:
 200:user/w25q32.c ****     SPI2_Write(addr); 
 784              		.loc 1 200 5 view .LVU152
 785 002e 0020     		movs	r0, #0
 786 0030 FFF7FEFF 		bl	SPI2_Write
 787              	.LVL62:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 18


 788              		.loc 1 201 5 view .LVU153
 789              		.loc 1 201 10 is_stmt 0 view .LVU154
 790 0034 0025     		movs	r5, #0
 791              		.loc 1 201 5 view .LVU155
 792 0036 04E0     		b	.L50
 793              	.LVL63:
 794              	.L51:
 202:user/w25q32.c ****         SPI2_Write(*ptr++); 
 795              		.loc 1 202 9 is_stmt 1 discriminator 3 view .LVU156
 796              		.loc 1 202 9 is_stmt 0 discriminator 3 view .LVU157
 797 0038 14F8010B 		ldrb	r0, [r4], #1	@ zero_extendqisi2
 798              	.LVL64:
 799              		.loc 1 202 9 discriminator 3 view .LVU158
 800 003c FFF7FEFF 		bl	SPI2_Write
 801              	.LVL65:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 802              		.loc 1 201 24 is_stmt 1 discriminator 3 view .LVU159
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 803              		.loc 1 201 25 is_stmt 0 discriminator 3 view .LVU160
 804 0040 0135     		adds	r5, r5, #1
 805              	.LVL66:
 806              	.L50:
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 807              		.loc 1 201 13 is_stmt 1 discriminator 1 view .LVU161
 201:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 808              		.loc 1 201 5 is_stmt 0 discriminator 1 view .LVU162
 809 0042 B542     		cmp	r5, r6
 810 0044 F8D3     		bcc	.L51
 203:user/w25q32.c ****     FLASH_CS_High();    
 811              		.loc 1 203 5 is_stmt 1 view .LVU163
 812 0046 0122     		movs	r2, #1
 813 0048 1021     		movs	r1, #16
 814 004a 0248     		ldr	r0, .L53
 815 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 816              	.LVL67:
 204:user/w25q32.c **** }
 817              		.loc 1 204 1 is_stmt 0 view .LVU164
 818 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 819              	.LVL68:
 820              	.L54:
 821              		.loc 1 204 1 view .LVU165
 822 0052 00BF     		.align	2
 823              	.L53:
 824 0054 00000240 		.word	1073872896
 825              		.cfi_endproc
 826              	.LFE145:
 828              		.section	.text.FlashChip_Erase,"ax",%progbits
 829              		.align	1
 830              		.global	FlashChip_Erase
 831              		.syntax unified
 832              		.thumb
 833              		.thumb_func
 835              	FlashChip_Erase:
 836              	.LFB146:
 205:user/w25q32.c **** void FlashChip_Erase(void)
 206:user/w25q32.c **** {
 837              		.loc 1 206 1 is_stmt 1 view -0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 19


 838              		.cfi_startproc
 839              		@ args = 0, pretend = 0, frame = 0
 840              		@ frame_needed = 0, uses_anonymous_args = 0
 841 0000 10B5     		push	{r4, lr}
 842              	.LCFI23:
 843              		.cfi_def_cfa_offset 8
 844              		.cfi_offset 4, -8
 845              		.cfi_offset 14, -4
 207:user/w25q32.c ****     FlashWait_Busy();
 846              		.loc 1 207 5 view .LVU167
 847 0002 FFF7FEFF 		bl	FlashWait_Busy
 848              	.LVL69:
 208:user/w25q32.c ****     FlashWriteEnable();    
 849              		.loc 1 208 5 view .LVU168
 850 0006 FFF7FEFF 		bl	FlashWriteEnable
 851              	.LVL70:
 209:user/w25q32.c ****     FLASH_CS_Low();
 852              		.loc 1 209 5 view .LVU169
 853 000a 074C     		ldr	r4, .L57
 854 000c 0022     		movs	r2, #0
 855 000e 1021     		movs	r1, #16
 856 0010 2046     		mov	r0, r4
 857 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 858              	.LVL71:
 859              		.loc 1 209 19 view .LVU170
 210:user/w25q32.c ****     SPI2_Write(CE_CMD);     
 860              		.loc 1 210 5 view .LVU171
 861 0016 6020     		movs	r0, #96
 862 0018 FFF7FEFF 		bl	SPI2_Write
 863              	.LVL72:
 211:user/w25q32.c ****     FLASH_CS_High();    
 864              		.loc 1 211 5 view .LVU172
 865 001c 0122     		movs	r2, #1
 866 001e 1021     		movs	r1, #16
 867 0020 2046     		mov	r0, r4
 868 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 869              	.LVL73:
 212:user/w25q32.c **** }
 870              		.loc 1 212 1 is_stmt 0 view .LVU173
 871 0026 10BD     		pop	{r4, pc}
 872              	.L58:
 873              		.align	2
 874              	.L57:
 875 0028 00000240 		.word	1073872896
 876              		.cfi_endproc
 877              	.LFE146:
 879              		.section	.text.FlashBlock_Erase,"ax",%progbits
 880              		.align	1
 881              		.global	FlashBlock_Erase
 882              		.syntax unified
 883              		.thumb
 884              		.thumb_func
 886              	FlashBlock_Erase:
 887              	.LVL74:
 888              	.LFB147:
 213:user/w25q32.c **** /*---- F L A S H   B L O C K _   E R A S E ----
 214:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 20


 215:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩblock: 0~256
 216:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 217:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 218:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ14:43:05-------
 219:user/w25q32.c **** void FlashBlock_Erase(uint8_t blockAddr)
 220:user/w25q32.c **** {
 889              		.loc 1 220 1 is_stmt 1 view -0
 890              		.cfi_startproc
 891              		@ args = 0, pretend = 0, frame = 0
 892              		@ frame_needed = 0, uses_anonymous_args = 0
 893              		.loc 1 220 1 is_stmt 0 view .LVU175
 894 0000 38B5     		push	{r3, r4, r5, lr}
 895              	.LCFI24:
 896              		.cfi_def_cfa_offset 16
 897              		.cfi_offset 3, -16
 898              		.cfi_offset 4, -12
 899              		.cfi_offset 5, -8
 900              		.cfi_offset 14, -4
 901 0002 0446     		mov	r4, r0
 221:user/w25q32.c ****     uint32_t addr;//,i;
 902              		.loc 1 221 5 is_stmt 1 view .LVU176
 222:user/w25q32.c **** //	    addr=blockAddr*16*4096;  //√øÔøΩÔøΩblockÔøΩÔøΩ16ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ√øÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
 223:user/w25q32.c ****     
 224:user/w25q32.c **** 
 225:user/w25q32.c ****     addr=((uint32_t)blockAddr)<<16;
 903              		.loc 1 225 5 view .LVU177
 226:user/w25q32.c ****     FlashWait_Busy();
 904              		.loc 1 226 5 view .LVU178
 905 0004 FFF7FEFF 		bl	FlashWait_Busy
 906              	.LVL75:
 227:user/w25q32.c ****     FlashWriteEnable();
 907              		.loc 1 227 5 view .LVU179
 908 0008 FFF7FEFF 		bl	FlashWriteEnable
 909              	.LVL76:
 228:user/w25q32.c ****     FLASH_CS_Low();
 910              		.loc 1 228 5 view .LVU180
 911 000c 0B4D     		ldr	r5, .L61
 912 000e 0022     		movs	r2, #0
 913 0010 1021     		movs	r1, #16
 914 0012 2846     		mov	r0, r5
 915 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 916              	.LVL77:
 917              		.loc 1 228 19 view .LVU181
 229:user/w25q32.c ****     SPI2_Write(BE_CMD); 
 918              		.loc 1 229 5 view .LVU182
 919 0018 5220     		movs	r0, #82
 920 001a FFF7FEFF 		bl	SPI2_Write
 921              	.LVL78:
 230:user/w25q32.c ****     SPI2_Write(addr>>16);
 922              		.loc 1 230 5 view .LVU183
 923 001e 2046     		mov	r0, r4
 924 0020 FFF7FEFF 		bl	SPI2_Write
 925              	.LVL79:
 231:user/w25q32.c ****     SPI2_Write(addr>>8);
 926              		.loc 1 231 5 view .LVU184
 927 0024 0020     		movs	r0, #0
 928 0026 FFF7FEFF 		bl	SPI2_Write
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 21


 929              	.LVL80:
 232:user/w25q32.c ****     SPI2_Write(addr); 
 930              		.loc 1 232 5 view .LVU185
 931 002a 0020     		movs	r0, #0
 932 002c FFF7FEFF 		bl	SPI2_Write
 933              	.LVL81:
 233:user/w25q32.c ****     FLASH_CS_High();    
 934              		.loc 1 233 5 view .LVU186
 935 0030 0122     		movs	r2, #1
 936 0032 1021     		movs	r1, #16
 937 0034 2846     		mov	r0, r5
 938 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 939              	.LVL82:
 234:user/w25q32.c **** }
 940              		.loc 1 234 1 is_stmt 0 view .LVU187
 941 003a 38BD     		pop	{r3, r4, r5, pc}
 942              	.L62:
 943              		.align	2
 944              	.L61:
 945 003c 00000240 		.word	1073872896
 946              		.cfi_endproc
 947              	.LFE147:
 949              		.section	.text.FlashSector_Erase,"ax",%progbits
 950              		.align	1
 951              		.global	FlashSector_Erase
 952              		.syntax unified
 953              		.thumb
 954              		.thumb_func
 956              	FlashSector_Erase:
 957              	.LVL83:
 958              	.LFB148:
 235:user/w25q32.c **** /*---- F L A S H   S E C T O R _   E R A S E ----
 236:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 237:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩsectorAddr: 0~4096
 238:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 239:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 240:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ14:45:28-------
 241:user/w25q32.c **** void FlashSector_Erase(uint16_t sectorAddr)
 242:user/w25q32.c **** {
 959              		.loc 1 242 1 is_stmt 1 view -0
 960              		.cfi_startproc
 961              		@ args = 0, pretend = 0, frame = 0
 962              		@ frame_needed = 0, uses_anonymous_args = 0
 963              		.loc 1 242 1 is_stmt 0 view .LVU189
 964 0000 38B5     		push	{r3, r4, r5, lr}
 965              	.LCFI25:
 966              		.cfi_def_cfa_offset 16
 967              		.cfi_offset 3, -16
 968              		.cfi_offset 4, -12
 969              		.cfi_offset 5, -8
 970              		.cfi_offset 14, -4
 243:user/w25q32.c ****     uint32_t addr;//,i;
 971              		.loc 1 243 5 is_stmt 1 view .LVU190
 244:user/w25q32.c ****     addr=((uint32_t)sectorAddr)<<12;
 972              		.loc 1 244 5 view .LVU191
 973              		.loc 1 244 9 is_stmt 0 view .LVU192
 974 0002 0403     		lsls	r4, r0, #12
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 22


 975              	.LVL84:
 245:user/w25q32.c ****     FlashWait_Busy();
 976              		.loc 1 245 5 is_stmt 1 view .LVU193
 977 0004 FFF7FEFF 		bl	FlashWait_Busy
 978              	.LVL85:
 246:user/w25q32.c ****     FlashWriteEnable();
 979              		.loc 1 246 5 view .LVU194
 980 0008 FFF7FEFF 		bl	FlashWriteEnable
 981              	.LVL86:
 247:user/w25q32.c ****     FLASH_CS_Low();
 982              		.loc 1 247 5 view .LVU195
 983 000c 0D4D     		ldr	r5, .L65
 984 000e 0022     		movs	r2, #0
 985 0010 1021     		movs	r1, #16
 986 0012 2846     		mov	r0, r5
 987 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 988              	.LVL87:
 989              		.loc 1 247 19 view .LVU196
 248:user/w25q32.c ****     SPI2_Write(SE_CMD); 
 990              		.loc 1 248 5 view .LVU197
 991 0018 2020     		movs	r0, #32
 992 001a FFF7FEFF 		bl	SPI2_Write
 993              	.LVL88:
 249:user/w25q32.c ****     SPI2_Write(addr>>16);
 994              		.loc 1 249 5 view .LVU198
 995 001e C4F30740 		ubfx	r0, r4, #16, #8
 996 0022 FFF7FEFF 		bl	SPI2_Write
 997              	.LVL89:
 250:user/w25q32.c ****     SPI2_Write(addr>>8);
 998              		.loc 1 250 5 view .LVU199
 999              		.loc 1 250 20 is_stmt 0 view .LVU200
 1000 0026 200A     		lsrs	r0, r4, #8
 1001              		.loc 1 250 5 view .LVU201
 1002 0028 00F0F000 		and	r0, r0, #240
 1003 002c FFF7FEFF 		bl	SPI2_Write
 1004              	.LVL90:
 251:user/w25q32.c ****     SPI2_Write(addr); 
 1005              		.loc 1 251 5 is_stmt 1 view .LVU202
 1006 0030 0020     		movs	r0, #0
 1007 0032 FFF7FEFF 		bl	SPI2_Write
 1008              	.LVL91:
 252:user/w25q32.c ****     FLASH_CS_High();    
 1009              		.loc 1 252 5 view .LVU203
 1010 0036 0122     		movs	r2, #1
 1011 0038 1021     		movs	r1, #16
 1012 003a 2846     		mov	r0, r5
 1013 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1014              	.LVL92:
 253:user/w25q32.c **** }
 1015              		.loc 1 253 1 is_stmt 0 view .LVU204
 1016 0040 38BD     		pop	{r3, r4, r5, pc}
 1017              	.LVL93:
 1018              	.L66:
 1019              		.loc 1 253 1 view .LVU205
 1020 0042 00BF     		.align	2
 1021              	.L65:
 1022 0044 00000240 		.word	1073872896
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 23


 1023              		.cfi_endproc
 1024              	.LFE148:
 1026              		.section	.text.FlashRead,"ax",%progbits
 1027              		.align	1
 1028              		.global	FlashRead
 1029              		.syntax unified
 1030              		.thumb
 1031              		.thumb_func
 1033              	FlashRead:
 1034              	.LVL94:
 1035              	.LFB149:
 254:user/w25q32.c **** void FlashRead(uint32_t addr,uint8_t *ptr,uint32_t len)
 255:user/w25q32.c **** {
 1036              		.loc 1 255 1 is_stmt 1 view -0
 1037              		.cfi_startproc
 1038              		@ args = 0, pretend = 0, frame = 0
 1039              		@ frame_needed = 0, uses_anonymous_args = 0
 1040              		.loc 1 255 1 is_stmt 0 view .LVU207
 1041 0000 70B5     		push	{r4, r5, r6, lr}
 1042              	.LCFI26:
 1043              		.cfi_def_cfa_offset 16
 1044              		.cfi_offset 4, -16
 1045              		.cfi_offset 5, -12
 1046              		.cfi_offset 6, -8
 1047              		.cfi_offset 14, -4
 1048 0002 0C46     		mov	r4, r1
 1049 0004 1646     		mov	r6, r2
 256:user/w25q32.c ****     uint32_t addr_tmp,i;
 1050              		.loc 1 256 5 is_stmt 1 view .LVU208
 257:user/w25q32.c ****     addr_tmp=addr&0x00ffffff;
 1051              		.loc 1 257 5 view .LVU209
 1052              		.loc 1 257 13 is_stmt 0 view .LVU210
 1053 0006 20F07F45 		bic	r5, r0, #-16777216
 1054              	.LVL95:
 258:user/w25q32.c ****     FlashWait_Busy();    
 1055              		.loc 1 258 5 is_stmt 1 view .LVU211
 1056 000a FFF7FEFF 		bl	FlashWait_Busy
 1057              	.LVL96:
 259:user/w25q32.c ****     FLASH_CS_Low();
 1058              		.loc 1 259 5 view .LVU212
 1059 000e 0022     		movs	r2, #0
 1060 0010 1021     		movs	r1, #16
 1061 0012 0F48     		ldr	r0, .L71
 1062 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1063              	.LVL97:
 1064              		.loc 1 259 19 view .LVU213
 260:user/w25q32.c ****     SPI2_Write(READ_CMD); 
 1065              		.loc 1 260 5 view .LVU214
 1066 0018 0320     		movs	r0, #3
 1067 001a FFF7FEFF 		bl	SPI2_Write
 1068              	.LVL98:
 261:user/w25q32.c ****     SPI2_Write(addr_tmp>>16);
 1069              		.loc 1 261 5 view .LVU215
 1070 001e 280C     		lsrs	r0, r5, #16
 1071 0020 FFF7FEFF 		bl	SPI2_Write
 1072              	.LVL99:
 262:user/w25q32.c ****     SPI2_Write(addr_tmp>>8);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 24


 1073              		.loc 1 262 5 view .LVU216
 1074 0024 C5F30720 		ubfx	r0, r5, #8, #8
 1075 0028 FFF7FEFF 		bl	SPI2_Write
 1076              	.LVL100:
 263:user/w25q32.c ****     SPI2_Write(addr_tmp); 
 1077              		.loc 1 263 5 view .LVU217
 1078 002c E8B2     		uxtb	r0, r5
 1079 002e FFF7FEFF 		bl	SPI2_Write
 1080              	.LVL101:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1081              		.loc 1 264 5 view .LVU218
 1082              		.loc 1 264 10 is_stmt 0 view .LVU219
 1083 0032 0025     		movs	r5, #0
 1084              	.LVL102:
 1085              		.loc 1 264 5 view .LVU220
 1086 0034 04E0     		b	.L68
 1087              	.LVL103:
 1088              	.L69:
 265:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1089              		.loc 1 265 9 is_stmt 1 discriminator 3 view .LVU221
 1090              		.loc 1 265 16 is_stmt 0 discriminator 3 view .LVU222
 1091 0036 FFF7FEFF 		bl	SPI2_Read
 1092              	.LVL104:
 1093              		.loc 1 265 15 discriminator 3 view .LVU223
 1094 003a 04F8010B 		strb	r0, [r4], #1
 1095              	.LVL105:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1096              		.loc 1 264 19 is_stmt 1 discriminator 3 view .LVU224
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1097              		.loc 1 264 20 is_stmt 0 discriminator 3 view .LVU225
 1098 003e 0135     		adds	r5, r5, #1
 1099              	.LVL106:
 1100              	.L68:
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1101              		.loc 1 264 13 is_stmt 1 discriminator 1 view .LVU226
 264:user/w25q32.c ****     for(i=0;i<len;i++)
 1102              		.loc 1 264 5 is_stmt 0 discriminator 1 view .LVU227
 1103 0040 B542     		cmp	r5, r6
 1104 0042 F8D3     		bcc	.L69
 266:user/w25q32.c ****     FLASH_CS_High();    
 1105              		.loc 1 266 5 is_stmt 1 view .LVU228
 1106 0044 0122     		movs	r2, #1
 1107 0046 1021     		movs	r1, #16
 1108 0048 0148     		ldr	r0, .L71
 1109 004a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1110              	.LVL107:
 267:user/w25q32.c **** }
 1111              		.loc 1 267 1 is_stmt 0 view .LVU229
 1112 004e 70BD     		pop	{r4, r5, r6, pc}
 1113              	.LVL108:
 1114              	.L72:
 1115              		.loc 1 267 1 view .LVU230
 1116              		.align	2
 1117              	.L71:
 1118 0050 00000240 		.word	1073872896
 1119              		.cfi_endproc
 1120              	.LFE149:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 25


 1122              		.section	.text.FlashPage_Read,"ax",%progbits
 1123              		.align	1
 1124              		.global	FlashPage_Read
 1125              		.syntax unified
 1126              		.thumb
 1127              		.thumb_func
 1129              	FlashPage_Read:
 1130              	.LVL109:
 1131              	.LFB150:
 268:user/w25q32.c **** /*---- F L A S H   P A G E _   R E A D ----
 269:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩ‹°ÔøΩÔøΩÔøΩ****
 270:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩpageAddr:“≥ÔøΩÔøΩ÷∑ÔøΩÔøΩÔøΩ⁄∫ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩŸ≥ÔøΩÔøΩÔøΩ“≥ÔøΩÔøΩ–°
 271:user/w25q32.c **** ÔøΩÔøΩÔøΩÔøΩÔøΩÿ°ÔøΩÔøΩÔøΩ****
 272:user/w25q32.c **** ÔøΩÔøΩÀµÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ****
 273:user/w25q32.c **** --------------ÔøΩÔøΩÔøΩÔøΩ:ÔøΩÔøΩ“µÔøΩÔøΩ   2012ÔøΩÔøΩ10ÔøΩÔøΩ23ÔøΩÔøΩÔøΩÔøΩÔøΩ⁄∂ÔøΩ15:11:50-------
 274:user/w25q32.c **** void FlashPage_Read(uint16_t pageAddr,uint8_t *ptr,uint32_t pageSize)
 275:user/w25q32.c **** {
 1132              		.loc 1 275 1 is_stmt 1 view -0
 1133              		.cfi_startproc
 1134              		@ args = 0, pretend = 0, frame = 0
 1135              		@ frame_needed = 0, uses_anonymous_args = 0
 1136              		.loc 1 275 1 is_stmt 0 view .LVU232
 1137 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1138              	.LCFI27:
 1139              		.cfi_def_cfa_offset 24
 1140              		.cfi_offset 3, -24
 1141              		.cfi_offset 4, -20
 1142              		.cfi_offset 5, -16
 1143              		.cfi_offset 6, -12
 1144              		.cfi_offset 7, -8
 1145              		.cfi_offset 14, -4
 1146 0002 0546     		mov	r5, r0
 1147 0004 0C46     		mov	r4, r1
 1148 0006 1646     		mov	r6, r2
 276:user/w25q32.c ****     uint32_t addr,i;
 1149              		.loc 1 276 5 is_stmt 1 view .LVU233
 277:user/w25q32.c **** //	    addr=pageAddr*FLASH_PAGE_SIZE;
 278:user/w25q32.c ****     addr=((uint32_t)pageAddr)<<8;
 1150              		.loc 1 278 5 view .LVU234
 1151              		.loc 1 278 9 is_stmt 0 view .LVU235
 1152 0008 0702     		lsls	r7, r0, #8
 1153              	.LVL110:
 279:user/w25q32.c ****     FlashWait_Busy();   
 1154              		.loc 1 279 5 is_stmt 1 view .LVU236
 1155 000a FFF7FEFF 		bl	FlashWait_Busy
 1156              	.LVL111:
 280:user/w25q32.c ****     FLASH_CS_Low();
 1157              		.loc 1 280 5 view .LVU237
 1158 000e 0022     		movs	r2, #0
 1159 0010 1021     		movs	r1, #16
 1160 0012 0F48     		ldr	r0, .L77
 1161 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1162              	.LVL112:
 1163              		.loc 1 280 19 view .LVU238
 281:user/w25q32.c ****     SPI2_Write(READ_CMD); 
 1164              		.loc 1 281 5 view .LVU239
 1165 0018 0320     		movs	r0, #3
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 26


 1166 001a FFF7FEFF 		bl	SPI2_Write
 1167              	.LVL113:
 282:user/w25q32.c ****     SPI2_Write(addr>>16);
 1168              		.loc 1 282 5 view .LVU240
 1169 001e 380C     		lsrs	r0, r7, #16
 1170 0020 FFF7FEFF 		bl	SPI2_Write
 1171              	.LVL114:
 283:user/w25q32.c ****     SPI2_Write(addr>>8);
 1172              		.loc 1 283 5 view .LVU241
 1173 0024 E8B2     		uxtb	r0, r5
 1174 0026 FFF7FEFF 		bl	SPI2_Write
 1175              	.LVL115:
 284:user/w25q32.c ****     SPI2_Write(addr); 
 1176              		.loc 1 284 5 view .LVU242
 1177 002a 0020     		movs	r0, #0
 1178 002c FFF7FEFF 		bl	SPI2_Write
 1179              	.LVL116:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1180              		.loc 1 285 5 view .LVU243
 1181              		.loc 1 285 10 is_stmt 0 view .LVU244
 1182 0030 0025     		movs	r5, #0
 1183              		.loc 1 285 5 view .LVU245
 1184 0032 04E0     		b	.L74
 1185              	.LVL117:
 1186              	.L75:
 286:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1187              		.loc 1 286 9 is_stmt 1 discriminator 3 view .LVU246
 1188              		.loc 1 286 16 is_stmt 0 discriminator 3 view .LVU247
 1189 0034 FFF7FEFF 		bl	SPI2_Read
 1190              	.LVL118:
 1191              		.loc 1 286 15 discriminator 3 view .LVU248
 1192 0038 04F8010B 		strb	r0, [r4], #1
 1193              	.LVL119:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1194              		.loc 1 285 24 is_stmt 1 discriminator 3 view .LVU249
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1195              		.loc 1 285 25 is_stmt 0 discriminator 3 view .LVU250
 1196 003c 0135     		adds	r5, r5, #1
 1197              	.LVL120:
 1198              	.L74:
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1199              		.loc 1 285 13 is_stmt 1 discriminator 1 view .LVU251
 285:user/w25q32.c ****     for(i=0;i<pageSize;i++)
 1200              		.loc 1 285 5 is_stmt 0 discriminator 1 view .LVU252
 1201 003e B542     		cmp	r5, r6
 1202 0040 F8D3     		bcc	.L75
 287:user/w25q32.c ****     FLASH_CS_High();    
 1203              		.loc 1 287 5 is_stmt 1 view .LVU253
 1204 0042 0122     		movs	r2, #1
 1205 0044 1021     		movs	r1, #16
 1206 0046 0248     		ldr	r0, .L77
 1207 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1208              	.LVL121:
 288:user/w25q32.c **** }
 1209              		.loc 1 288 1 is_stmt 0 view .LVU254
 1210 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1211              	.LVL122:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 27


 1212              	.L78:
 1213              		.loc 1 288 1 view .LVU255
 1214 004e 00BF     		.align	2
 1215              	.L77:
 1216 0050 00000240 		.word	1073872896
 1217              		.cfi_endproc
 1218              	.LFE150:
 1220              		.section	.text.FlashFastRead,"ax",%progbits
 1221              		.align	1
 1222              		.global	FlashFastRead
 1223              		.syntax unified
 1224              		.thumb
 1225              		.thumb_func
 1227              	FlashFastRead:
 1228              	.LVL123:
 1229              	.LFB151:
 289:user/w25q32.c **** void FlashFastRead(uint32_t addr,uint8_t *ptr,uint32_t len)
 290:user/w25q32.c **** {
 1230              		.loc 1 290 1 is_stmt 1 view -0
 1231              		.cfi_startproc
 1232              		@ args = 0, pretend = 0, frame = 0
 1233              		@ frame_needed = 0, uses_anonymous_args = 0
 1234              		.loc 1 290 1 is_stmt 0 view .LVU257
 1235 0000 70B5     		push	{r4, r5, r6, lr}
 1236              	.LCFI28:
 1237              		.cfi_def_cfa_offset 16
 1238              		.cfi_offset 4, -16
 1239              		.cfi_offset 5, -12
 1240              		.cfi_offset 6, -8
 1241              		.cfi_offset 14, -4
 1242 0002 0C46     		mov	r4, r1
 1243 0004 1646     		mov	r6, r2
 291:user/w25q32.c ****     uint32_t addr_tmp,i;
 1244              		.loc 1 291 5 is_stmt 1 view .LVU258
 292:user/w25q32.c ****     addr_tmp=addr&0x00ffffff;
 1245              		.loc 1 292 5 view .LVU259
 1246              		.loc 1 292 13 is_stmt 0 view .LVU260
 1247 0006 20F07F45 		bic	r5, r0, #-16777216
 1248              	.LVL124:
 293:user/w25q32.c ****     FlashWait_Busy();    
 1249              		.loc 1 293 5 is_stmt 1 view .LVU261
 1250 000a FFF7FEFF 		bl	FlashWait_Busy
 1251              	.LVL125:
 294:user/w25q32.c ****     FLASH_CS_Low();
 1252              		.loc 1 294 5 view .LVU262
 1253 000e 0022     		movs	r2, #0
 1254 0010 1021     		movs	r1, #16
 1255 0012 1148     		ldr	r0, .L83
 1256 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1257              	.LVL126:
 1258              		.loc 1 294 19 view .LVU263
 295:user/w25q32.c ****     SPI2_Write(FREAD_CMD); 
 1259              		.loc 1 295 5 view .LVU264
 1260 0018 0B20     		movs	r0, #11
 1261 001a FFF7FEFF 		bl	SPI2_Write
 1262              	.LVL127:
 296:user/w25q32.c ****     SPI2_Write(addr_tmp>>16);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 28


 1263              		.loc 1 296 5 view .LVU265
 1264 001e 280C     		lsrs	r0, r5, #16
 1265 0020 FFF7FEFF 		bl	SPI2_Write
 1266              	.LVL128:
 297:user/w25q32.c ****     SPI2_Write(addr_tmp>>8);
 1267              		.loc 1 297 5 view .LVU266
 1268 0024 C5F30720 		ubfx	r0, r5, #8, #8
 1269 0028 FFF7FEFF 		bl	SPI2_Write
 1270              	.LVL129:
 298:user/w25q32.c ****     SPI2_Write(addr_tmp); 
 1271              		.loc 1 298 5 view .LVU267
 1272 002c E8B2     		uxtb	r0, r5
 1273 002e FFF7FEFF 		bl	SPI2_Write
 1274              	.LVL130:
 299:user/w25q32.c ****     SPI2_Write(DUMMY_BYTE); 
 1275              		.loc 1 299 5 view .LVU268
 1276 0032 FF20     		movs	r0, #255
 1277 0034 FFF7FEFF 		bl	SPI2_Write
 1278              	.LVL131:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1279              		.loc 1 300 5 view .LVU269
 1280              		.loc 1 300 10 is_stmt 0 view .LVU270
 1281 0038 0025     		movs	r5, #0
 1282              	.LVL132:
 1283              		.loc 1 300 5 view .LVU271
 1284 003a 04E0     		b	.L80
 1285              	.LVL133:
 1286              	.L81:
 301:user/w25q32.c ****         *ptr++=SPI2_Read(); 
 1287              		.loc 1 301 9 is_stmt 1 discriminator 3 view .LVU272
 1288              		.loc 1 301 16 is_stmt 0 discriminator 3 view .LVU273
 1289 003c FFF7FEFF 		bl	SPI2_Read
 1290              	.LVL134:
 1291              		.loc 1 301 15 discriminator 3 view .LVU274
 1292 0040 04F8010B 		strb	r0, [r4], #1
 1293              	.LVL135:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1294              		.loc 1 300 19 is_stmt 1 discriminator 3 view .LVU275
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1295              		.loc 1 300 20 is_stmt 0 discriminator 3 view .LVU276
 1296 0044 0135     		adds	r5, r5, #1
 1297              	.LVL136:
 1298              	.L80:
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1299              		.loc 1 300 13 is_stmt 1 discriminator 1 view .LVU277
 300:user/w25q32.c ****     for(i=0;i<len;i++)
 1300              		.loc 1 300 5 is_stmt 0 discriminator 1 view .LVU278
 1301 0046 B542     		cmp	r5, r6
 1302 0048 F8D3     		bcc	.L81
 302:user/w25q32.c ****     FLASH_CS_High();    
 1303              		.loc 1 302 5 is_stmt 1 view .LVU279
 1304 004a 0122     		movs	r2, #1
 1305 004c 1021     		movs	r1, #16
 1306 004e 0248     		ldr	r0, .L83
 1307 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1308              	.LVL137:
 303:user/w25q32.c **** }
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 29


 1309              		.loc 1 303 1 is_stmt 0 view .LVU280
 1310 0054 70BD     		pop	{r4, r5, r6, pc}
 1311              	.LVL138:
 1312              	.L84:
 1313              		.loc 1 303 1 view .LVU281
 1314 0056 00BF     		.align	2
 1315              	.L83:
 1316 0058 00000240 		.word	1073872896
 1317              		.cfi_endproc
 1318              	.LFE151:
 1320              		.section	.text.read_sector,"ax",%progbits
 1321              		.align	1
 1322              		.global	read_sector
 1323              		.syntax unified
 1324              		.thumb
 1325              		.thumb_func
 1327              	read_sector:
 1328              	.LVL139:
 1329              	.LFB152:
 304:user/w25q32.c **** // ËØª‰∏Ä‰∏™ÊâáÂå∫ 4K
 305:user/w25q32.c **** void read_sector(uint32_t blk_addr,uint8_t *buf, uint16_t blk_len)
 306:user/w25q32.c **** {
 1330              		.loc 1 306 1 is_stmt 1 view -0
 1331              		.cfi_startproc
 1332              		@ args = 0, pretend = 0, frame = 0
 1333              		@ frame_needed = 0, uses_anonymous_args = 0
 1334              		.loc 1 306 1 is_stmt 0 view .LVU283
 1335 0000 70B5     		push	{r4, r5, r6, lr}
 1336              	.LCFI29:
 1337              		.cfi_def_cfa_offset 16
 1338              		.cfi_offset 4, -16
 1339              		.cfi_offset 5, -12
 1340              		.cfi_offset 6, -8
 1341              		.cfi_offset 14, -4
 1342 0002 0E46     		mov	r6, r1
 307:user/w25q32.c ****     uint32_t page_addr;
 1343              		.loc 1 307 5 is_stmt 1 view .LVU284
 308:user/w25q32.c ****     int i;
 1344              		.loc 1 308 5 view .LVU285
 309:user/w25q32.c ****     // addr = blk_addr*4096;
 310:user/w25q32.c ****     page_addr = blk_addr*16;
 1345              		.loc 1 310 5 view .LVU286
 1346              		.loc 1 310 15 is_stmt 0 view .LVU287
 1347 0004 0501     		lsls	r5, r0, #4
 1348              	.LVL140:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1349              		.loc 1 311 5 is_stmt 1 view .LVU288
 1350              		.loc 1 311 11 is_stmt 0 view .LVU289
 1351 0006 0024     		movs	r4, #0
 1352              		.loc 1 311 5 view .LVU290
 1353 0008 08E0     		b	.L86
 1354              	.LVL141:
 1355              	.L87:
 312:user/w25q32.c ****     {
 313:user/w25q32.c ****         FlashPage_Read(page_addr+i,buf+i*256,256);
 1356              		.loc 1 313 9 is_stmt 1 discriminator 3 view .LVU291
 1357 000a 2819     		adds	r0, r5, r4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 30


 1358 000c 4FF48072 		mov	r2, #256
 1359 0010 06EB0421 		add	r1, r6, r4, lsl #8
 1360 0014 80B2     		uxth	r0, r0
 1361 0016 FFF7FEFF 		bl	FlashPage_Read
 1362              	.LVL142:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1363              		.loc 1 311 24 discriminator 3 view .LVU292
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1364              		.loc 1 311 25 is_stmt 0 discriminator 3 view .LVU293
 1365 001a 0134     		adds	r4, r4, #1
 1366              	.LVL143:
 1367              	.L86:
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1368              		.loc 1 311 16 is_stmt 1 discriminator 1 view .LVU294
 311:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1369              		.loc 1 311 5 is_stmt 0 discriminator 1 view .LVU295
 1370 001c 0F2C     		cmp	r4, #15
 1371 001e F4DD     		ble	.L87
 314:user/w25q32.c ****     }
 315:user/w25q32.c **** }
 1372              		.loc 1 315 1 view .LVU296
 1373 0020 70BD     		pop	{r4, r5, r6, pc}
 1374              		.loc 1 315 1 view .LVU297
 1375              		.cfi_endproc
 1376              	.LFE152:
 1378              		.section	.text.write_sector,"ax",%progbits
 1379              		.align	1
 1380              		.global	write_sector
 1381              		.syntax unified
 1382              		.thumb
 1383              		.thumb_func
 1385              	write_sector:
 1386              	.LVL144:
 1387              	.LFB153:
 316:user/w25q32.c **** // ÂÜô‰∏Ä‰∏™ÊâáÂå∫ 4K
 317:user/w25q32.c **** void write_sector(uint32_t blk_addr,uint8_t *buf, uint16_t blk_len)
 318:user/w25q32.c **** {
 1388              		.loc 1 318 1 is_stmt 1 view -0
 1389              		.cfi_startproc
 1390              		@ args = 0, pretend = 0, frame = 0
 1391              		@ frame_needed = 0, uses_anonymous_args = 0
 1392              		.loc 1 318 1 is_stmt 0 view .LVU299
 1393 0000 70B5     		push	{r4, r5, r6, lr}
 1394              	.LCFI30:
 1395              		.cfi_def_cfa_offset 16
 1396              		.cfi_offset 4, -16
 1397              		.cfi_offset 5, -12
 1398              		.cfi_offset 6, -8
 1399              		.cfi_offset 14, -4
 1400 0002 0546     		mov	r5, r0
 1401 0004 0E46     		mov	r6, r1
 319:user/w25q32.c ****     uint32_t page_addr;
 1402              		.loc 1 319 5 is_stmt 1 view .LVU300
 320:user/w25q32.c ****     int i;
 1403              		.loc 1 320 5 view .LVU301
 321:user/w25q32.c ****     // addr = blk_addr*4096;
 322:user/w25q32.c ****     FlashSector_Erase(blk_addr);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 31


 1404              		.loc 1 322 5 view .LVU302
 1405 0006 80B2     		uxth	r0, r0
 1406              	.LVL145:
 1407              		.loc 1 322 5 is_stmt 0 view .LVU303
 1408 0008 FFF7FEFF 		bl	FlashSector_Erase
 1409              	.LVL146:
 323:user/w25q32.c ****     page_addr = blk_addr*16;
 1410              		.loc 1 323 5 is_stmt 1 view .LVU304
 1411              		.loc 1 323 15 is_stmt 0 view .LVU305
 1412 000c 2D01     		lsls	r5, r5, #4
 1413              	.LVL147:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1414              		.loc 1 324 5 is_stmt 1 view .LVU306
 1415              		.loc 1 324 11 is_stmt 0 view .LVU307
 1416 000e 0024     		movs	r4, #0
 1417              		.loc 1 324 5 view .LVU308
 1418 0010 08E0     		b	.L90
 1419              	.LVL148:
 1420              	.L91:
 325:user/w25q32.c ****     {
 326:user/w25q32.c ****         FlashPage_Write(page_addr+i,buf+i*256,256);
 1421              		.loc 1 326 9 is_stmt 1 discriminator 3 view .LVU309
 1422 0012 2819     		adds	r0, r5, r4
 1423 0014 4FF48072 		mov	r2, #256
 1424 0018 06EB0421 		add	r1, r6, r4, lsl #8
 1425 001c 80B2     		uxth	r0, r0
 1426 001e FFF7FEFF 		bl	FlashPage_Write
 1427              	.LVL149:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1428              		.loc 1 324 24 discriminator 3 view .LVU310
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1429              		.loc 1 324 25 is_stmt 0 discriminator 3 view .LVU311
 1430 0022 0134     		adds	r4, r4, #1
 1431              	.LVL150:
 1432              	.L90:
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1433              		.loc 1 324 16 is_stmt 1 discriminator 1 view .LVU312
 324:user/w25q32.c ****     for(i = 0; i < 16; i++)
 1434              		.loc 1 324 5 is_stmt 0 discriminator 1 view .LVU313
 1435 0024 0F2C     		cmp	r4, #15
 1436 0026 F4DD     		ble	.L91
 327:user/w25q32.c ****     }
 328:user/w25q32.c **** }
 1437              		.loc 1 328 1 view .LVU314
 1438 0028 70BD     		pop	{r4, r5, r6, pc}
 1439              		.loc 1 328 1 view .LVU315
 1440              		.cfi_endproc
 1441              	.LFE153:
 1443              		.text
 1444              	.Letext0:
 1445              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1446              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1447              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1448              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1449              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1450              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1451              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 32


 1452              		.file 9 "user/w25q32.h"
 1453              		.file 10 "Inc/spi.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 33


DEFINED SYMBOLS
                            *ABS*:00000000 w25q32.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:20     .text.SPI2_Write:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:26     .text.SPI2_Write:00000000 SPI2_Write
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:61     .text.SPI2_Write:0000001c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:66     .text.SPI2_Read:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:72     .text.SPI2_Read:00000000 SPI2_Read
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:109    .text.SPI2_Read:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:114    .text.FlashWait_Busy:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:120    .text.FlashWait_Busy:00000000 FlashWait_Busy
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:183    .text.FlashWait_Busy:00000038 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:188    .text.FlashGet_Info:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:194    .text.FlashGet_Info:00000000 FlashGet_Info
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:279    .text.FlashGet_Info:00000058 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:285    .text.FlashGet_ElectronicInfo:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:291    .text.FlashGet_ElectronicInfo:00000000 FlashGet_ElectronicInfo
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:378    .text.FlashGet_ElectronicInfo:0000005c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:384    .text.SpiFlash_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:390    .text.SpiFlash_Init:00000000 SpiFlash_Init
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:422    .text.FlashEnter_DeepPowerDown:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:428    .text.FlashEnter_DeepPowerDown:00000000 FlashEnter_DeepPowerDown
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:462    .text.FlashEnter_DeepPowerDown:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:467    .text.FlashReleaseFrom_DeepPowerDown:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:473    .text.FlashReleaseFrom_DeepPowerDown:00000000 FlashReleaseFrom_DeepPowerDown
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:507    .text.FlashReleaseFrom_DeepPowerDown:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:512    .text.FlashReleaseFrom_DeepPowerDownE:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:518    .text.FlashReleaseFrom_DeepPowerDownE:00000000 FlashReleaseFrom_DeepPowerDownE
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:577    .text.FlashReleaseFrom_DeepPowerDownE:0000003c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:582    .text.FlashWriteEnable:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:588    .text.FlashWriteEnable:00000000 FlashWriteEnable
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:622    .text.FlashWriteEnable:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:627    .text.FlashWriteDisable:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:633    .text.FlashWriteDisable:00000000 FlashWriteDisable
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:667    .text.FlashWriteDisable:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:672    .text.FlashWrite_StaRegister:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:678    .text.FlashWrite_StaRegister:00000000 FlashWrite_StaRegister
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:723    .text.FlashWrite_StaRegister:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:728    .text.FlashPage_Write:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:734    .text.FlashPage_Write:00000000 FlashPage_Write
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:824    .text.FlashPage_Write:00000054 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:829    .text.FlashChip_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:835    .text.FlashChip_Erase:00000000 FlashChip_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:875    .text.FlashChip_Erase:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:880    .text.FlashBlock_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:886    .text.FlashBlock_Erase:00000000 FlashBlock_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:945    .text.FlashBlock_Erase:0000003c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:950    .text.FlashSector_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:956    .text.FlashSector_Erase:00000000 FlashSector_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1022   .text.FlashSector_Erase:00000044 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1027   .text.FlashRead:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1033   .text.FlashRead:00000000 FlashRead
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1118   .text.FlashRead:00000050 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1123   .text.FlashPage_Read:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1129   .text.FlashPage_Read:00000000 FlashPage_Read
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1216   .text.FlashPage_Read:00000050 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1221   .text.FlashFastRead:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1227   .text.FlashFastRead:00000000 FlashFastRead
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s 			page 34


C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1316   .text.FlashFastRead:00000058 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1321   .text.read_sector:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1327   .text.read_sector:00000000 read_sector
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1379   .text.write_sector:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccHoMYck.s:1385   .text.write_sector:00000000 write_sector

UNDEFINED SYMBOLS
HAL_SPI_Transmit
hspi1
HAL_SPI_TransmitReceive
HAL_GPIO_WritePin
